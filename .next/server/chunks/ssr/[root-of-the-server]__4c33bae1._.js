module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},21600,(a,b,c)=>{"use strict";b.exports=a.r(18622)},24793,(a,b,c)=>{"use strict";b.exports=a.r(21600).vendored["react-ssr"].ReactJsxRuntime},21439,(a,b,c)=>{"use strict";b.exports=a.r(21600).vendored["react-ssr"].React},61110,a=>{"use strict";var b=a.i(24793),c=a.i(21439),d=a.i(48177),e=a.i(44874),f=a.i(20322);let g=(0,f.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var h=a.i(15269);let i=(0,f.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var j=a.i(5415);function k({value:a,type:f="text",onSave:k,className:l,isEditable:m=!0,columnName:n}){let[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(a??""),[s,t]=(0,c.useState)(!1),u=(0,c.useRef)(null),v=(0,c.useMemo)(()=>n?.toLowerCase().trim()==="cliente",[n]),w=(0,c.useMemo)(()=>v?(0,j.obtenerSugerenciasObraSocial)(String(a)):[],[v,a]);(0,c.useEffect)(()=>{r(a??"")},[a]),(0,c.useEffect)(()=>{o&&u.current&&u.current.focus()},[o]);let x=(0,c.useCallback)(async()=>{if(q===a)return void p(!1);t(!0);try{await k(q),p(!1)}catch(a){console.error("Error saving:",a)}finally{t(!1)}},[q,a,k]),y=(0,c.useCallback)(()=>{r(a??""),p(!1)},[a]),z=(0,c.useCallback)(a=>{"Enter"===a.key?x():"Escape"===a.key&&y()},[x,y]);if(!m)return(0,b.jsx)("div",{className:(0,j.cn)("px-2 py-1",l),children:a});if(o)return(0,b.jsxs)("div",{className:"flex flex-col gap-1 animate-in fade-in zoom-in-95 duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(d.Input,{ref:u,type:f,value:q,onChange:a=>r("number"===f?Number(a.target.value):a.target.value),onKeyDown:z,disabled:s,className:"h-8 min-w-[100px] bg-gray-800 border-green-500/50 focus:border-green-400 text-white",placeholder:v?"Ingrese obra social o código":void 0}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-green-400 hover:text-green-300 hover:bg-green-500/20",onClick:x,disabled:s,children:(0,b.jsx)(g,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",onClick:y,disabled:s,children:(0,b.jsx)(h.X,{className:"h-4 w-4"})})]}),v&&w.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:w.map((a,c)=>(0,b.jsx)("button",{type:"button",onClick:()=>{r(a),u.current?.focus()},className:"text-[10px] px-2 py-0.5 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded hover:bg-blue-500/30 transition-colors",children:a},c))})]});let A=(0,c.useCallback)(()=>{p(!0)},[]),B=(0,c.useMemo)(()=>null===a||""===a?(0,b.jsx)("span",{className:"text-gray-500 italic text-xs",children:"Vacío"}):"number"===f&&"number"==typeof a?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(a):a,[a,f]);return(0,b.jsxs)("div",{className:(0,j.cn)("group flex items-center justify-between px-2 py-1 rounded hover:bg-white/5 cursor-pointer transition-colors min-h-[32px]",l),onClick:A,children:[(0,b.jsx)("span",{className:"truncate",children:B}),(0,b.jsx)(i,{className:"h-3 w-3 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})}a.s(["InlineEditCell",()=>k],61110)},63048,a=>{"use strict";let b=(0,a.i(20322).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],63048)},69875,a=>{"use strict";var b=a.i(24793),c=a.i(21439),d=a.i(19147),e=a.i(40087),f=a.i(61110),g=a.i(44874),h=a.i(20322);let i=(0,h.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),j=(0,h.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var k=a.i(63048);let l=(0,h.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),m=(0,h.default)("copy-check",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var n=a.i(91683),o=a.i(29839);let p=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],q=["CONSULTA","CONSULTA DE GUARDIA CLINIC","CONSULTA PEDIATRICA Y NEONATAL","CONSULTA DE GUARDIA PEDIATRICA","CONSULTA GINECOLOGICA","CONSULTA DE GUARDIA GINECOLOGICA","CONSULTA EN INTERNADOS","INTERCONSULTAS","CONSULTA CARDIOLOGICA","E.C.G."];function r(){let[a,h]=(0,c.useState)(new Date().getMonth()+1),[r,s]=(0,c.useState)(new Date().getFullYear()),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(0);async function F(){try{y(!0);let{data:b,error:c}=await d.supabase.from("valores_consultas_obra_social").select("*").eq("mes",a).eq("anio",r).order("obra_social",{ascending:!0});if(c)throw c;let e=b||[];u(e);let f=[...new Set(e.map(a=>a.obra_social))];w(f)}catch(a){console.error("Error cargando valores:",a)}finally{y(!1)}}async function G(b){try{y(!0);let c=await b.arrayBuffer(),e=o.read(c,{type:"array"}),f=e.SheetNames[0],g=e.Sheets[f],h=[],i=o.utils.decode_range(g["!ref"]||"A1");for(let a=0;a<=i.e.c;a++){let b=g[o.utils.encode_cell({r:1,c:a})];b&&b.v&&h.push(String(b.v).trim())}let j=h.findIndex(a=>a.toLowerCase().includes("obra social")||a.toLowerCase().includes("prepaga")),k=h.findIndex(a=>a.toLowerCase().includes("vigencia"));if(-1===j)return void alert('No se encontró la columna "OBRA SOCIAL / PREPAGA" en el archivo');let l=[];for(let b=2;b<=i.e.r;b++){let c=o.utils.encode_cell({r:b,c:j}),d=g[c]?.v;if(!d)continue;let e=o.utils.encode_cell({r:b,c:k}),f=null;if(g[e]){let a=g[e].v;if(a instanceof Date)f=a.toISOString().split("T")[0];else if("number"==typeof a){let b=o.SSF.parse_date_code(a);b&&(f=`${b.y}-${String(b.m).padStart(2,"0")}-${String(b.d).padStart(2,"0")}`)}else if("string"==typeof a){let b=a.split("/");3===b.length&&(f=`${b[2]}-${b[1]}-${b[0]}`)}}h.forEach((c,e)=>{if(e===j||e===k)return;let h=g[o.utils.encode_cell({r:b,c:e})];if(!h)return;let i=null;if("number"==typeof h.v)i=h.v;else if("string"==typeof h.v){let a=h.v.replace(/[$,\s]/g,"").trim(),b=parseFloat(a);isNaN(b)||(i=b)}null!==i&&i>0&&l.push({obra_social:String(d).trim(),tipo_consulta:c.trim(),valor:i,vigencia:f,mes:a,anio:r})})}if(await d.supabase.from("valores_consultas_obra_social").delete().eq("mes",a).eq("anio",r),l.length>0){let{error:a}=await d.supabase.from("valores_consultas_obra_social").insert(l);if(a)throw a}await F(),A(!1),alert(`Se importaron ${l.length} valores correctamente`)}catch(a){console.error("Error importando Excel:",a),alert("Error al importar el archivo Excel: "+(a instanceof Error?a.message:"Error desconocido"))}finally{y(!1)}}async function H(){try{y(!0);let b=a-1,c=r;0===b&&(b=12,c=r-1);let{data:e,error:f}=await d.supabase.from("valores_consultas_obra_social").select("*").eq("mes",b).eq("anio",c);if(f)throw f;let g=e||[];if(0===g.length)return void alert("No hay valores en el mes anterior para copiar");await d.supabase.from("valores_consultas_obra_social").delete().eq("mes",a).eq("anio",r);let h=g.map(b=>({obra_social:b.obra_social,tipo_consulta:b.tipo_consulta,valor:B?Number((b.valor*(1+D/100)).toFixed(2)):b.valor,vigencia:b.vigencia,mes:a,anio:r})),{error:i}=await d.supabase.from("valores_consultas_obra_social").insert(h);if(i)throw i;await F(),alert(`Se copiaron ${h.length} valores desde ${p[b-1].label} ${c}`)}catch(a){console.error("Error copiando desde mes anterior:",a),alert("Error al copiar valores: "+(a instanceof Error?a.message:"Error desconocido"))}finally{y(!1)}}async function I(){let b=prompt('Ingrese el nombre de la obra social (ej: "001 - PROVINCIA"):');if(b&&b.trim())try{let{data:c}=await d.supabase.from("valores_consultas_obra_social").select("id").eq("obra_social",b.trim()).eq("mes",a).eq("anio",r).limit(1);if(c&&c.length>0)return void alert("Esta obra social ya existe para el mes y año seleccionados");let e=q.map(c=>({obra_social:b.trim(),tipo_consulta:c,valor:0,vigencia:null,mes:a,anio:r})),{error:f}=await d.supabase.from("valores_consultas_obra_social").insert(e);if(f)throw f;await F(),alert("Obra social agregada correctamente")}catch(a){console.error("Error agregando obra social:",a),alert("Error al agregar obra social: "+(a instanceof Error?a.message:"Error desconocido"))}}async function J(b,c,e){try{let{error:f}=await d.supabase.from("valores_consultas_obra_social").update({valor:e}).eq("obra_social",b).eq("tipo_consulta",c).eq("mes",a).eq("anio",r);if(f)throw f;await F()}catch(a){throw console.error("Error actualizando valor:",a),a}}(0,c.useEffect)(()=>{F()},[a,r]);let K=v.map(a=>{let b={obra_social:a};return q.forEach(c=>{let d=t.find(b=>b.obra_social===a&&b.tipo_consulta===c);b[c]=d?.valor||0}),b});return(0,b.jsx)("div",{className:"min-h-screen p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("h1",{className:"text-3xl font-bold text-green-400",children:"Valores de Consultas por Obra Social"})}),(0,b.jsx)("div",{className:"p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400",children:[(0,b.jsx)(i,{className:"h-5 w-5"}),(0,b.jsx)(j,{className:"h-4 w-4"})]}),(0,b.jsxs)("div",{className:"flex-1 text-sm text-gray-300 space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold text-green-400 mb-2",children:"¿Cómo funcionan los valores mensuales?"}),(0,b.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Primer mes:"}),' Importe el archivo Excel con los valores (botón "Importar Excel")']}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Meses siguientes:"}),' Use "Copiar desde mes anterior" o "Copiar con aumento %"']}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Histórico:"})," Cada mes mantiene sus propios valores para consultas históricas"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Edición:"})," Puede editar valores haciendo clic en la celda"]})]})]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-300",children:"Mes a gestionar:"}),(0,b.jsx)("select",{value:a,onChange:a=>h(Number(a.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white focus:border-green-400 focus:outline-none",children:p.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-300",children:"Año:"}),(0,b.jsx)("input",{type:"number",value:r,onChange:a=>s(Number(a.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white w-24 focus:border-green-400 focus:outline-none"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsxs)(g.Button,{onClick:I,className:"bg-green-600 hover:bg-green-500 text-white",disabled:x,children:[(0,b.jsx)(k.Plus,{className:"h-4 w-4 mr-2"}),"Crear Obra Social"]}),(0,b.jsxs)(g.Button,{onClick:()=>A(!z),variant:"outline",className:"border-purple-500/50 text-purple-400 hover:bg-purple-500/20",disabled:x,children:[(0,b.jsx)(n.Upload,{className:"h-4 w-4 mr-2"}),"Importar Excel"]}),(0,b.jsxs)(g.Button,{onClick:H,variant:"outline",className:`border-purple-500/50 text-purple-400 hover:bg-purple-500/20 ${!B?"bg-purple-500/20":""}`,disabled:x,children:[(0,b.jsx)(l,{className:"h-4 w-4 mr-2"}),"Copiar desde mes anterior"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{onClick:()=>{if(B)C(!1),E(0);else{let a=prompt("Ingrese el porcentaje de aumento:");a&&!isNaN(Number(a))&&(E(Number(a)),C(!0))}},variant:"outline",className:`border-purple-500/50 text-purple-400 hover:bg-purple-500/20 ${B?"bg-purple-500/20":""}`,disabled:x,children:B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{className:"h-4 w-4 mr-2"}),"✓ Copiar con aumento %"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l,{className:"h-4 w-4 mr-2"}),"Copiar con aumento %"]})}),B&&(0,b.jsx)("input",{type:"number",value:D,onChange:a=>E(Number(a.target.value)),placeholder:"%",className:"px-2 py-1 bg-gray-800 border border-purple-500/50 rounded text-white w-20 focus:border-purple-400 focus:outline-none"})]})]}),z&&(0,b.jsx)("div",{className:"p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:(0,b.jsx)(e.UploadExcel,{onUpload:G,isProcessing:x})}),(0,b.jsxs)("div",{className:"text-sm text-gray-400",children:["Obras sociales configuradas: ",(0,b.jsx)("span",{className:"text-green-400 font-semibold",children:v.length})]}),(0,b.jsx)("div",{className:"rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400 bg-green-500/20 border-b border-green-500/30 sticky left-0 z-10",style:{minWidth:"200px"},children:"Obra Social"}),q.map(a=>(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400 bg-green-500/20 border-b border-green-500/30 whitespace-nowrap",style:{minWidth:"150px"},children:a},a))]})}),(0,b.jsx)("tbody",{children:x?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:q.length+1,className:"px-4 py-8 text-center text-gray-400",children:"Cargando..."})}):0===K.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:q.length+1,className:"px-4 py-8 text-center text-gray-400",children:'No hay datos para el mes seleccionado. Use "Importar Excel" o "Copiar desde mes anterior" para comenzar.'})}):K.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 font-medium sticky left-0 bg-gray-900/95",style:{minWidth:"200px"},children:a.obra_social}),q.map(c=>(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(f.InlineEditCell,{value:a[c],type:"number",onSave:async b=>{await J(a.obra_social,c,Number(b))},isEditable:!0})},c))]},a.obra_social))})]})})})]})})}a.s(["default",()=>r],69875)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4c33bae1._.js.map
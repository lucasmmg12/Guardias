{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lucas/Desktop/Osde/Liquidaciones/Guardias/lib/supabase/client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\nimport { Database } from '@/lib/types'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uPAAY,EAAW,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lucas/Desktop/Osde/Liquidaciones/Guardias/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,sNAAO,EAAC,IAAA,6LAAI,EAAC;AACxB"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lucas/Desktop/Osde/Liquidaciones/Guardias/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n                destructive:\r\n                    \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n                outline:\r\n                    \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n                secondary:\r\n                    \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n                link: \"text-primary underline-offset-4 hover:underline\",\r\n            },\r\n            size: {\r\n                default: \"h-10 px-4 py-2\",\r\n                sm: \"h-9 rounded-md px-3\",\r\n                lg: \"h-11 rounded-md px-8\",\r\n                icon: \"h-10 w-10\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n)\r\n\r\nexport interface ButtonProps\r\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n    asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n        const Comp = asChild ? Slot : \"button\"\r\n        return (\r\n            <Comp\r\n                className={cn(buttonVariants({ variant, size, className }))}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uNAAG,EACtB,0RACA;IACI,UAAU;QACN,SAAS;YACL,SAAS;YACT,aACI;YACJ,SACI;YACJ,WACI;YACJ,OAAO;YACP,MAAM;QACV;QACA,MAAM;YACF,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACV;IACJ;IACA,iBAAiB;QACb,SAAS;QACT,MAAM;IACV;AACJ;AASJ,MAAM,uBAAS,mQAAgB,CAC3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACtD,MAAM,OAAO,UAAU,wNAAI,GAAG;IAC9B,qBACI,8RAAC;QACG,WAAW,IAAA,kKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lucas/Desktop/Osde/Liquidaciones/Guardias/components/custom/UploadExcel.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { Upload, FileSpreadsheet, X, CheckCircle, AlertCircle } from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { Button } from '@/components/ui/button'\r\n\r\ninterface UploadExcelProps {\r\n    onUpload: (file: File) => Promise<void>\r\n    isProcessing?: boolean\r\n}\r\n\r\nexport function UploadExcel({ onUpload, isProcessing = false }: UploadExcelProps) {\r\n    const [isDragging, setIsDragging] = useState(false)\r\n    const [file, setFile] = useState<File | null>(null)\r\n    const [error, setError] = useState<string | null>(null)\r\n\r\n    const handleDragOver = useCallback((e: React.DragEvent) => {\r\n        e.preventDefault()\r\n        setIsDragging(true)\r\n    }, [])\r\n\r\n    const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n        e.preventDefault()\r\n        setIsDragging(false)\r\n    }, [])\r\n\r\n    const handleDrop = useCallback((e: React.DragEvent) => {\r\n        e.preventDefault()\r\n        setIsDragging(false)\r\n        setError(null)\r\n\r\n        const droppedFile = e.dataTransfer.files[0]\r\n        validateAndSetFile(droppedFile)\r\n    }, [])\r\n\r\n    const handleFileInput = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setError(null)\r\n        const selectedFile = e.target.files?.[0]\r\n        if (selectedFile) {\r\n            validateAndSetFile(selectedFile)\r\n        }\r\n    }, [])\r\n\r\n    const validateAndSetFile = (file: File) => {\r\n        const validTypes = [\r\n            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n            'application/vnd.ms-excel'\r\n        ]\r\n\r\n        if (!validTypes.includes(file.type) && !file.name.endsWith('.xlsx') && !file.name.endsWith('.xls')) {\r\n            setError('Formato no v√°lido. Por favor sube un archivo Excel (.xlsx, .xls)')\r\n            return\r\n        }\r\n\r\n        if (file.size > 10 * 1024 * 1024) { // 10MB limit\r\n            setError('El archivo es demasiado grande (m√°x 10MB)')\r\n            return\r\n        }\r\n\r\n        setFile(file)\r\n    }\r\n\r\n    const handleProcess = async () => {\r\n        if (!file) return\r\n        try {\r\n            await onUpload(file)\r\n            // No limpiamos el archivo aqu√≠, dejamos que el padre decida qu√© hacer\r\n        } catch (err) {\r\n            setError('Error al procesar el archivo')\r\n        }\r\n    }\r\n\r\n    const clearFile = () => {\r\n        setFile(null)\r\n        setError(null)\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            {!file ? (\r\n                <div\r\n                    onDragOver={handleDragOver}\r\n                    onDragLeave={handleDragLeave}\r\n                    onDrop={handleDrop}\r\n                    className={cn(\r\n                        \"border-2 border-dashed rounded-xl p-12 text-center transition-all duration-200 cursor-pointer\",\r\n                        isDragging\r\n                            ? \"border-green-400 bg-green-400/10 scale-[1.02]\"\r\n                            : \"border-gray-700 hover:border-green-500/50 hover:bg-white/5\"\r\n                    )}\r\n                >\r\n                    <input\r\n                        type=\"file\"\r\n                        accept=\".xlsx,.xls\"\r\n                        onChange={handleFileInput}\r\n                        className=\"hidden\"\r\n                        id=\"excel-upload\"\r\n                    />\r\n                    <label htmlFor=\"excel-upload\" className=\"cursor-pointer w-full h-full block\">\r\n                        <div className=\"flex flex-col items-center gap-4\">\r\n                            <div className={cn(\r\n                                \"p-4 rounded-full transition-colors\",\r\n                                isDragging ? \"bg-green-400/20 text-green-400\" : \"bg-gray-800 text-gray-400\"\r\n                            )}>\r\n                                <Upload className=\"w-8 h-8\" />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-lg font-semibold text-gray-200\">\r\n                                    Sube tu archivo Excel\r\n                                </h3>\r\n                                <p className=\"text-sm text-gray-400 mt-1\">\r\n                                    Arrastra y suelta o haz clic para seleccionar\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500 bg-gray-800/50 px-3 py-1 rounded-full\">\r\n                                Soporta .xlsx y .xls hasta 10MB\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-gray-800/50 border border-gray-700 rounded-xl p-6\">\r\n                    <div className=\"flex items-center justify-between mb-6\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"p-3 bg-green-500/20 text-green-400 rounded-lg\">\r\n                                <FileSpreadsheet className=\"w-6 h-6\" />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"font-medium text-gray-200\">{file.name}</h3>\r\n                                <p className=\"text-sm text-gray-400\">\r\n                                    {(file.size / 1024).toFixed(1)} KB\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        {!isProcessing && (\r\n                            <button\r\n                                onClick={clearFile}\r\n                                className=\"p-2 hover:bg-white/10 rounded-full text-gray-400 hover:text-red-400 transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5\" />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"flex items-center gap-2 text-red-400 bg-red-400/10 p-3 rounded-lg mb-4 text-sm\">\r\n                            <AlertCircle className=\"w-4 h-4\" />\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex justify-end gap-3\">\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={clearFile}\r\n                            disabled={isProcessing}\r\n                            className=\"border-gray-600 text-gray-300 hover:bg-white/5 hover:text-white\"\r\n                        >\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleProcess}\r\n                            disabled={isProcessing}\r\n                            className=\"bg-green-600 hover:bg-green-500 text-white min-w-[140px]\"\r\n                        >\r\n                            {isProcessing ? (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                                    Procesando...\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <CheckCircle className=\"w-4 h-4\" />\r\n                                    Procesar\r\n                                </div>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lucas/Desktop/Osde/Liquidaciones/Guardias/lib/guardias-processor.ts"],"sourcesContent":["import { SupabaseClient } from '@supabase/supabase-js'\r\nimport * as XLSX from 'xlsx'\r\nimport {\r\n    Database,\r\n    DetalleGuardiaInsert,\r\n    LiquidacionGuardia,\r\n    Medico,\r\n    TarifaGuardia,\r\n    ConfiguracionAdicional\r\n} from './types'\r\n\r\nexport interface ResultadoProcesamientoExcel {\r\n    totalFilas: number\r\n    procesadas: number\r\n    errores: string[]\r\n    advertencias: string[]\r\n    detalles: DetalleGuardiaInsert[]\r\n}\r\n\r\nexport class GuardiasProcessor {\r\n    private supabase: SupabaseClient<Database>\r\n    private especialidad: string\r\n    private mes: number\r\n    private anio: number\r\n\r\n    constructor(\r\n        supabase: SupabaseClient<Database>,\r\n        especialidad: string,\r\n        mes: number,\r\n        anio: number\r\n    ) {\r\n        this.supabase = supabase\r\n        this.especialidad = especialidad\r\n        this.mes = mes\r\n        this.anio = anio\r\n    }\r\n\r\n    async procesarExcel(file: File): Promise<ResultadoProcesamientoExcel> {\r\n        const resultado: ResultadoProcesamientoExcel = {\r\n            totalFilas: 0,\r\n            procesadas: 0,\r\n            errores: [],\r\n            advertencias: [],\r\n            detalles: []\r\n        }\r\n\r\n        try {\r\n            // 1. Leer Excel\r\n            const buffer = await file.arrayBuffer()\r\n            const workbook = XLSX.read(buffer)\r\n            const worksheet = workbook.Sheets[workbook.SheetNames[0]]\r\n            const jsonData = XLSX.utils.sheet_to_json(worksheet)\r\n\r\n            resultado.totalFilas = jsonData.length\r\n\r\n            // 2. Cargar datos de referencia\r\n            const medicos = await this.cargarMedicos()\r\n            const tarifas = await this.cargarTarifas()\r\n            const configuraciones = await this.cargarConfiguraciones()\r\n\r\n            // 3. Procesar filas\r\n            for (const row of jsonData as any[]) {\r\n                try {\r\n                    if (!this.validarFila(row)) continue\r\n\r\n                    const detalle = await this.procesarFila(\r\n                        row,\r\n                        medicos,\r\n                        tarifas,\r\n                        configuraciones\r\n                    )\r\n\r\n                    if (detalle) {\r\n                        resultado.detalles.push(detalle)\r\n                        resultado.procesadas++\r\n                    }\r\n                } catch (error: any) {\r\n                    resultado.errores.push(`Error en fila: ${error.message}`)\r\n                }\r\n            }\r\n\r\n        } catch (error: any) {\r\n            resultado.errores.push(`Error general: ${error.message}`)\r\n        }\r\n\r\n        return resultado\r\n    }\r\n\r\n    private async cargarMedicos() {\r\n        const { data } = await this.supabase\r\n            .from('medicos')\r\n            .select('*')\r\n            .eq('activo', true)\r\n            .eq('especialidad', this.especialidad)\r\n        return data || []\r\n    }\r\n\r\n    private async cargarTarifas() {\r\n        const { data } = await this.supabase\r\n            .from('tarifas_guardia')\r\n            .select('*')\r\n            .eq('tipo_guardia', this.especialidad)\r\n            .eq('activo', true)\r\n        return data || []\r\n    }\r\n\r\n    private async cargarConfiguraciones() {\r\n        const { data } = await this.supabase\r\n            .from('configuracion_adicionales')\r\n            .select('*')\r\n            .eq('especialidad', this.especialidad)\r\n            .eq('mes', this.mes)\r\n            .eq('anio', this.anio)\r\n        return data || []\r\n    }\r\n\r\n    private validarFila(row: any): boolean {\r\n        // Implementaci√≥n b√°sica de validaci√≥n\r\n        if (!row) return false\r\n        // Agregar m√°s validaciones seg√∫n especialidad\r\n        return true\r\n    }\r\n\r\n    private async procesarFila(\r\n        row: any,\r\n        medicos: Medico[],\r\n        tarifas: TarifaGuardia[],\r\n        configuraciones: ConfiguracionAdicional[]\r\n    ): Promise<DetalleGuardiaInsert | null> {\r\n        // L√≥gica placeholder - Aqu√≠ ir√≠a la implementaci√≥n real de Pediatr√≠a/Ginecolog√≠a\r\n        // Retornamos un objeto b√°sico para que compile\r\n\r\n        // Simulaci√≥n de identificaci√≥n de m√©dico\r\n        const medico = medicos.find(m =>\r\n            (row['Medico'] && m.nombre.toLowerCase().includes(row['Medico'].toLowerCase())) ||\r\n            (row['Matricula'] && m.matricula === row['Matricula'])\r\n        )\r\n\r\n        return {\r\n            liquidacion_id: '', // Se asignar√° al guardar\r\n            fecha: new Date().toISOString(), // Placeholder\r\n            medico_id: medico?.id || null,\r\n            medico_nombre: medico?.nombre || row['Medico'] || 'Desconocido',\r\n            medico_matricula: medico?.matricula || null,\r\n            medico_es_residente: medico?.es_residente || false,\r\n            monto_facturado: 0,\r\n            importe_calculado: 0,\r\n            estado_revision: 'pendiente'\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lucas/Desktop/Osde/Liquidaciones/Guardias/app/pediatria/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { supabase } from '@/lib/supabase/client'\r\nimport { UploadExcel } from '@/components/custom/UploadExcel'\r\nimport { GuardiasProcessor } from '@/lib/guardias-processor'\r\nimport { AlertCircle, CheckCircle2 } from 'lucide-react'\r\n\r\nexport default function PediatriaPage() {\r\n    const [medicos, setMedicos] = useState<any[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [isProcessing, setIsProcessing] = useState(false)\r\n    const [result, setResult] = useState<any>(null)\r\n\r\n    useEffect(() => {\r\n        loadMedicos()\r\n    }, [])\r\n\r\n    async function loadMedicos() {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('medicos')\r\n                .select('*')\r\n                .eq('especialidad', 'Pediatr√≠a')\r\n                .eq('activo', true)\r\n\r\n            if (error) throw error\r\n            setMedicos(data || [])\r\n        } catch (error) {\r\n            console.error('Error loading m√©dicos:', error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleUpload = async (file: File) => {\r\n        setIsProcessing(true)\r\n        setResult(null)\r\n\r\n        try {\r\n            // Instanciar procesador para Pediatr√≠a (mes/a√±o hardcodeados por ahora, luego vendr√°n de un selector)\r\n            const processor = new GuardiasProcessor(\r\n                supabase,\r\n                'Pediatr√≠a',\r\n                new Date().getMonth() + 1,\r\n                new Date().getFullYear()\r\n            )\r\n\r\n            const processingResult = await processor.procesarExcel(file)\r\n            setResult(processingResult)\r\n\r\n        } catch (error) {\r\n            console.error('Error processing file:', error)\r\n            setResult({\r\n                error: 'Ocurri√≥ un error inesperado al procesar el archivo.'\r\n            })\r\n        } finally {\r\n            setIsProcessing(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen p-8 pb-20\">\r\n            <div className=\"max-w-6xl mx-auto space-y-8\">\r\n                {/* Header */}\r\n                <div>\r\n                    <h1 className=\"text-4xl font-bold bg-gradient-to-r from-green-400 to-emerald-300 bg-clip-text text-transparent mb-2\">\r\n                        M√≥dulo Pediatr√≠a\r\n                    </h1>\r\n                    <p className=\"text-gray-400\">\r\n                        Procesamiento de liquidaciones por producci√≥n\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Upload Excel Card */}\r\n                <div className=\"glass-effect glow-green p-8 rounded-xl\">\r\n                    <h2 className=\"text-2xl font-bold text-green-400 mb-6\">\r\n                        üì§ Cargar Liquidaci√≥n\r\n                    </h2>\r\n\r\n                    <UploadExcel onUpload={handleUpload} isProcessing={isProcessing} />\r\n\r\n                    {/* Resultados del Procesamiento */}\r\n                    {result && (\r\n                        <div className=\"mt-6 animate-in fade-in slide-in-from-top-4 duration-500\">\r\n                            {result.error ? (\r\n                                <div className=\"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-start gap-3 text-red-400\">\r\n                                    <AlertCircle className=\"w-5 h-5 mt-0.5 shrink-0\" />\r\n                                    <div>\r\n                                        <h3 className=\"font-semibold\">Error de Procesamiento</h3>\r\n                                        <p className=\"text-sm opacity-90\">{result.error}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"bg-green-500/10 border border-green-500/30 rounded-lg p-6\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <CheckCircle2 className=\"w-6 h-6 text-green-400\" />\r\n                                        <h3 className=\"text-lg font-semibold text-green-400\">\r\n                                            Procesamiento Completado\r\n                                        </h3>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n                                        <div className=\"bg-black/20 p-3 rounded-lg\">\r\n                                            <div className=\"text-sm text-gray-400\">Total Filas</div>\r\n                                            <div className=\"text-2xl font-bold text-white\">{result.totalFilas}</div>\r\n                                        </div>\r\n                                        <div className=\"bg-black/20 p-3 rounded-lg\">\r\n                                            <div className=\"text-sm text-gray-400\">Procesadas</div>\r\n                                            <div className=\"text-2xl font-bold text-green-400\">{result.procesadas}</div>\r\n                                        </div>\r\n                                        <div className=\"bg-black/20 p-3 rounded-lg\">\r\n                                            <div className=\"text-sm text-gray-400\">Errores</div>\r\n                                            <div className=\"text-2xl font-bold text-red-400\">{result.errores.length}</div>\r\n                                        </div>\r\n                                        <div className=\"bg-black/20 p-3 rounded-lg\">\r\n                                            <div className=\"text-sm text-gray-400\">Advertencias</div>\r\n                                            <div className=\"text-2xl font-bold text-yellow-400\">{result.advertencias.length}</div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {result.errores.length > 0 && (\r\n                                        <div className=\"mt-4\">\r\n                                            <h4 className=\"text-sm font-semibold text-red-400 mb-2\">Detalle de Errores:</h4>\r\n                                            <ul className=\"text-sm text-red-300/80 space-y-1 max-h-32 overflow-y-auto bg-black/20 p-2 rounded\">\r\n                                                {result.errores.map((err: string, i: number) => (\r\n                                                    <li key={i}>‚Ä¢ {err}</li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"grid md:grid-cols-3 gap-8\">\r\n                    {/* M√©dicos Activos */}\r\n                    <div className=\"md:col-span-2 glass-effect p-6 rounded-xl\">\r\n                        <h3 className=\"text-xl font-semibold text-gray-200 mb-4 flex items-center gap-2\">\r\n                            üë®‚Äç‚öïÔ∏è M√©dicos Activos\r\n                            <span className=\"text-sm font-normal text-gray-500 bg-gray-800 px-2 py-0.5 rounded-full\">\r\n                                {medicos.length}\r\n                            </span>\r\n                        </h3>\r\n\r\n                        {loading ? (\r\n                            <div className=\"text-center py-8 text-gray-400\">\r\n                                Cargando m√©dicos...\r\n                            </div>\r\n                        ) : medicos.length === 0 ? (\r\n                            <div className=\"text-center py-8 text-gray-400\">\r\n                                No hay m√©dicos registrados en Pediatr√≠a\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"grid sm:grid-cols-2 gap-3\">\r\n                                {medicos.map((medico) => (\r\n                                    <div\r\n                                        key={medico.id}\r\n                                        className=\"bg-white/5 p-3 rounded-lg hover:bg-white/10 transition-colors border border-white/5\"\r\n                                    >\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div>\r\n                                                <div className=\"font-medium text-gray-200 text-sm\">\r\n                                                    {medico.nombre}\r\n                                                </div>\r\n                                                <div className=\"text-xs text-gray-500 font-mono mt-1\">\r\n                                                    MN: {medico.matricula}\r\n                                                </div>\r\n                                            </div>\r\n                                            {medico.es_residente ? (\r\n                                                <span className=\"px-2 py-0.5 bg-blue-500/20 text-blue-400 text-[10px] uppercase tracking-wider font-semibold rounded\">\r\n                                                    Residente\r\n                                                </span>\r\n                                            ) : (\r\n                                                <span className=\"px-2 py-0.5 bg-green-500/20 text-green-400 text-[10px] uppercase tracking-wider font-semibold rounded\">\r\n                                                    Planta\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Reglas de Negocio */}\r\n                    <div className=\"glass-effect p-6 rounded-xl h-fit\">\r\n                        <h3 className=\"text-xl font-semibold text-gray-200 mb-4\">\r\n                            üìã Reglas Vigentes\r\n                        </h3>\r\n                        <div className=\"space-y-4 text-sm text-gray-300\">\r\n                            <div className=\"p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                                <div className=\"text-xs text-gray-500 uppercase tracking-wider mb-1\">Retenci√≥n</div>\r\n                                <div className=\"font-semibold text-white\">30%</div>\r\n                                <div className=\"text-xs text-gray-400\">Sobre monto facturado</div>\r\n                            </div>\r\n\r\n                            <div className=\"p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                                <div className=\"text-xs text-gray-500 uppercase tracking-wider mb-1\">Adicionales</div>\r\n                                <ul className=\"space-y-1\">\r\n                                    <li className=\"flex justify-between\">\r\n                                        <span>Damsu</span>\r\n                                        <span className=\"text-green-400\">+$1,500</span>\r\n                                    </li>\r\n                                    <li className=\"flex justify-between\">\r\n                                        <span>Provincia</span>\r\n                                        <span className=\"text-green-400\">+$1,200</span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <div className=\"p-3 bg-white/5 rounded-lg border border-white/5\">\r\n                                <div className=\"text-xs text-gray-500 uppercase tracking-wider mb-1\">F√≥rmula</div>\r\n                                <div className=\"font-mono text-xs text-gray-400\">\r\n                                    (Monto - 30%) + Adicional\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}
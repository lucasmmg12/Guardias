(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8674,60661,71375,e=>{"use strict";var r=e.i(9964),a=e.i(87312),t=e.i(71434);let s=(0,t.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>s],60661);var l=e.i(47188),o=e.i(68499);let i=(0,t.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>i],71375);var n=e.i(58427),c=e.i(97451),d=e.i(83643);function u({onUpload:e,isProcessing:t=!1}){let[u,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[b,p]=(0,a.useState)(null),g=(0,a.useCallback)(e=>{e.preventDefault(),x(!0)},[]),f=(0,a.useCallback)(e=>{e.preventDefault(),x(!1)},[]),N=(0,a.useCallback)(e=>{e.preventDefault(),x(!1),p(null),y(e.dataTransfer.files[0])},[]),v=(0,a.useCallback)(e=>{p(null);let r=e.target.files?.[0];r&&y(r)},[]),y=e=>{["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)||e.name.endsWith(".xlsx")||e.name.endsWith(".xls")?e.size>0xa00000?p("El archivo es demasiado grande (m√°x 10MB)"):h(e):p("Formato no v√°lido. Por favor sube un archivo Excel (.xlsx, .xls)")},C=async()=>{m&&(p(null),setTimeout(async()=>{try{await e(m)}catch(e){p("Error al procesar el archivo")}},0))},A=()=>{h(null),p(null)};return(0,r.jsx)("div",{className:"w-full",children:m?(0,r.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-green-500/20 text-green-400 rounded-lg",children:(0,r.jsx)(l.FileSpreadsheet,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-200",children:m.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[(m.size/1024).toFixed(1)," KB"]})]})]}),!t&&(0,r.jsx)("button",{onClick:A,className:"p-2 hover:bg-white/10 rounded-full text-gray-400 hover:text-red-400 transition-colors",children:(0,r.jsx)(o.X,{className:"w-5 h-5"})})]}),b&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-400 bg-red-400/10 p-3 rounded-lg mb-4 text-sm",children:[(0,r.jsx)(n.AlertCircle,{className:"w-4 h-4"}),b]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(d.Button,{variant:"outline",onClick:A,disabled:t,className:"border-gray-600 text-gray-300 hover:bg-white/5 hover:text-white",children:"Cancelar"}),(0,r.jsx)(d.Button,{onClick:C,disabled:t,className:"bg-green-600 hover:bg-green-500 text-white min-w-[140px]",children:t?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i,{className:"w-4 h-4"}),"Procesar"]})})]})]}):(0,r.jsxs)("div",{onDragOver:g,onDragLeave:f,onDrop:N,className:(0,c.cn)("border-2 border-dashed rounded-xl p-12 text-center transition-all duration-200 cursor-pointer",u?"border-green-400 bg-green-400/10 scale-[1.02]":"border-gray-700 hover:border-green-500/50 hover:bg-white/5"),children:[(0,r.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:v,className:"hidden",id:"excel-upload"}),(0,r.jsx)("label",{htmlFor:"excel-upload",className:"cursor-pointer w-full h-full block",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:(0,c.cn)("p-4 rounded-full transition-colors",u?"bg-green-400/20 text-green-400":"bg-gray-800 text-gray-400"),children:(0,r.jsx)(s,{className:"w-8 h-8"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:"Sube tu archivo Excel"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Arrastra y suelta o haz clic para seleccionar"})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 bg-gray-800/50 px-3 py-1 rounded-full",children:"Soporta .xlsx y .xls hasta 10MB"})]})})]})})}e.s(["UploadExcel",()=>u],8674)},80828,e=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>r])},60554,e=>{"use strict";let r=(0,e.i(71434).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>r],60554)},7987,e=>{"use strict";var r=e.i(9964),a=e.i(87312),t=e.i(97451);let s=a.forwardRef(({className:e,type:a,...s},l)=>(0,r.jsx)("input",{type:a,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));s.displayName="Input",e.s(["Input",()=>s])},5097,e=>{"use strict";let r=(0,e.i(71434).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>r],5097)},41253,e=>{"use strict";var r=e.i(9964),a=e.i(87312),t=e.i(7987),s=e.i(83643),l=e.i(71434);let o=(0,l.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var i=e.i(68499);let n=(0,l.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var c=e.i(97451);function d({value:e,type:l="text",onSave:d,className:u,isEditable:x=!0,columnName:m}){let[h,b]=(0,a.useState)(!1),[p,g]=(0,a.useState)(e??""),[f,N]=(0,a.useState)(!1),v=(0,a.useRef)(null),y=(0,a.useMemo)(()=>m?.toLowerCase().trim()==="cliente",[m]),C=(0,a.useMemo)(()=>y?(0,c.obtenerSugerenciasObraSocial)(String(e)):[],[y,e]);(0,a.useEffect)(()=>{g(e??"")},[e]),(0,a.useEffect)(()=>{h&&v.current&&v.current.focus()},[h]);let A=(0,a.useCallback)(async()=>{if(p===e)return void b(!1);N(!0);try{await d(p),b(!1)}catch(e){console.error("Error saving:",e)}finally{N(!1)}},[p,e,d]),j=(0,a.useCallback)(()=>{g(e??""),b(!1)},[e]),w=(0,a.useCallback)(e=>{"Enter"===e.key?A():"Escape"===e.key&&j()},[A,j]);if(!x)return(0,r.jsx)("div",{className:(0,c.cn)("px-2 py-1",u),children:e});if(h)return(0,r.jsxs)("div",{className:"flex flex-col gap-1 animate-in fade-in zoom-in-95 duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(t.Input,{ref:v,type:l,value:p,onChange:e=>g("number"===l?Number(e.target.value):e.target.value),onKeyDown:w,disabled:f,className:"h-8 min-w-[100px] bg-gray-800 border-green-500/50 focus:border-green-400 text-white",placeholder:y?"Ingrese obra social o c√≥digo":void 0}),(0,r.jsx)(s.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-green-400 hover:text-green-300 hover:bg-green-500/20",onClick:A,disabled:f,children:(0,r.jsx)(o,{className:"h-4 w-4"})}),(0,r.jsx)(s.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",onClick:j,disabled:f,children:(0,r.jsx)(i.X,{className:"h-4 w-4"})})]}),y&&C.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:C.map((e,a)=>(0,r.jsx)("button",{type:"button",onClick:()=>{g(e),v.current?.focus()},className:"text-[10px] px-2 py-0.5 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded hover:bg-blue-500/30 transition-colors",children:e},a))})]});let S=(0,a.useCallback)(()=>{b(!0)},[]),E=(0,a.useMemo)(()=>null===e||""===e?(0,r.jsx)("span",{className:"text-gray-500 italic text-xs",children:"Vac√≠o"}):"number"===l&&"number"==typeof e?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e):e,[e,l]);return(0,r.jsxs)("div",{className:(0,c.cn)("group flex items-center justify-between px-2 py-1 rounded hover:bg-white/5 cursor-pointer transition-colors min-h-[32px]",u),onClick:S,children:[(0,r.jsx)("span",{className:"truncate",children:E}),(0,r.jsx)(n,{className:"h-3 w-3 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})}e.s(["InlineEditCell",()=>d],41253)},37882,e=>{"use strict";let r=(0,e.i(71434).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],37882)},23229,e=>{"use strict";var r=e.i(9964),a=e.i(87312),t=e.i(71375),s=e.i(68499),l=e.i(58427);let o=(0,e.i(71434).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var i=e.i(60554),n=e.i(83643);function c({isOpen:e,onClose:c,title:d,message:u,type:x="info",duration:m=0}){return((0,a.useEffect)(()=>{if(e&&m>0){let e=setTimeout(()=>{c()},m);return()=>clearTimeout(e)}},[e,m,c]),e)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"},onClick:c,children:(0,r.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl p-6 shadow-2xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:`1px solid ${(()=>{switch(x){case"success":return"border-green-500/50";case"error":return"border-red-500/50";case"warning":return"border-yellow-500/50";default:return"border-blue-500/50"}})().replace("/50","/30")}`,boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)",animation:"fadeIn 0.2s ease-in-out"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:c,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-white/10 transition-colors text-gray-400 hover:text-white",children:(0,r.jsx)(s.X,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-1",children:(()=>{switch(x){case"success":return(0,r.jsx)(t.CheckCircle,{className:"h-6 w-6 text-green-400"});case"error":return(0,r.jsx)(l.AlertCircle,{className:"h-6 w-6 text-red-400"});case"warning":return(0,r.jsx)(i.AlertTriangle,{className:"h-6 w-6 text-yellow-400"});default:return(0,r.jsx)(o,{className:"h-6 w-6 text-blue-400"})}})()}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[d&&(0,r.jsx)("h3",{className:`text-lg font-semibold ${(()=>{switch(x){case"success":return"text-green-400";case"error":return"text-red-400";case"warning":return"text-yellow-400";default:return"text-blue-400"}})()}`,children:d}),(0,r.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:u})]})]}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)(n.Button,{onClick:c,className:`${"success"===x?"bg-green-600 hover:bg-green-500":"error"===x?"bg-red-600 hover:bg-red-500":"warning"===x?"bg-yellow-600 hover:bg-yellow-500":"bg-blue-600 hover:bg-blue-500"} text-white`,children:"Aceptar"})})]})}):null}e.s(["NotificationModal",()=>c],23229)},4601,e=>{"use strict";var r=e.i(9964),a=e.i(87312),t=e.i(7735),s=e.i(74786),l=e.i(8674),o=e.i(41253),i=e.i(23229),n=e.i(83643),c=e.i(7987),d=e.i(68499);let u=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];function x({isOpen:e,onClose:t,onSave:s,mes:l,anio:o}){let[i,x]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),[b,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&(x(""),p(null))},[e]);let g=async e=>{if(e.preventDefault(),!i.trim())return void p("El nombre de la obra social es requerido");h(!0),p(null);try{await s(i.trim()),t()}catch(e){p(e instanceof Error?e.message:"Error al guardar la obra social")}finally{h(!1)}};return e?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:t,children:(0,r.jsxs)("div",{className:"relative rounded-2xl p-8 max-w-md w-full",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,r.jsx)(d.X,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-2",children:"Crear Nueva Obra Social"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Se agregar√° para ",(0,r.jsxs)("span",{className:"text-green-400 font-semibold",children:[u[l-1]," ",o]})]})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre de la Obra Social"}),(0,r.jsx)(c.Input,{type:"text",value:i,onChange:e=>{x(e.target.value),p(null)},placeholder:"Ej: 001 - PROVINCIA",className:"bg-gray-800 border-green-500/50 text-white placeholder:text-gray-500 focus:border-green-400 focus:ring-green-400/50",disabled:m,autoFocus:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Ingrese el c√≥digo y nombre (ej: "001 - PROVINCIA", "004 - DAMSU")'})]}),b&&(0,r.jsx)("div",{className:"p-3 rounded-lg text-sm",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:(0,r.jsx)("p",{className:"text-red-400",children:b})}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(n.Button,{type:"button",variant:"outline",onClick:t,disabled:m,className:"flex-1 border-gray-600 text-gray-300 hover:bg-white/5 hover:text-white",children:"Cancelar"}),(0,r.jsx)(n.Button,{type:"submit",disabled:m||!i.trim(),className:"flex-1 bg-green-600 hover:bg-green-500 text-white",children:m?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Guardando..."]}):"Crear Obra Social"})]})]})]})}):null}var m=e.i(71434);let h=(0,m.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),b=(0,m.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var p=e.i(37882);let g=(0,m.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),f=(0,m.default)("copy-check",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var N=e.i(60661),v=e.i(5097),y=e.i(81981),C=e.i(38431),A=e.i(99093),j=e.i(89174),w=e.i(97451);let S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],E=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],I=["CONSULTA","CONSULTA DE GUARDIA CLINICA","CONSULTA PEDIATRICA Y NEONATAL","CONSULTA DE GUARDIA PEDIATRICA","CONSULTA GINECOLOGICA","CONSULTA DE GUARDIA GINECOLOGICA","CONSULTA EN INTERNADOS","INTERCONSULTAS","CONSULTA CARDIOLOGICA","E.C.G."];function O(){(0,t.useRouter)();let[e,c]=(0,a.useState)(new Date().getMonth()+1),[d,u]=(0,a.useState)(new Date().getFullYear()),[m,O]=(0,a.useState)([]),[k,L]=(0,a.useState)([]),[D,T]=(0,a.useState)(!1),[U,R]=(0,a.useState)(!1),[_,G]=(0,a.useState)(!1),[F,M]=(0,a.useState)(!1),[P,z]=(0,a.useState)(0),[q,$]=(0,a.useState)({isOpen:!1,type:"info",message:""});(0,a.useEffect)(()=>{W()},[e,d]);let B=(e,r,a)=>{$({isOpen:!0,type:e,message:r,title:a})};async function W(){try{T(!0);let{data:r,error:a}=await s.supabase.from("valores_consultas_obra_social").select("*").eq("mes",e).eq("anio",d).order("obra_social",{ascending:!0});if(a)throw a;let t=r||[];O(t);let l=[...new Set(t.map(e=>e.obra_social))];L(l)}catch(e){console.error("Error cargando valores:",e)}finally{T(!1)}}async function V(r){try{T(!0);let a=await r.arrayBuffer(),t=C.read(a,{type:"array"}),l=t.SheetNames[0],o=t.Sheets[l],i=[],n=C.utils.decode_range(o["!ref"]||"A1");for(let e=0;e<=n.e.c;e++){let r=o[C.utils.encode_cell({r:1,c:e})];r&&r.v&&i.push(String(r.v).trim())}let c=i.findIndex(e=>e.toLowerCase().includes("obra social")||e.toLowerCase().includes("prepaga")),u=i.findIndex(e=>e.toLowerCase().includes("vigencia"));if(-1===c)return void B("error",'No se encontr√≥ la columna "OBRA SOCIAL / PREPAGA" en el archivo',"Error de formato");let x=[];for(let r=2;r<=n.e.r;r++){let a=C.utils.encode_cell({r:r,c:c}),t=o[a]?.v;if(!t)continue;let s=C.utils.encode_cell({r:r,c:u}),l=null;if(o[s]){let e=o[s].v;if(e instanceof Date)l=e.toISOString().split("T")[0];else if("number"==typeof e){let r=C.SSF.parse_date_code(e);r&&(l=`${r.y}-${String(r.m).padStart(2,"0")}-${String(r.d).padStart(2,"0")}`)}else if("string"==typeof e){let r=e.split("/");3===r.length&&(l=`${r[2]}-${r[1]}-${r[0]}`)}}i.forEach((a,s)=>{if(s===c||s===u)return;let i=o[C.utils.encode_cell({r:r,c:s})];if(!i)return;let n=null;if("number"==typeof i.v)n=i.v;else if("string"==typeof i.v){let e=i.v.replace(/[$,\s]/g,"").trim(),r=parseFloat(e);isNaN(r)||(n=r)}if(null!==n&&n>0){let r=function(e){let r=e.toUpperCase().trim(),a={CONSULTA:"CONSULTA","CONSULTA DE GUARDIA CLINIC":"CONSULTA DE GUARDIA CLINICA","CONSULTA DE GUARDIA CLINICA":"CONSULTA DE GUARDIA CLINICA","CONSULTA DE GUARDIA CL√çNICA":"CONSULTA DE GUARDIA CLINICA","CONSULTA DE GUARDIA CL√çNIC":"CONSULTA DE GUARDIA CLINICA","CONSULTA PEDIATRICA Y NEONATAL":"CONSULTA PEDIATRICA Y NEONATAL","CONSULTA DE GUARDIA PEDIATRICA":"CONSULTA DE GUARDIA PEDIATRICA","CONSULTA GINECOLOGICA":"CONSULTA GINECOLOGICA","CONSULTA DE GUARDIA GINECOLOGICA":"CONSULTA DE GUARDIA GINECOLOGICA","CONSULTA EN INTERNADOS":"CONSULTA EN INTERNADOS",INTERCONSULTAS:"INTERCONSULTAS","CONSULTA CARDIOLOGICA":"CONSULTA CARDIOLOGICA","E.C.G.":"E.C.G.",ECG:"E.C.G."};if(a[r])return a[r];for(let[e,t]of Object.entries(a))if(r.includes(e)||e.includes(r))return t;return r.includes("GUARDIA")&&r.includes("CLINIC")?"CONSULTA DE GUARDIA CLINICA":r.includes("GUARDIA")&&r.includes("PEDIATRIC")?"CONSULTA DE GUARDIA PEDIATRICA":r.includes("GUARDIA")&&r.includes("GINECOLOGIC")?"CONSULTA DE GUARDIA GINECOLOGICA":r.includes("PEDIATRIC")&&r.includes("NEONATAL")?"CONSULTA PEDIATRICA Y NEONATAL":r.includes("INTERNADOS")?"CONSULTA EN INTERNADOS":r.includes("INTERCONSULTA")?"INTERCONSULTAS":r.includes("CARDIOLOGIC")?"CONSULTA CARDIOLOGICA":r.includes("GINECOLOGIC")&&!r.includes("GUARDIA")?"CONSULTA GINECOLOGICA":r.includes("ECG")||"E.C.G."===r?"E.C.G.":"CONSULTA"===r||r.includes("CONSULTA")&&!r.includes("GUARDIA")?"CONSULTA":r}(a);x.push({obra_social:String(t).trim(),tipo_consulta:r,valor:n,vigencia:l,mes:e,anio:d})}})}if(await s.supabase.from("valores_consultas_obra_social").delete().eq("mes",e).eq("anio",d),x.length>0){let{error:e}=await s.supabase.from("valores_consultas_obra_social").insert(x);if(e)throw e}await W(),R(!1),B("success",`Se importaron ${x.length} valores correctamente`,"Importaci√≥n exitosa")}catch(e){console.error("Error importando Excel:",e),B("error","Error al importar el archivo Excel: "+(e instanceof Error?e.message:"Error desconocido"),"Error de importaci√≥n")}finally{T(!1)}}async function J(){try{T(!0);let r=e-1,a=d;0===r&&(r=12,a=d-1);let{data:t,error:l}=await s.supabase.from("valores_consultas_obra_social").select("*").eq("mes",r).eq("anio",a);if(l)throw l;let o=t||[];if(0===o.length)return void B("warning","No hay valores en el mes anterior para copiar","Sin datos");await s.supabase.from("valores_consultas_obra_social").delete().eq("mes",e).eq("anio",d);let i=o.map(r=>({obra_social:r.obra_social,tipo_consulta:r.tipo_consulta,valor:F?Number((r.valor*(1+P/100)).toFixed(2)):r.valor,vigencia:r.vigencia,mes:e,anio:d})),{error:n}=await s.supabase.from("valores_consultas_obra_social").insert(i);if(n)throw n;await W(),B("success",`Se copiaron ${i.length} valores desde ${E[r-1].label} ${a}`,"Copia exitosa")}catch(e){console.error("Error copiando desde mes anterior:",e),B("error","Error al copiar valores: "+(e instanceof Error?e.message:"Error desconocido"),"Error")}finally{T(!1)}}async function Y(r){try{let{data:a}=await s.supabase.from("valores_consultas_obra_social").select("id").eq("obra_social",r.trim()).eq("mes",e).eq("anio",d).limit(1);if(a&&a.length>0)throw Error("Esta obra social ya existe para el mes y a√±o seleccionados");let t=I.map(a=>({obra_social:r.trim(),tipo_consulta:a,valor:0,vigencia:null,mes:e,anio:d})),{error:l}=await s.supabase.from("valores_consultas_obra_social").insert(t);if(l)throw l;await W(),B("success","Obra social agregada correctamente","√âxito")}catch(e){throw console.error("Error agregando obra social:",e),e}}async function H(r,a,t){try{let{error:l}=await s.supabase.from("valores_consultas_obra_social").update({valor:t}).eq("obra_social",r).eq("tipo_consulta",a).eq("mes",e).eq("anio",d);if(l)throw l;await W()}catch(e){throw console.error("Error actualizando valor:",e),e}}async function K(r){if(confirm(`\xbfEst\xe1 seguro de que desea eliminar la obra social "${r}" y todos sus valores para ${E[e-1]} ${d}?`))try{T(!0);let{error:a}=await s.supabase.from("valores_consultas_obra_social").delete().eq("obra_social",r).eq("mes",e).eq("anio",d);if(a)throw a;await W(),B("success",`Obra social "${r}" eliminada correctamente`,"Eliminaci√≥n exitosa")}catch(e){console.error("Error eliminando obra social:",e),B("error","Error al eliminar la obra social: "+(e instanceof Error?e.message:"Error desconocido"),"Error")}finally{T(!1)}}let X=k.map(e=>{let r={obra_social:e};return I.forEach(a=>{let t=m.find(r=>r.obra_social===e&&r.tipo_consulta===a);r[a]=t?.valor||0}),r});async function Q(){try{if(0===m.length)return void B("warning","No hay datos para exportar","Sin datos");!function({valores:e,mes:r,anio:a,obrasSociales:t,tiposConsulta:s}){let l=new A.default({orientation:"landscape",unit:"mm",format:"a4"}),o=20,i=(0,w.calcularNumeroLiquidacion)(r,a);l.setFontSize(11),l.setTextColor(34,197,94),l.setFont("helvetica","bold"),l.text("Grow Labs",36,o+7),l.setFontSize(7.5),l.setTextColor(100,100,100),l.setFont("helvetica","normal"),l.text("Sistema de Liquidaciones de Guardias",36,o+12);let n=o;l.setFillColor(240,240,240),l.setDrawColor(200,200,200),l.roundedRect(192,n,90,37.5,2,2,"FD");let c=n+3.75;l.setFontSize(8.5),l.setTextColor(0,0,0),l.setFont("helvetica","bold"),l.text("Mes:",196.5,c),l.setFont("helvetica","normal"),l.text(S[r-1],238.5,c),c+=7.5,l.setFont("helvetica","bold"),l.text("A√±o:",196.5,c),l.setFont("helvetica","normal"),l.text(String(a),238.5,c),c+=7.5,l.setFont("helvetica","bold"),l.text("Liq:",196.5,c),l.setFont("helvetica","normal"),l.text(String(i),238.5,c),c+=7.5,l.setFont("helvetica","bold"),l.text("Obras Sociales:",196.5,c),l.setFont("helvetica","normal"),l.text(String(t.length),238.5,c),c+=7.5,l.setFont("helvetica","bold"),l.text("Generado:",196.5,c),l.setFont("helvetica","normal");let d=new Date().toLocaleDateString("es-AR");l.text(d,238.5,c),o=n+37.5+8;let u=[];t.forEach(r=>{let a=[r];s.forEach(t=>{let s=e.find(e=>e.obra_social===r&&e.tipo_consulta===t);if(s){let e=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(s.valor);a.push(e)}else a.push("$ 0,00")}),u.push(a)});let x=["Obra Social",...s],m=s.length,h=Math.floor(207/m),b=[60,...Array(m).fill(h)],p=b.reduce((e,r)=>e+r,0);p<267&&(b[1]+=267-p),(0,j.default)(l,{startY:o,head:[x],body:u,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:[255,255,255],fontStyle:"bold",fontSize:8,halign:"left"},bodyStyles:{fontSize:7.5,textColor:[0,0,0],cellPadding:2,halign:"left"},columnStyles:{0:{cellWidth:b[0],fontStyle:"bold",halign:"left"},...Object.fromEntries(s.map((e,r)=>[r+1,{cellWidth:b[r+1],halign:"right",cellPadding:{right:3}}]))},styles:{lineColor:[220,220,220],lineWidth:.1,valign:"middle"},margin:{left:15,right:15},tableWidth:267,showHead:"everyPage",pageBreak:"auto",rowPageBreak:"avoid"});let g=l.getNumberOfPages();for(let e=1;e<=g;e++)l.setPage(e),l.setFontSize(7),l.setTextColor(150,150,150),l.setFont("helvetica","italic"),l.text(`P\xe1gina ${e} de ${g} - Powered by Grow Labs üå±`,148.5,200,{align:"center"});let f=`Valores_Consultas_${S[r-1]}_${a}.pdf`;l.save(f)}({valores:m,mes:e,anio:d,obrasSociales:k,tiposConsulta:I}),B("success","PDF generado correctamente","Exportaci√≥n exitosa")}catch(e){console.error("Error exportando PDF:",e),B("error","Error al generar el PDF: "+(e instanceof Error?e.message:"Error desconocido"),"Error")}}return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("h1",{className:"text-3xl font-bold text-green-400",children:"Valores de Consultas por Obra Social"})}),(0,r.jsx)("div",{className:"p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400",children:[(0,r.jsx)(h,{className:"h-5 w-5"}),(0,r.jsx)(b,{className:"h-4 w-4"})]}),(0,r.jsxs)("div",{className:"flex-1 text-sm text-gray-300 space-y-1",children:[(0,r.jsx)("p",{className:"font-semibold text-green-400 mb-2",children:"¬øC√≥mo funcionan los valores mensuales?"}),(0,r.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Primer mes:"}),' Importe el archivo Excel con los valores (bot√≥n "Importar Excel")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Meses siguientes:"}),' Use "Copiar desde mes anterior" o "Copiar con aumento %"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Hist√≥rico:"})," Cada mes mantiene sus propios valores para consultas hist√≥ricas"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Edici√≥n:"})," Puede editar valores haciendo clic en la celda"]})]})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-300",children:"Mes a gestionar:"}),(0,r.jsx)("select",{value:e,onChange:e=>c(Number(e.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white focus:border-green-400 focus:outline-none",children:E.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-300",children:"A√±o:"}),(0,r.jsx)("input",{type:"number",value:d,onChange:e=>u(Number(e.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white w-24 focus:border-green-400 focus:outline-none"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,r.jsxs)(n.Button,{onClick:()=>G(!0),className:"bg-green-600 hover:bg-green-500 text-white",disabled:D,children:[(0,r.jsx)(p.Plus,{className:"h-4 w-4 mr-2"}),"Crear Obra Social"]}),(0,r.jsxs)(n.Button,{onClick:()=>R(!U),variant:"outline",className:"border-purple-500/50 text-purple-400 hover:bg-purple-500/20",disabled:D,children:[(0,r.jsx)(N.Upload,{className:"h-4 w-4 mr-2"}),"Importar Excel"]}),(0,r.jsxs)(n.Button,{onClick:J,variant:"outline",className:`border-purple-500/50 text-purple-400 hover:bg-purple-500/20 ${!F?"bg-purple-500/20":""}`,disabled:D,children:[(0,r.jsx)(g,{className:"h-4 w-4 mr-2"}),"Copiar desde mes anterior"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.Button,{onClick:()=>{if(F)M(!1),z(0);else{let e=prompt("Ingrese el porcentaje de aumento:");e&&!isNaN(Number(e))&&(z(Number(e)),M(!0))}},variant:"outline",className:`border-purple-500/50 text-purple-400 hover:bg-purple-500/20 ${F?"bg-purple-500/20":""}`,disabled:D,children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{className:"h-4 w-4 mr-2"}),"‚úì Copiar con aumento %"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{className:"h-4 w-4 mr-2"}),"Copiar con aumento %"]})}),F&&(0,r.jsx)("input",{type:"number",value:P,onChange:e=>z(Number(e.target.value)),placeholder:"%",className:"px-2 py-1 bg-gray-800 border border-purple-500/50 rounded text-white w-20 focus:border-purple-400 focus:outline-none"})]}),(0,r.jsxs)(n.Button,{onClick:Q,variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",disabled:D||0===m.length,children:[(0,r.jsx)(y.FileDown,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]}),U&&(0,r.jsx)("div",{className:"p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:(0,r.jsx)(l.UploadExcel,{onUpload:V,isProcessing:D})}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["Obras sociales configuradas: ",(0,r.jsx)("span",{className:"text-green-400 font-semibold",children:k.length})]}),(0,r.jsx)("div",{className:"rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400 border-b border-green-500/30 sticky left-0 z-20",style:{minWidth:"200px",background:"rgba(34, 197, 94, 0.2)",backdropFilter:"blur(10px)"},children:"Obra Social"}),I.map(e=>(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400 bg-green-500/20 border-b border-green-500/30 whitespace-nowrap",style:{minWidth:"150px"},children:e},e)),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-green-400 border-b border-green-500/30 sticky right-0 z-20",style:{minWidth:"80px",background:"rgba(34, 197, 94, 0.2)",backdropFilter:"blur(10px)"},children:"Acciones"})]})}),(0,r.jsx)("tbody",{children:D?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:I.length+2,className:"px-4 py-8 text-center text-gray-400",children:"Cargando..."})}):0===X.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:I.length+2,className:"px-4 py-8 text-center text-gray-400",children:'No hay datos para el mes seleccionado. Use "Importar Excel" o "Copiar desde mes anterior" para comenzar.'})}):X.map((e,a)=>{let t=a%2==0;return(0,r.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 font-medium sticky left-0 z-10",style:{minWidth:"200px",background:t?"rgba(17, 24, 39, 0.95)":"rgba(17, 24, 39, 0.98)",backdropFilter:"blur(10px)"},children:e.obra_social}),I.map(a=>(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)(o.InlineEditCell,{value:e[a],type:"number",onSave:async r=>{await H(e.obra_social,a,Number(r))},isEditable:!0})},a)),(0,r.jsx)("td",{className:"px-4 py-3 text-center sticky right-0 z-10",style:{minWidth:"80px",background:t?"rgba(17, 24, 39, 0.95)":"rgba(17, 24, 39, 0.98)",backdropFilter:"blur(10px)"},children:(0,r.jsx)("button",{onClick:()=>K(e.obra_social),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",title:"Eliminar obra social",disabled:D,children:(0,r.jsx)(v.Trash2,{className:"h-4 w-4"})})})]},e.obra_social)})})]})})}),(0,r.jsx)(i.NotificationModal,{isOpen:q.isOpen,onClose:()=>{$(e=>({...e,isOpen:!1}))},type:q.type,title:q.title,message:q.message,duration:3e3*("success"===q.type)}),(0,r.jsx)(x,{isOpen:_,onClose:()=>G(!1),onSave:Y,mes:e,anio:d})]})})}e.s(["default",()=>O],4601)},44557,e=>{e.v(r=>Promise.all(["static/chunks/50947de1fb5100bc.js"].map(r=>e.l(r))).then(()=>r(25772)))},18454,e=>{e.v(r=>Promise.all(["static/chunks/46ea109e3f7ee3dc.js"].map(r=>e.l(r))).then(()=>r(32694)))},26753,e=>{e.v(r=>Promise.all(["static/chunks/7bd0dee9ec340940.js"].map(r=>e.l(r))).then(()=>r(90015)))}]);
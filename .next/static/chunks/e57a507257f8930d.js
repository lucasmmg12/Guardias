(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32600,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},37882,e=>{"use strict";let t=(0,e.i(71434).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],37882)},19029,e=>{"use strict";let t=(0,e.i(71434).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],19029)},34754,e=>{"use strict";let t=(0,e.i(71434).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],34754)},7987,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(97451);let s=r.forwardRef(({className:e,type:r,...s},l)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));s.displayName="Input",e.s(["Input",()=>s])},5097,e=>{"use strict";let t=(0,e.i(71434).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],5097)},23164,e=>{"use strict";let t=(0,e.i(71434).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],23164)},81377,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return o},searchParamsToUrlQuery:function(){return l},urlQueryToSearchParams:function(){return n}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});function l(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function n(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,i(e));else t.set(r,i(a));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},58393,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return n},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(5691)._(e.r(81377)),i=/https?|ftp|gopher|file/;function n(e){let{auth:t,hostname:r}=e,a=e.protocol||"",s=e.pathname||"",n=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(l.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||i.test(a))&&!1!==c?(c="//"+(c||""),s&&"/"!==s[0]&&(s="/"+s)):c||(c=""),n&&"#"!==n[0]&&(n="#"+n),d&&"?"!==d[0]&&(d="?"+d),s=s.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${s}${d}${n}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return n(e)}},17055,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=e.r(87312);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=l(e,a)),t&&(s.current=l(t,a))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},41519,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return y},NormalizeError:function(){return b},PageNotFoundError:function(){return v},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return l},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return p},loadGetInitialProps:function(){return x},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return w}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let n=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>n.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function x(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await x(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&p(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},63090,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return l}});let a=e.r(41519),s=e.r(32323);function l(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},60239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},44176,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return g},useLinkStatus:function(){return v}};for(var s in a)Object.defineProperty(r,s,{enumerable:!0,get:a[s]});let l=e.r(5691),i=e.r(9964),n=l._(e.r(87312)),o=e.r(58393),c=e.r(9175),d=e.r(17055),u=e.r(41519),p=e.r(66534);e.r(32600);let m=e.r(69234),x=e.r(63090),h=e.r(46573);function f(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var r;let a,s,l,[o,g]=(0,n.useOptimistic)(m.IDLE_LINK_STATUS),v=(0,n.useRef)(null),{href:y,as:j,children:w,prefetch:N=null,passHref:k,replace:C,shallow:E,scroll:_,onClick:P,onMouseEnter:S,onTouchStart:M,legacyBehavior:T=!1,onNavigate:O,ref:I,unstable_dynamicOnHover:A,...L}=t;a=w,T&&("string"==typeof a||"number"==typeof a)&&(a=(0,i.jsx)("a",{children:a}));let R=n.default.useContext(c.AppRouterContext),U=!1!==N,$=!1!==N?null===(r=N)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:F,as:D}=n.default.useMemo(()=>{let e=f(y);return{href:e,as:j?f(j):e}},[y,j]);if(T){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=n.default.Children.only(a)}let B=T?s&&"object"==typeof s&&s.ref:I,G=n.default.useCallback(e=>(null!==R&&(v.current=(0,m.mountLinkInstance)(e,F,R,$,U,g)),()=>{v.current&&((0,m.unmountLinkForCurrentNavigation)(v.current),v.current=null),(0,m.unmountPrefetchableInstance)(e)}),[U,F,R,$,g]),q={ref:(0,d.useMergedRef)(G,B),onClick(t){T||"function"!=typeof P||P(t),T&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!R||t.defaultPrevented||function(t,r,a,s,l,i,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,x.isLocalURL)(r)){l&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(19506);n.default.startTransition(()=>{u(a||r,l?"replace":"push",i??!0,s.current)})}}(t,F,D,v,C,_,O)},onMouseEnter(e){T||"function"!=typeof S||S(e),T&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),R&&U&&(0,m.onNavigationIntent)(e.currentTarget,!0===A)},onTouchStart:function(e){T||"function"!=typeof M||M(e),T&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),R&&U&&(0,m.onNavigationIntent)(e.currentTarget,!0===A)}};return(0,u.isAbsoluteUrl)(D)?q.href=D:T&&!k&&("a"!==s.type||"href"in s.props)||(q.href=(0,p.addBasePath)(D)),l=T?n.default.cloneElement(s,q):(0,i.jsx)("a",{...L,...q,children:a}),(0,i.jsx)(b.Provider,{value:o,children:l})}e.r(60239);let b=(0,n.createContext)(m.IDLE_LINK_STATUS),v=()=>(0,n.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},27214,e=>{"use strict";let t=(0,e.i(71434).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],27214)},99857,e=>{"use strict";let t=(0,e.i(71434).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],99857)},59784,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(74786),s=e.i(38431);function l(e){return e.toLowerCase().trim().replace(/\./g," ").replace(/\s+/g," ").replace(/[^\w\s]/g,"").trim()}function i(e,t,r){let a=Object.keys(e);for(let r of t)if(void 0!==e[r]&&null!==e[r]&&""!==String(e[r]).trim())return e[r];for(let r of t){let t=l(r),s=a.find(e=>l(e)===t);if(s&&void 0!==e[s]&&null!==e[s]&&""!==String(e[s]).trim())return e[s]}for(let r of t){let t=l(r).split(/\s+/).filter(e=>e.length>2&&"mat"!==e&&"prov"!==e),s=a.find(e=>{let r=l(e);return 0===t.length||t.every(e=>r.includes(e))});if(s&&void 0!==e[s]&&null!==e[s]&&""!==String(e[s]).trim())return e[s]}let s=a.filter(e=>{let t=l(e);return(t.includes("mat")||t.includes("matricula"))&&(t.includes("prov")||t.includes("provincial"))});if(s.length>0){let t=s[0];if(void 0!==e[t]&&null!==e[t]&&""!==String(e[t]).trim())return e[t]}return null}async function n(e){let t={medicos:[],errores:[],duplicados:0};try{let r=await e.arrayBuffer(),a=s.read(r,{type:"array"}),l=a.SheetNames[0];if(!l)throw Error("El archivo Excel no contiene hojas");let n=a.Sheets[l],o=s.utils.sheet_to_json(n,{defval:null,raw:!1});if(0===o.length)throw Error("El archivo Excel no contiene datos");let c=o.length>0?Object.keys(o[0]):[];if(0===c.length){let e=s.utils.decode_range(n["!ref"]||"A1");for(let t=0;t<=Math.min(e.e.c,20);t++){let e=n[s.utils.encode_cell({r:0,c:t})];e&&e.v&&c.push(String(e.v))}}for(let e=0;e<o.length;e++){let r=o[e],a=e+2;try{let s=i(r,["Nombre","nombre","NOMBRE"],c),l=i(r,["Mat. Provincial","Mat Provincial","Mat.Provincial","MatProvincial","Mat. provinc","Mat provinc","Mat. Provinc","Mat Provinc","Matricula Provincial","Matrícula Provincial","Matricula Prov","Matrícula Prov","Mat Prov","Mat. Prov","Matricula","Matrícula","Provincial"],c),n=i(r,["CUIT","cuit","Cuit"],c),o=i(r,["Especialidad","especialidad","ESPECIALIDAD"],c),d=i(r,["Grupo persona","Grupo Persona","Grupo de Persona","Grupo","grupo persona","GrupoPersona"],c),u=i(r,["Perfil","perfil","PERFIL"],c),p=i(r,["Activo","activo","ACTIVO","Estado","estado"],c);if(!s||""===String(s).trim()){t.errores.push(`Fila ${a}: El campo "Nombre" es requerido`);continue}if(!l&&!n){let e=2===a?` (Headers encontrados: ${c.join(", ")})`:"";t.errores.push(`Fila ${a}: Debe tener al menos "Mat. provinc" o "CUIT"${e}`);continue}if(!o||""===String(o).trim()){t.errores.push(`Fila ${a}: El campo "Especialidad" es requerido`);continue}let m=l?String(l).trim():null,x=n?String(n).trim().replace(/[^0-9]/g,"").substring(0,20):null,h=m?m.substring(0,50):(x||`TEMP-${Date.now()}-${e}`).substring(0,50),f=m?m.substring(0,50):null,g=String(s).trim().substring(0,255),b=String(o).trim().substring(0,200),v=d?String(d).trim().substring(0,100):null,y=u?String(u).trim().substring(0,100):null,j={nombre:g,matricula:h,matricula_provincial:f,cuit:x,grupo_persona:v,perfil:y,es_residente:function(e){if(!e)return!1;let t=String(e).toLowerCase();return t.includes("residente")||t.includes("resident")}(y),especialidad:b,activo:function(e){if("boolean"==typeof e)return e;if("string"==typeof e){let t=e.toLowerCase().trim();return"si"===t||"sí"===t||"yes"===t||"true"===t||"1"===t}return"number"==typeof e&&1===e}(p)};t.medicos.push(j)}catch(e){t.errores.push(`Fila ${a}: ${e.message||"Error desconocido"}`)}}return t}catch(e){if(e instanceof Error)throw e;throw Error("Error al leer el archivo Excel: "+String(e))}}var o=e.i(8674),c=e.i(83643),d=e.i(7987),u=e.i(68499);function p({medico:e,onClose:s,onSave:l}){let[i,n]=(0,r.useState)(!1),[o,p]=(0,r.useState)({nombre:"",matricula:"",matricula_provincial:"",cuit:"",grupo_persona:"",perfil:"",es_residente:!1,especialidad:"Pediatría",activo:!0});(0,r.useEffect)(()=>{e?p({nombre:e.nombre,matricula:e.matricula,matricula_provincial:e.matricula_provincial||"",cuit:e.cuit||"",grupo_persona:e.grupo_persona||"",perfil:e.perfil||"",es_residente:e.es_residente,especialidad:e.especialidad,activo:e.activo}):p({nombre:"",matricula:"",matricula_provincial:"",cuit:"",grupo_persona:"",perfil:"",es_residente:!1,especialidad:"Pediatría",activo:!0})},[e]);let m=async t=>{t.preventDefault(),n(!0);try{if(!o.nombre.trim())return void alert("El nombre es requerido");if(!o.matricula.trim()&&!o.matricula_provincial?.trim()&&!o.cuit?.trim())return void alert("Debe proporcionar al menos una matrícula o CUIT");if(o.matricula.trim()||(o.matricula=o.matricula_provincial?.trim()||o.cuit?.trim()||`TEMP-${Date.now()}`),o.perfil){let e=o.perfil.toLowerCase();o.es_residente=e.includes("residente")||e.includes("resident")}if(e){let t={nombre:o.nombre.trim(),matricula:o.matricula.trim(),matricula_provincial:o.matricula_provincial?.trim()||null,cuit:o.cuit?.trim()||null,grupo_persona:o.grupo_persona?.trim()||null,perfil:o.perfil?.trim()||null,es_residente:o.es_residente,especialidad:o.especialidad,activo:o.activo},{error:r}=await a.supabase.from("medicos").update(t).eq("id",e.id);if(r)throw r}else{let{error:e}=await a.supabase.from("medicos").insert([o]);if(e)throw e}l()}catch(e){console.error("Error saving médico:",e),alert(e.message||"Error al guardar el médico")}finally{n(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:s,children:(0,t.jsxs)("div",{className:"relative rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:e?"Editar Médico":"Agregar Médico"}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t.jsx)(u.X,{className:"h-5 w-5"})})]}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Nombre Completo *"}),(0,t.jsx)(d.Input,{type:"text",value:o.nombre,onChange:e=>p({...o,nombre:e.target.value}),required:!0,className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: GONZALEZ, JUAN CARLOS"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Matrícula Provincial"}),(0,t.jsx)(d.Input,{type:"text",value:o.matricula_provincial||"",onChange:e=>p({...o,matricula_provincial:e.target.value}),className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: 3540"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"CUIT"}),(0,t.jsx)(d.Input,{type:"text",value:o.cuit||"",onChange:e=>p({...o,cuit:e.target.value}),className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: 20259398909"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Matrícula (si no tiene provincial, usar CUIT) *"}),(0,t.jsx)(d.Input,{type:"text",value:o.matricula,onChange:e=>p({...o,matricula:e.target.value}),required:!0,className:"bg-black/30 border-gray-600 text-white",placeholder:"Se usará matrícula provincial o CUIT si está vacío"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Especialidad *"}),(0,t.jsxs)("select",{value:o.especialidad,onChange:e=>p({...o,especialidad:e.target.value}),required:!0,className:"w-full px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white",children:[(0,t.jsx)("option",{value:"Pediatría",children:"Pediatría"}),(0,t.jsx)("option",{value:"Ginecología",children:"Ginecología"}),(0,t.jsx)("option",{value:"Obstetricia",children:"Obstetricia"}),(0,t.jsx)("option",{value:"Cirugía",children:"Cirugía"}),(0,t.jsx)("option",{value:"Clínica",children:"Clínica"}),(0,t.jsx)("option",{value:"ECOGRAFISTA",children:"ECOGRAFISTA"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Grupo Persona"}),(0,t.jsx)(d.Input,{type:"text",value:o.grupo_persona||"",onChange:e=>p({...o,grupo_persona:e.target.value}),className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: Médico"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Perfil"}),(0,t.jsx)(d.Input,{type:"text",value:o.perfil||"",onChange:e=>{let t=e.target.value;p({...o,perfil:t,es_residente:t.toLowerCase().includes("residente")||t.toLowerCase().includes("resident")})},className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: DOCTOR, RESIDENTE"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Estado"}),(0,t.jsxs)("select",{value:o.activo?"activo":"inactivo",onChange:e=>p({...o,activo:"activo"===e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white",children:[(0,t.jsx)("option",{value:"activo",children:"Activo"}),(0,t.jsx)("option",{value:"inactivo",children:"Inactivo"})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.es_residente,onChange:e=>p({...o,es_residente:e.target.checked}),className:"w-4 h-4 rounded bg-black/30 border-gray-600 text-green-500"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-green-300",children:"Es Residente (aplica horario formativo)"})]})}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(c.Button,{type:"button",onClick:s,variant:"outline",className:"border-gray-600 text-gray-300",children:"Cancelar"}),(0,t.jsx)(c.Button,{type:"submit",disabled:i,className:"bg-green-600 hover:bg-green-500 text-white",children:i?"Guardando...":e?"Actualizar":"Guardar"})]})]})]})})}var m=e.i(97451),x=e.i(37882),h=e.i(23164),f=e.i(60661),g=e.i(71434);let b=(0,g.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),v=(0,g.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var y=e.i(5097),j=e.i(19029),w=e.i(58427),N=e.i(27214),k=e.i(99857),C=e.i(34754),E=e.i(44176),_=e.i(7735);function P(){let e=(0,_.useRouter)(),[l,i]=(0,r.useState)([]),[u,g]=(0,r.useState)(!0),[P,S]=(0,r.useState)(""),[M,T]=(0,r.useState)("all"),[O,I]=(0,r.useState)("all"),[A,L]=(0,r.useState)(!1),[R,U]=(0,r.useState)(!1),[$,F]=(0,r.useState)(null),[D,B]=(0,r.useState)(!1),[G,q]=(0,r.useState)(null),[z,K]=(0,r.useState)(!1);async function V(){try{g(!0);let e=a.supabase.from("medicos").select("*").order("nombre",{ascending:!0});"all"!==M&&(e=e.eq("especialidad",M)),"all"!==O&&(e=e.eq("activo","activo"===O));let{data:t,error:r}=await e;if(r)throw r;i(t||[])}catch(e){console.error("Error loading médicos:",e)}finally{g(!1)}}(0,r.useEffect)(()=>{V()},[]),(0,r.useEffect)(()=>{V()},[M,O]);let H=async e=>{if(confirm("¿Está seguro de que desea eliminar este médico?"))try{let{error:t}=await a.supabase.from("medicos").delete().eq("id",e);if(t)throw t;V()}catch(e){console.error("Error deleting médico:",e),alert("Error al eliminar el médico")}},W=async e=>{try{let{error:t}=await a.supabase.from("medicos").update({activo:!e.activo}).eq("id",e.id);if(t)throw t;V()}catch(e){console.error("Error updating médico:",e),alert("Error al actualizar el médico")}},X=async e=>{K(!0),q(null);try{let t=await n(e),{data:r}=await a.supabase.from("medicos").select("matricula, cuit"),s=new Set(r?.map(e=>e.matricula)||[]),l=new Set(r?.map(e=>e.cuit).filter(Boolean)||[]),i=[],o=0;for(let e of t.medicos)s.has(e.matricula)||e.cuit&&l.has(e.cuit)?o++:(i.push(e),e.matricula&&s.add(e.matricula),e.cuit&&l.add(e.cuit));if(i.length>0){let{error:e}=await a.supabase.from("medicos").insert(i);if(e)throw e}q({total:t.medicos.length,insertados:i.length,duplicados:o+t.duplicados,errores:t.errores}),V()}catch(e){q({error:e.message||"Error al importar médicos"})}finally{K(!1)}},Z=(0,r.useMemo)(()=>l.filter(e=>{if(A&&!e.es_residente)return!1;if(P){let t=P.toLowerCase();if(!(e.nombre.toLowerCase().includes(t)||e.matricula?.toLowerCase().includes(t)||e.matricula_provincial?.toLowerCase().includes(t)||e.cuit?.toLowerCase().includes(t)||e.especialidad.toLowerCase().includes(t)))return!1}return!0}),[l,A,P]),J=(0,r.useMemo)(()=>Array.from(new Set(l.map(e=>e.especialidad))).sort(),[l]),Q=(0,r.useCallback)(()=>{L(e=>!e)},[]);return(0,t.jsxs)("div",{className:"min-h-screen relative p-8 pb-20 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-20 left-20 w-96 h-96 bg-green-500/20 rounded-full blur-3xl animate-pulse"}),(0,t.jsx)("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-green-400/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8 relative z-10",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(c.Button,{onClick:()=>e.push("/"),variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(C.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Volver"]}),(0,t.jsx)(E.default,{href:"/",className:"hover:opacity-80 transition-opacity",children:(0,t.jsx)("img",{src:"/logogrow.png",alt:"Grow Labs",className:"h-16 w-auto drop-shadow-2xl",style:{filter:"drop-shadow(0 0 20px rgba(34, 197, 94, 0.5))"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2 tracking-tight",children:(0,t.jsx)("span",{className:"bg-gradient-to-r from-green-400 to-emerald-300 bg-clip-text text-transparent",children:"Administración de Médicos"})}),(0,t.jsxs)("p",{className:"text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(N.Sparkles,{className:"h-4 w-4 text-green-400"}),"Gestión de prestadores para Pediatría y Ginecología"]})]})]})}),(0,t.jsx)("div",{className:"p-4 sm:p-6 rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.2)"},children:(0,t.jsxs)("div",{className:"flex flex-col xl:flex-row gap-4 items-stretch xl:items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"relative flex-1 sm:max-w-md",children:[(0,t.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 flex items-center pointer-events-none z-10",children:(0,t.jsx)(b,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)(d.Input,{type:"text",placeholder:"Todas las especialidades",value:P,onChange:e=>S(e.target.value),className:"pl-10 w-full bg-black/30 border-gray-600 text-white placeholder-gray-400 h-10"})]}),(0,t.jsxs)("select",{value:M,onChange:e=>T(e.target.value),className:"px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white text-sm h-10 sm:min-w-[180px] w-full sm:w-auto",children:[(0,t.jsx)("option",{value:"all",children:"Todas las especialidades"}),J.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{value:O,onChange:e=>I(e.target.value),className:"px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white text-sm h-10 sm:min-w-[120px] w-full sm:w-auto",children:[(0,t.jsx)("option",{value:"all",children:"Todos"}),(0,t.jsx)("option",{value:"activo",children:"Activos"}),(0,t.jsx)("option",{value:"inactivo",children:"Inactivos"})]}),(0,t.jsxs)("button",{onClick:Q,className:(0,m.cn)("px-4 py-2 rounded-lg border text-sm h-10 whitespace-nowrap transition-all duration-200 flex items-center gap-2",A?"bg-blue-600/30 border-blue-500 text-blue-400 hover:bg-blue-600/40":"bg-black/30 border-gray-600 text-gray-300 hover:bg-black/40 hover:border-gray-500"),title:A?"Mostrar todos los médicos":"Mostrar solo residentes",children:[(0,t.jsx)(k.Users,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:A?"Solo Residentes":"Todos"}),(0,t.jsx)("span",{className:"sm:hidden",children:A?"Residentes":"Todos"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 shrink-0 w-full sm:w-auto",children:[(0,t.jsxs)(c.Button,{onClick:()=>U(!0),className:"bg-green-600 hover:bg-green-500 text-white h-10 whitespace-nowrap w-full sm:w-auto",children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4 mr-2"}),"Agregar Médico"]}),(0,t.jsxs)(c.Button,{onClick:()=>B(!0),variant:"outline",className:"border-green-500 text-green-400 hover:bg-green-500/20 h-10 whitespace-nowrap w-full sm:w-auto",children:[(0,t.jsx)(f.Upload,{className:"h-4 w-4 mr-2"}),"Importar Excel"]}),(0,t.jsxs)(c.Button,{onClick:()=>{let e,t,r,a=(e=l.map(e=>({Nombre:e.nombre||"","Mat. provinc":e.matricula_provincial||e.matricula||"",CUIT:e.cuit||"",Especialidad:e.especialidad||"","Grupo persona":e.grupo_persona||"",Perfil:e.perfil||"",Activo:e.activo?"Si":"No"})),t=s.utils.json_to_sheet(e),r=s.utils.book_new(),s.utils.book_append_sheet(r,t,"Médicos"),new Blob([s.write(r,{type:"array",bookType:"xlsx",cellStyles:!0})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),i=window.URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download=`medicos_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)},variant:"outline",className:"border-green-500 text-green-400 hover:bg-green-500/20 h-10 whitespace-nowrap w-full sm:w-auto",disabled:0===l.length,children:[(0,t.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Exportar Excel"]})]})]})}),(0,t.jsx)("div",{className:"rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:u?(0,t.jsx)("div",{className:"p-12 text-center text-gray-400",children:"Cargando médicos..."}):0===Z.length?(0,t.jsx)("div",{className:"p-12 text-center text-gray-400",children:"No se encontraron médicos"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse text-sm table-fixed",children:[(0,t.jsxs)("colgroup",{children:[(0,t.jsx)("col",{className:"w-[20%]"}),(0,t.jsx)("col",{className:"w-[10%]"}),(0,t.jsx)("col",{className:"w-[10%]"}),(0,t.jsx)("col",{className:"w-[20%]"}),(0,t.jsx)("col",{className:"w-[10%]"}),(0,t.jsx)("col",{className:"w-[10%]"}),(0,t.jsx)("col",{className:"w-[6%]"}),(0,t.jsx)("col",{className:"w-[7%]"}),(0,t.jsx)("col",{className:"w-[7%]"})]}),(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-white/10 bg-white/5",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Nombre"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Mat. Provinc"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"CUIT"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Especialidad"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Grupo Persona"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Perfil"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Residente"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Estado"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:Z.map(e=>(0,t.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-gray-300 break-words",children:e.nombre}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400 font-mono text-xs break-words",children:e.matricula_provincial||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400 font-mono text-xs break-words",children:e.cuit||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-300 break-words",style:{wordBreak:"break-word",maxWidth:"200px"},children:e.especialidad}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400 break-words",children:e.grupo_persona||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400 break-words",children:e.perfil||"-"}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.es_residente?(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded whitespace-nowrap",children:"Sí"}):(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs rounded whitespace-nowrap",children:"No"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("button",{onClick:()=>W(e),className:`px-2 py-1 text-xs rounded transition-colors whitespace-nowrap ${e.activo?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:e.activo?"Activo":"Inactivo"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{F(e),U(!0)},className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Editar",children:(0,t.jsx)(v,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>H(e.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded transition-colors",title:"Eliminar",children:(0,t.jsx)(y.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["Total de médicos: ",(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:Z.length})," • ","Activos: ",(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:Z.filter(e=>e.activo).length}),A&&(0,t.jsxs)(t.Fragment,{children:[" • ","Residentes: ",(0,t.jsx)("span",{className:"text-blue-400 font-semibold",children:Z.filter(e=>e.es_residente).length})]})]})]}),R&&(0,t.jsx)(p,{medico:$,onClose:()=>{U(!1),F(null)},onSave:()=>{V(),U(!1),F(null)}}),D&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:()=>!z&&B(!1),children:(0,t.jsxs)("div",{className:"relative rounded-2xl p-8 max-w-2xl w-full",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-6",children:"Importar Médicos desde Excel"}),(0,t.jsx)(o.UploadExcel,{onUpload:X,isProcessing:z}),G&&(0,t.jsx)("div",{className:"mt-6",children:G.error?(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-start gap-3 text-red-400",children:[(0,t.jsx)(w.AlertCircle,{className:"w-5 h-5 mt-0.5 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Error de Importación"}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:G.error})]})]}):(0,t.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(j.CheckCircle2,{className:"w-6 h-6 text-green-400"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-400",children:"Importación Completada"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Total"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:G.total})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Insertados"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-400",children:G.insertados})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Duplicados"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:G.duplicados})]})]}),G.errores&&G.errores.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-red-400 mb-2",children:"Errores:"}),(0,t.jsx)("ul",{className:"text-sm text-red-300/80 space-y-1 max-h-32 overflow-y-auto bg-black/20 p-2 rounded",children:G.errores.map((e,r)=>(0,t.jsxs)("li",{children:["• ",e]},r))})]})]})}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)(c.Button,{onClick:()=>{B(!1),q(null)},variant:"outline",className:"border-gray-600 text-gray-300",children:"Cerrar"})})]})})]})}e.s(["default",()=>P],59784)}]);
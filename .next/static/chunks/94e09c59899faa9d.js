(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32600,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},23229,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(71375),l=e.i(68499),s=e.i(58427);let n=(0,e.i(71434).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var i=e.i(60554),o=e.i(83643);function c({isOpen:e,onClose:c,title:d,message:u,type:f="info",duration:h=0}){return((0,r.useEffect)(()=>{if(e&&h>0){let e=setTimeout(()=>{c()},h);return()=>clearTimeout(e)}},[e,h,c]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"},onClick:c,children:(0,t.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl p-6 shadow-2xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:`1px solid ${(()=>{switch(f){case"success":return"border-green-500/50";case"error":return"border-red-500/50";case"warning":return"border-yellow-500/50";default:return"border-blue-500/50"}})().replace("/50","/30")}`,boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)",animation:"fadeIn 0.2s ease-in-out"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:c,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-white/10 transition-colors text-gray-400 hover:text-white",children:(0,t.jsx)(l.X,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-1",children:(()=>{switch(f){case"success":return(0,t.jsx)(a.CheckCircle,{className:"h-6 w-6 text-green-400"});case"error":return(0,t.jsx)(s.AlertCircle,{className:"h-6 w-6 text-red-400"});case"warning":return(0,t.jsx)(i.AlertTriangle,{className:"h-6 w-6 text-yellow-400"});default:return(0,t.jsx)(n,{className:"h-6 w-6 text-blue-400"})}})()}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[d&&(0,t.jsx)("h3",{className:`text-lg font-semibold ${(()=>{switch(f){case"success":return"text-green-400";case"error":return"text-red-400";case"warning":return"text-yellow-400";default:return"text-blue-400"}})()}`,children:d}),(0,t.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:u})]})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)(o.Button,{onClick:c,className:`${"success"===f?"bg-green-600 hover:bg-green-500":"error"===f?"bg-red-600 hover:bg-red-500":"warning"===f?"bg-yellow-600 hover:bg-yellow-500":"bg-blue-600 hover:bg-blue-500"} text-white`,children:"Aceptar"})})]})}):null}e.s(["NotificationModal",()=>c],23229)},27214,e=>{"use strict";let t=(0,e.i(71434).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);e.s(["Sparkles",()=>t],27214)},8674,60661,71375,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(71434);let l=(0,a.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>l],60661);var s=e.i(47188),n=e.i(68499);let i=(0,a.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>i],71375);var o=e.i(58427),c=e.i(97451),d=e.i(83643);function u({onUpload:e,isProcessing:a=!1}){let[u,f]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),g=(0,r.useCallback)(e=>{e.preventDefault(),f(!0)},[]),b=(0,r.useCallback)(e=>{e.preventDefault(),f(!1)},[]),y=(0,r.useCallback)(e=>{e.preventDefault(),f(!1),x(null),j(e.dataTransfer.files[0])},[]),v=(0,r.useCallback)(e=>{x(null);let t=e.target.files?.[0];t&&j(t)},[]),j=e=>{["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(e.type)||e.name.endsWith(".xlsx")||e.name.endsWith(".xls")?e.size>0xa00000?x("El archivo es demasiado grande (m√°x 10MB)"):m(e):x("Formato no v√°lido. Por favor sube un archivo Excel (.xlsx, .xls)")},N=async()=>{h&&(x(null),setTimeout(async()=>{try{await e(h)}catch(e){x("Error al procesar el archivo")}},0))},w=()=>{m(null),x(null)};return(0,t.jsx)("div",{className:"w-full",children:h?(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-green-500/20 text-green-400 rounded-lg",children:(0,t.jsx)(s.FileSpreadsheet,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-gray-200",children:h.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:[(h.size/1024).toFixed(1)," KB"]})]})]}),!a&&(0,t.jsx)("button",{onClick:w,className:"p-2 hover:bg-white/10 rounded-full text-gray-400 hover:text-red-400 transition-colors",children:(0,t.jsx)(n.X,{className:"w-5 h-5"})})]}),p&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-400 bg-red-400/10 p-3 rounded-lg mb-4 text-sm",children:[(0,t.jsx)(o.AlertCircle,{className:"w-4 h-4"}),p]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(d.Button,{variant:"outline",onClick:w,disabled:a,className:"border-gray-600 text-gray-300 hover:bg-white/5 hover:text-white",children:"Cancelar"}),(0,t.jsx)(d.Button,{onClick:N,disabled:a,className:"bg-green-600 hover:bg-green-500 text-white min-w-[140px]",children:a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando..."]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i,{className:"w-4 h-4"}),"Procesar"]})})]})]}):(0,t.jsxs)("div",{onDragOver:g,onDragLeave:b,onDrop:y,className:(0,c.cn)("border-2 border-dashed rounded-xl p-12 text-center transition-all duration-200 cursor-pointer",u?"border-green-400 bg-green-400/10 scale-[1.02]":"border-gray-700 hover:border-green-500/50 hover:bg-white/5"),children:[(0,t.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:v,className:"hidden",id:"excel-upload"}),(0,t.jsx)("label",{htmlFor:"excel-upload",className:"cursor-pointer w-full h-full block",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:(0,c.cn)("p-4 rounded-full transition-colors",u?"bg-green-400/20 text-green-400":"bg-gray-800 text-gray-400"),children:(0,t.jsx)(l,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-200",children:"Sube tu archivo Excel"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Arrastra y suelta o haz clic para seleccionar"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 bg-gray-800/50 px-3 py-1 rounded-full",children:"Soporta .xlsx y .xls hasta 10MB"})]})})]})})}e.s(["UploadExcel",()=>u],8674)},81377,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return o},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return i}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});function s(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,n(e));else t.set(r,n(a));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},58393,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return i},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=e.r(5691)._(e.r(81377)),n=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,a=e.protocol||"",l=e.pathname||"",i=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(s.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||n.test(a))&&!1!==c?(c="//"+(c||""),l&&"/"!==l[0]&&(l="/"+l)):c||(c=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),l=l.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${l}${d}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return i(e)}},17055,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return l}});let a=e.r(87312);function l(e,t){let r=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=s(e,a)),t&&(l.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},41519,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return v},NormalizeError:function(){return b},PageNotFoundError:function(){return y},SP:function(){return p},ST:function(){return x},WEB_VITALS:function(){return s},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return f},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return N}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&f(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="undefined"!=typeof performance,x=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},63090,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return s}});let a=e.r(41519),l=e.r(32323);function s(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,l.hasBasePath)(r.pathname)}catch(e){return!1}}},60239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},44176,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return g},useLinkStatus:function(){return y}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=e.r(5691),n=e.r(9964),i=s._(e.r(87312)),o=e.r(58393),c=e.r(9175),d=e.r(17055),u=e.r(41519),f=e.r(66534);e.r(32600);let h=e.r(69234),m=e.r(63090),p=e.r(46573);function x(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var r;let a,l,s,[o,g]=(0,i.useOptimistic)(h.IDLE_LINK_STATUS),y=(0,i.useRef)(null),{href:v,as:j,children:N,prefetch:w=null,passHref:E,replace:S,shallow:$,scroll:C,onClick:_,onMouseEnter:O,onTouchStart:k,legacyBehavior:M=!1,onNavigate:P,ref:A,unstable_dynamicOnHover:R,...F}=t;a=N,M&&("string"==typeof a||"number"==typeof a)&&(a=(0,n.jsx)("a",{children:a}));let I=i.default.useContext(c.AppRouterContext),L=!1!==w,T=!1!==w?null===(r=w)||"auto"===r?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:D,as:q}=i.default.useMemo(()=>{let e=x(v);return{href:e,as:j?x(j):e}},[v,j]);if(M){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});l=i.default.Children.only(a)}let z=M?l&&"object"==typeof l&&l.ref:A,U=i.default.useCallback(e=>(null!==I&&(y.current=(0,h.mountLinkInstance)(e,D,I,T,L,g)),()=>{y.current&&((0,h.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,h.unmountPrefetchableInstance)(e)}),[L,D,I,T,g]),B={ref:(0,d.useMergedRef)(U,z),onClick(t){M||"function"!=typeof _||_(t),M&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(t),!I||t.defaultPrevented||function(t,r,a,l,s,n,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){s&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(19506);i.default.startTransition(()=>{u(a||r,s?"replace":"push",n??!0,l.current)})}}(t,D,q,y,S,C,P)},onMouseEnter(e){M||"function"!=typeof O||O(e),M&&l.props&&"function"==typeof l.props.onMouseEnter&&l.props.onMouseEnter(e),I&&L&&(0,h.onNavigationIntent)(e.currentTarget,!0===R)},onTouchStart:function(e){M||"function"!=typeof k||k(e),M&&l.props&&"function"==typeof l.props.onTouchStart&&l.props.onTouchStart(e),I&&L&&(0,h.onNavigationIntent)(e.currentTarget,!0===R)}};return(0,u.isAbsoluteUrl)(q)?B.href=q:M&&!E&&("a"!==l.type||"href"in l.props)||(B.href=(0,f.addBasePath)(q)),s=M?i.default.cloneElement(l,B):(0,n.jsx)("a",{...F,...B,children:a}),(0,n.jsx)(b.Provider,{value:o,children:s})}e.r(60239);let b=(0,i.createContext)(h.IDLE_LINK_STATUS),y=()=>(0,i.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},34754,e=>{"use strict";let t=(0,e.i(71434).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],34754)},60554,e=>{"use strict";let t=(0,e.i(71434).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],60554)},28661,e=>{"use strict";var t=e.i(38431);async function r(e){try{let r=await e.arrayBuffer(),a=t.read(r,{type:"array"}),l=a.SheetNames[0];if(!l)throw Error("El archivo Excel no contiene hojas");let s=a.Sheets[l],n=t.utils.decode_range(s["!ref"]||"A1"),i=[];for(let e=0;e<=Math.min(n.e.c,50);e++){let r=s[t.utils.encode_cell({r:1,c:e})];i.push(r?r.v:null)}let o=function(e){if(!e||0===e.length)return null;let t=e.map(e=>String(e||"")).join(" "),r=t.match(/Desde fecha:\s*(\d{1,2}\/\d{1,2}\/\d{4})/i),a=t.match(/Hasta fecha:\s*(\d{1,2}\/\d{1,2}\/\d{4})/i);return r&&a?{desde:r[1],hasta:a[1]}:null}(i),c=[],d=Math.min(n.e.c+1,50),u=-1;for(let e=0;e<d;e++){let r=s[t.utils.encode_cell({r:9,c:e})];if(r&&null!==r.v&&void 0!==r.v){let t=String(r.v).trim();""!==t&&(u=e)}}if(-1===u)throw Error("No se encontraron headers en la fila 10");for(let e=0;e<=u;e++){let r=s[t.utils.encode_cell({r:9,c:e})];if(r&&null!==r.v&&void 0!==r.v){let t=String(r.v).trim();c.push({name:t||`Columna ${e+1}`,colIndex:e})}else c.push({name:`Columna ${e+1}`,colIndex:e})}let f=c.map(e=>e.name).filter(e=>!e.startsWith("Columna")),h=[];for(let e=10;e<=n.e.r;e++){let r={},a=!1;c.forEach(l=>{let n=s[t.utils.encode_cell({r:e,c:l.colIndex})];if(n&&null!==n.v&&void 0!==n.v){let e=n.v;if(l.name.toLowerCase().includes("duraci√≥n")||l.name.toLowerCase().includes("duracion")){if("number"==typeof e)e=Math.round(e);else if("string"==typeof e){let t=parseFloat(e.replace(",","."));e=isNaN(t)?e:Math.round(t)}}else if("d"===n.t&&e instanceof Date){let t=e.getDate(),r=e.getMonth()+1,a=e.getFullYear();e=`${t}/${r}/${a}`}else if("n"===n.t&&"number"==typeof e&&e>1&&e<1e5)try{let r=t.SSF.parse_date_code(e);r&&(e=`${r.d}/${r.m}/${r.y}`)}catch{}l.name.startsWith("Columna")||(r[l.name]=e,a=!0)}else l.name.startsWith("Columna")||(r[l.name]=null)}),a&&h.push(r)}return{periodo:o,headers:f,rows:h}}catch(e){if(e instanceof Error)throw e;throw Error("Error al leer el archivo Excel: "+String(e))}}e.s(["readExcelFile",()=>r])},74841,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(7735),l=e.i(8674),s=e.i(83643),n=e.i(68499);let i=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];function o({isOpen:e,onClose:a,onConfirm:l,mesDetectado:o,anioDetectado:c,mesActual:d,anioActual:u}){let[f,h]=(0,r.useState)(o||d),[m,p]=(0,r.useState)(c||u);return((0,r.useEffect)(()=>{e&&(h(o||d),p(c||u))},[e,o,c,d,u]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a}),(0,t.jsxs)("div",{className:"relative z-10 w-full max-w-md mx-4 rounded-2xl p-6",style:{background:"rgba(17, 24, 39, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:"Seleccionar Per√≠odo"}),(0,t.jsx)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)(n.X,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[o&&c&&(0,t.jsxs)("div",{className:"p-4 rounded-lg",style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsx)("p",{className:"text-sm text-green-400 mb-2",children:"‚úì Mes detectado autom√°ticamente"}),(0,t.jsxs)("p",{className:"text-sm text-gray-300",children:[i[o-1].label," ",c]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Mes"}),(0,t.jsx)("select",{value:f,onChange:e=>h(Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white focus:border-green-400 focus:outline-none",children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"A√±o"}),(0,t.jsx)("input",{type:"number",value:m,onChange:e=>p(Number(e.target.value)),min:2020,max:2100,className:"w-full px-4 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white focus:border-green-400 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(s.Button,{onClick:a,variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancelar"}),(0,t.jsx)(s.Button,{onClick:()=>{l(f,m),a()},className:"flex-1 bg-green-600 hover:bg-green-500 text-white",children:"Confirmar"})]})]})]})]}):null}var c=e.i(23229),d=e.i(28661),u=e.i(74786),f=e.i(97451);function h(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function m(e,t){let r=Object.keys(e);if(0===r.length)return null;for(let a of t)for(let t of r)if(t.toLowerCase().trim()===a.toLowerCase().trim()){let r=e[t];if(null!=r){if("string"==typeof r&&""!==r.trim())return r.trim();if("string"!=typeof r)return r}}let a=t.map(h);for(let t of r){let r=h(t);if(a.includes(r)){let r=e[t];if(null!=r){if("string"==typeof r&&""!==r.trim())return r.trim();if("string"!=typeof r)return r}}}for(let a of t){let t=h(a).split(/\s+/).filter(e=>e.length>2);if(0!==t.length)for(let a of r){let r=h(a);if(t.every(e=>r.includes(e))){let t=e[a];if(null!=t){if("string"==typeof t&&""!==t.trim())return t.trim();if("string"!=typeof t)return t}}}}return null}function p(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim()}async function x(e,t,r,a){let l={liquidacionId:"",totalFilas:0,procesadas:0,errores:[],advertencias:[],filasExcluidas:[]};try{let s,{data:n,error:i}=await u.supabase.from("medicos").select("*");if(i)return l.errores.push(`Error cargando m\xe9dicos: ${i.message}`),l;let o=n||[];console.log(`[Ginecolog\xeda] M\xe9dicos cargados: ${o.length}`),console.log(`[Ginecolog\xeda] Residentes: ${o.filter(e=>null===e.matricula_provincial).length}`),console.log(`[Ginecolog\xeda] No residentes: ${o.filter(e=>null!==e.matricula_provincial).length}`),console.log(`[Ginecolog\xeda] Nombres de m\xe9dicos:`,o.map(e=>`${e.nombre} (${null===e.matricula_provincial?"RESIDENTE":"NO RESIDENTE"})`).slice(0,10));let{data:c}=await u.supabase.from("valores_consultas_obra_social").select("*").eq("tipo_consulta","CONSULTA GINECOLOGICA").eq("mes",t).eq("anio",r),d=new Map;(c||[]).forEach(e=>{d.set(e.obra_social,e.valor)});let h=(0,f.calcularNumeroLiquidacion)(t,r),{data:x}=await u.supabase.from("liquidaciones_guardia").select("id").eq("especialidad","Ginecolog√≠a").eq("mes",t).eq("anio",r).single();if(x&&x.id)s=x.id,await u.supabase.from("detalle_guardia").delete().eq("liquidacion_id",s);else{let{data:e,error:n}=await u.supabase.from("liquidaciones_guardia").insert({mes:t,anio:r,especialidad:"Ginecolog√≠a",estado:"borrador",total_consultas:0,total_bruto:0,total_retenciones:0,total_adicionales:0,total_neto:0,archivo_nombre:a,numero_liquidacion:h}).select("id").single();if(n)return l.errores.push(`Error creando liquidaci\xf3n: ${n.message||"Error desconocido"}. Detalles: ${JSON.stringify(n)}`),console.error("Error creando liquidaci√≥n:",n),l;if(!e||!e.id)return l.errores.push(`Error: No se pudo crear la liquidaci\xf3n. Respuesta: ${JSON.stringify(e)}`),console.error("Liquidaci√≥n no creada:",e),l;s=e.id}l.liquidacionId=s;let g=new Set,b=new Map;for(let t of(console.log(`Extrayendo nombres \xfanicos de ${e.rows.length} filas del Excel`),e.rows)){let e=m(t,["Responsable","responsable","RESPONSABLE","M√©dico","medico","MEDICO","Medico","Profesional","profesional","PROFESIONAL","M√©dico responsable","M√©dico Responsable","Medico Responsable","M√âDICO RESPONSABLE"]);if(e&&"string"==typeof e&&""!==e.trim()){let t=p(e.trim());""!==t&&(g.add(t),b.has(t)||b.set(t,e.trim()))}}console.log(`[Mapeo] Nombres \xfanicos encontrados en Excel: ${g.size}`),console.log(`[Mapeo] Nombres \xfanicos:`,Array.from(g).slice(0,10));let y=new Map;for(let e of g){let t=function(e,t){if(!e||"string"!=typeof e)return null;let r=e.trim();if(""===r)return null;for(let e of t)if(e.nombre.trim()===r)return e;let a=p(e);if(""===a)return null;for(let e of t)if(p(e.nombre)===a)return e;let l=a.split(",").map(e=>e.trim()),s=a.split(/\s+/).filter(e=>e.length>2);for(let e of t){let t=p(e.nombre);t.split(",").map(e=>e.trim());let r=t.split(/\s+/).filter(e=>e.length>2);if(s.length>0&&r.length>0){let t=new Set(s),a=new Set(r);if(t.size===a.size&&Array.from(t).every(e=>a.has(e)))return e}}let n=l.length>1?l[0].trim():s.length>0?s[0]:a,i=null,o=0;for(let e of t){let t=p(e.nombre),r=t.split(",").map(e=>e.trim()),a=t.split(/\s+/).filter(e=>e.length>2);if(n===(r.length>1?r[0].trim():a.length>0?a[0]:t)&&n.length>2){let t=s.filter(e=>a.some(t=>t===e||t.includes(e)||e.includes(t))).length;t>o&&(o=t,i=e)}}if(i&&o>0)return i;for(let e of t){let t=p(e.nombre),r=t.split(",").map(e=>e.trim()),a=t.split(/\s+/).filter(e=>e.length>2),l=r.length>1?r[0].trim():a.length>0?a[0]:t;if(n.length>2&&l.length>2&&(n.includes(l)||l.includes(n))){let t=s.filter(e=>a.some(t=>t===e||t.includes(e)||e.includes(t))).length;t>=o&&(o=t,i=e)}}if(i)return i;if(s.length>0)for(let e of t){let t=p(e.nombre),r=t.split(/\s+/).filter(e=>e.length>2);if(s.every(e=>t.includes(e))||r.length>0&&r.every(e=>a.includes(e)))return e}if(s.length>=2){let e=null,r=0;for(let a of t){let t=p(a.nombre).split(/\s+/).filter(e=>e.length>2),l=s.filter(e=>t.some(t=>t.includes(e)||e.includes(t))).length;l>=2&&l>r&&(r=l,e=a)}if(e)return e}return null}(b.get(e)||e,o);t&&y.set(e,t)}let v=Array.from(y.keys()),j=Array.from(g).filter(e=>!y.has(e));console.log(`[Mapeo] M\xe9dicos encontrados: ${v.length}/${g.size}`),console.log(`[Mapeo] M\xe9dicos NO encontrados: ${j.length}`),v.length>0&&(console.log(`[Mapeo] M\xe9dicos encontrados:`),v.forEach(e=>{let t=y.get(e),r=b.get(e)||e;console.log(`  - "${r}" -> "${t.nombre}" (${null===t.matricula_provincial?"RESIDENTE":"NO RESIDENTE"})`)})),j.length>0&&(console.log(`[Mapeo] M\xe9dicos NO encontrados:`),j.forEach(e=>{let t=b.get(e)||e;console.log(`  - "${t}" (normalizado: "${e}")`)}),l.advertencias.push(`M\xe9dicos no encontrados en BD (${j.length}): ${j.slice(0,5).map(e=>b.get(e)||e).join(", ")}${j.length>5?"...":""}`));let N=[];if(l.totalFilas=e.rows.length,0===e.rows.length)return l.errores.push("El Excel no contiene filas de datos"),l;console.log(`Procesando ${e.rows.length} filas del Excel`),console.log("Headers disponibles:",e.headers);let w=0,E=0,S=0;for(let a=0;a<e.rows.length;a++){let n=e.rows[a];try{let e=m(n,["Fecha","fecha","FECHA","Fecha visita","Fecha Visita","Fecha de visita","Fecha de Visita","Fecha De Visita","Fecha de atenci√≥n","Fecha Atenci√≥n","Fecha de Atenci√≥n","Fecha de la consulta","Fecha Consulta","Fecha de Consulta","FECHA VISITA","FECHA DE VISITA","Fecha Visita","Fecha visita"]),i=m(n,["Hora","hora","HORA","Horario","horario","HORARIO","Hora inicio","Hora Inicio","Hora de inicio","Hora de Inicio","HORA INICIO"]),o=m(n,["Paciente","paciente","PACIENTE","Nombre paciente","Nombre Paciente","Nombre del paciente","NOMBRE PACIENTE"]),c=m(n,["Obra Social","obra social","Obra social","ObraSocial","Cliente","Obra","Obra Social / Cliente","Obra Social/Cliente","OBRA SOCIAL","CLIENTE"]),h=m(n,["Responsable","responsable","RESPONSABLE","M√©dico","medico","MEDICO","Medico","Profesional","profesional","PROFESIONAL","M√©dico responsable","M√©dico Responsable","Medico Responsable","M√âDICO RESPONSABLE"]),x=null;if(e&&!(x=function(e){if(!e)return null;let t=String(e).trim();if(""===t)return null;let r=t.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(r){let e=r[1].padStart(2,"0"),t=r[2].padStart(2,"0"),a=r[3];return`${a}-${t}-${e}`}let a=t.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);if(a){let e=a[1],t=a[2].padStart(2,"0"),r=a[3].padStart(2,"0");return`${e}-${t}-${r}`}try{let e=new Date(t);if(!isNaN(e.getTime())){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}}catch{}return null}(e)))if(String(e).match(/(\d{4})-(\d{1,2})-(\d{1,2})/))x=e;else try{let t=new Date(e);if(!isNaN(t.getTime())){let e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");x=`${e}-${r}-${a}`}}catch{}if(!x){w++,l.filasExcluidas.push({numeroFila:a+1,razon:"sin_fecha",datos:n});continue}let g=parseInt(x.split("-")[0]);if(g<2020||g>2100){E++,l.filasExcluidas.push({numeroFila:a+1,razon:"fecha_invalida",datos:n}),l.advertencias.push(`Fila ${a+1}: Fecha fuera de rango (${x}), se omite`);continue}let b=null;if(h&&"string"==typeof h&&""!==h.trim()){let e=p(h.trim());b=y.get(e)||null}let v=!!b&&null===b.matricula_provincial;if(!b&&h){let e=p(h.trim());y.has(e)}let j=c||"PARTICULARES",$=d.get(j)||0;if(0===$&&"PARTICULARES"===j){let{data:e}=await u.supabase.from("valores_consultas_obra_social").select("valor").eq("obra_social","PARTICULARES").eq("tipo_consulta","CONSULTA GINECOLOGICA").eq("mes",t).eq("anio",r).single();e&&e.valor&&($=e.valor,d.set("PARTICULARES",$))}0===$&&"PARTICULARES"!==j&&l.advertencias.push(`Fila ${a+1}: No hay valor configurado para obra social: ${j}`);let C=function(e){if(!e)return null;if("string"==typeof e){let t=e.match(/(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){let e=t[1].padStart(2,"0"),r=t[2].padStart(2,"0"),a=t[3]||"00";return`${e}:${r}:${a}`}}else if("number"==typeof e){let t=Math.round(86400*e),r=Math.floor(t/3600),a=Math.floor(t%3600/60);return`${String(r).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(t%60).padStart(2,"0")}`}return null}(i),_=(0,f.esResidenteHorarioFormativo)(x,C,v),O=$,k=$;_&&(O=0,k=0);let M={liquidacion_id:s,medico_id:b?.id||null,fecha:x,hora:C,paciente:o||null,obra_social:j,medico_nombre:h||b?.nombre||"Desconocido",medico_matricula:b?.matricula_provincial||null,medico_es_residente:v,monto_facturado:O,porcentaje_retencion:null,monto_retencion:null,monto_adicional:0,importe_calculado:k,aplica_adicional:!1,es_horario_formativo:_,estado_revision:"pendiente",fila_excel:a+1};N.push(M),S++,l.procesadas++}catch(t){let e=t.message||"Error desconocido";l.errores.push(`Fila ${a+1}: ${e}`),console.error(`Error procesando fila ${a+1}:`,t),console.error("Datos de la fila:",n)}}if(console.log(`Resumen: ${S} procesadas, ${w} sin fecha, ${E} fecha inv\xe1lida`),(w>0||E>0)&&l.advertencias.push(`Total omitidas: ${w+E} (${w} sin fecha, ${E} fecha inv\xe1lida)`),0===N.length)return l.errores.push("No se proces√≥ ninguna fila v√°lida. Verifique que el Excel tenga fechas v√°lidas."),l;console.log(`Guardando ${N.length} detalles en la base de datos`);for(let e=0;e<N.length;e+=100){let t=N.slice(e,e+100),{error:r}=await u.supabase.from("detalle_guardia").insert(t);if(r)return l.errores.push(`Error guardando detalles (lote ${Math.floor(e/100)+1}): ${r.message}. Detalles: ${JSON.stringify(r)}`),console.error("Error guardando detalles:",r),console.error("Primer detalle del lote:",t[0]),l}let $=N.length,C=N.reduce((e,t)=>e+(t.monto_facturado||0),0),_=N.reduce((e,t)=>e+(t.importe_calculado||0),0),{error:O}=await u.supabase.from("liquidaciones_guardia").update({total_consultas:$,total_bruto:C,total_neto:_,estado:"finalizada"}).eq("id",s);O&&l.errores.push(`Error actualizando totales: ${O.message}`)}catch(e){l.errores.push(`Error general: ${e.message||"Error desconocido"}`)}return l}let g=(0,e.i(71434).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var b=e.i(58427),y=e.i(27214),v=e.i(34754),j=e.i(44176);function N(){let e=(0,a.useRouter)(),[n,i]=(0,r.useState)(!1),[u,f]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[p,N]=(0,r.useState)(!1),[w,E]=(0,r.useState)(null),[S,$]=(0,r.useState)(null),[C,_]=(0,r.useState)(new Date().getMonth()+1),[O,k]=(0,r.useState)(new Date().getFullYear()),[M,P]=(0,r.useState)(null),[A,R]=(0,r.useState)(!1),[F,I]=(0,r.useState)(null),[L,T]=(0,r.useState)({isOpen:!1,type:"info",message:""});function D(e,t,r){T({isOpen:!0,type:e,message:t,title:r}),setTimeout(()=>{T(e=>({...e,isOpen:!1}))},5e3)}let q=async e=>{i(!0),f(null),m(null),E(null),$(null),P(e);try{let t=await (0,d.readExcelFile)(e);f(t);let{mes:r,anio:a}=(e=>{if(e.periodo?.desde){let t=e.periodo.desde.split("/");if(3===t.length){let e=parseInt(t[1],10),r=parseInt(t[2],10);if(e>=1&&e<=12&&r>=2020)return{mes:e,anio:r}}}let t=e.headers.find(e=>e.toLowerCase().includes("fecha")||e.toLowerCase().includes("date"));if(t&&e.rows.length>0){let r=[];if(e.rows.forEach(e=>{let a=e[t];if(a&&"string"==typeof a){let e=a.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(e){let t=parseInt(e[2],10),a=parseInt(e[3],10);t>=1&&t<=12&&a>=2020&&r.push(t)}}}),r.length>0){let a=r[0];if(r.every(e=>e===a)){let r=e.rows[0][t];if("string"==typeof r){let e=r.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(e)return{mes:a,anio:parseInt(e[3],10)}}}}}return{mes:null,anio:null}})(t);r&&a&&(E(r),$(a),_(r),k(a)),N(!0)}catch(e){console.error("Error processing file:",e),m(e.message||"Ocurri√≥ un error inesperado al procesar el archivo.")}finally{i(!1)}},z=async(e,t)=>{if(_(e),k(t),N(!1),u&&M){R(!0);try{let r=await x(u,e,t,M.name);if(I(r),r.errores.length>0){let e=r.errores.length>0?`Se procesaron ${r.procesadas} filas. Errores: ${r.errores.slice(0,3).join("; ")}${r.errores.length>3?"...":""}`:`Se procesaron ${r.procesadas} filas. Errores: ${r.errores.length}`;D("error",e,"Procesamiento con errores"),console.error("Errores completos:",r.errores)}else{f(null),P(null);let a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e-1];r.advertencias.length>0||r.filasExcluidas&&r.filasExcluidas.length>0?D("warning",`Se procesaron ${r.procesadas} de ${r.totalFilas} filas. ${r.advertencias.length} advertencias. ${r.filasExcluidas?.length||0} filas excluidas. Para editar los datos, ve a "Ver Resumen", selecciona el mes ${a} ${t} y edita desde ah\xed.`,"Procesamiento completado"):D("success",`Se procesaron y guardaron ${r.procesadas} consultas correctamente. Para editar los datos, ve a "Ver Resumen", selecciona el mes ${a} ${t} y edita desde ah\xed.`,"Guardado exitoso")}}catch(e){console.error("Error guardando datos:",e),D("error",`Error al guardar: ${e.message||"Error desconocido"}`,"Error")}finally{R(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen relative p-8 pb-20 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-20 left-20 w-96 h-96 bg-green-500/20 rounded-full blur-3xl animate-pulse"}),(0,t.jsx)("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-green-400/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)(s.Button,{onClick:()=>e.push("/"),variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(v.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Volver"]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(j.default,{href:"/",className:"hover:opacity-80 transition-opacity",children:(0,t.jsx)("img",{src:"/logogrow.png",alt:"Grow Labs",className:"h-16 w-auto drop-shadow-2xl",style:{filter:"drop-shadow(0 0 20px rgba(34, 197, 94, 0.5))"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2 tracking-tight",children:(0,t.jsx)("span",{className:"bg-gradient-to-r from-blue-400 to-cyan-300 bg-clip-text text-transparent",children:"M√≥dulo Ginecolog√≠a"})}),(0,t.jsxs)("p",{className:"text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(y.Sparkles,{className:"h-4 w-4 text-blue-400"}),"Procesamiento de liquidaciones por hora"]})]})]})})]}),(0,t.jsxs)("div",{className:"relative rounded-2xl shadow-2xl overflow-hidden p-8",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(59, 130, 246, 0.3)",boxShadow:"0 8px 32px 0 rgba(59, 130, 246, 0.3)"},children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-2xl",style:{background:"linear-gradient(45deg, transparent, rgba(59, 130, 246, 0.3), transparent)",animation:"borderGlow 3s ease-in-out infinite"}}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-blue-400",children:"üì§ Cargar Liquidaci√≥n"}),(0,t.jsx)(s.Button,{onClick:()=>e.push("/ginecologia/resumenes"),variant:"outline",className:"border-blue-500/50 text-blue-400 hover:bg-blue-500/20",children:"Ver Res√∫menes"})]}),(0,t.jsx)(l.UploadExcel,{onUpload:q,isProcessing:n}),h&&(0,t.jsxs)("div",{className:"mt-6 bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-start gap-3 text-red-400",children:[(0,t.jsx)(b.AlertCircle,{className:"w-5 h-5 mt-0.5 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Error de Procesamiento"}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:h})]})]})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px 0 rgba(59, 130, 246, 0.2)"},children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-200 mb-4",children:"üìã Reglas Vigentes"}),(0,t.jsxs)("div",{className:"space-y-4 text-sm text-gray-300",children:[(0,t.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg border border-white/5",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"Pago por Hora"}),(0,t.jsx)("div",{className:"font-semibold text-white",children:"Seg√∫n Tarifa"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Valor hora vigente por obra social"})]}),(0,t.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg border border-white/5",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"üë®‚Äç‚öïÔ∏è Regla de Residentes en Horario Formativo"}),(0,t.jsxs)("div",{className:"text-sm mt-2 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-red-400 font-semibold",children:"NO SE PAGA"}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"si se cumplen todas las condiciones:"})]}),(0,t.jsxs)("ul",{className:"text-xs space-y-1 ml-2 text-gray-300",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-blue-400",children:"‚Ä¢"}),(0,t.jsxs)("span",{children:["M√©dico es ",(0,t.jsx)("strong",{children:"RESIDENTE"})," (verificado en BD)"]})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-blue-400",children:"‚Ä¢"}),(0,t.jsxs)("span",{children:["D√≠a: ",(0,t.jsx)("strong",{children:"Lunes a S√°bado"})," (no domingo)"]})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-blue-400",children:"‚Ä¢"}),(0,t.jsxs)("span",{children:["Horario: ",(0,t.jsx)("strong",{className:"text-blue-400",children:"07:00 a 15:00"})]})]}),(0,t.jsx)("li",{className:"text-xs text-gray-400 mt-1 ml-4",children:"(Incluye 07:00, excluye 15:00)"})]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg border border-white/5",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"‚úÖ Casos que S√ç se Pagan"}),(0,t.jsxs)("ul",{className:"text-xs space-y-1 mt-2 text-gray-300",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-400",children:"‚úì"}),(0,t.jsx)("span",{children:"Residente fuera del horario formativo (ej: 16:00, 20:00)"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-400",children:"‚úì"}),(0,t.jsxs)("span",{children:["Residente en ",(0,t.jsx)("strong",{children:"Domingo"})," (cualquier hora)"]})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-400",children:"‚úì"}),(0,t.jsxs)("span",{children:["M√©dico de ",(0,t.jsx)("strong",{children:"Planta"})," (no residente) - siempre se paga"]})]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg border border-white/5",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"üìä Ejemplos de Horarios"}),(0,t.jsxs)("div",{className:"text-xs space-y-1 mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-300",children:"07:00 (Residente, L-S)"}),(0,t.jsx)("span",{className:"text-red-400",children:"$0"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-300",children:"14:59 (Residente, L-S)"}),(0,t.jsx)("span",{className:"text-red-400",children:"$0"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-300",children:"15:00 (Residente, L-S)"}),(0,t.jsx)("span",{className:"text-green-400",children:"Se paga"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-300",children:"10:00 (Residente, Domingo)"}),(0,t.jsx)("span",{className:"text-green-400",children:"Se paga"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-300",children:"10:00 (Planta, cualquier d√≠a)"}),(0,t.jsx)("span",{className:"text-green-400",children:"Se paga"})]})]})]})]})]})]}),(0,t.jsx)(o,{isOpen:p,onClose:()=>N(!1),onConfirm:z,mesDetectado:w,anioDetectado:S,mesActual:new Date().getMonth()+1,anioActual:new Date().getFullYear()}),(0,t.jsx)(c.NotificationModal,{isOpen:L.isOpen,onClose:()=>T(e=>({...e,isOpen:!1})),type:L.type,title:L.title,message:L.message}),A&&(0,t.jsx)("div",{className:"fixed bottom-4 right-4 p-4 rounded-lg bg-blue-500/20 border border-blue-500/50 text-blue-400",children:"Guardando datos en la base de datos..."}),F&&F.filasExcluidas&&F.filasExcluidas.length>0&&u&&(0,t.jsx)("div",{className:"max-w-6xl mx-auto mt-8 relative z-10",children:(0,t.jsxs)("div",{className:"rounded-2xl shadow-2xl overflow-hidden p-6 mb-6",style:{background:"rgba(239, 68, 68, 0.15)",backdropFilter:"blur(20px)",border:"1px solid rgba(239, 68, 68, 0.5)"},children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(g,{className:"h-6 w-6 text-red-400 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-red-400",children:[F.filasExcluidas.length," fila",F.filasExcluidas.length>1?"s":""," excluida",F.filasExcluidas.length>1?"s":""," del procesamiento"]}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Estas filas fueron excluidas porque no tienen fecha v√°lida o tienen fecha fuera de rango. Puedes revisarlas aqu√≠ pero no se guardaron en la base de datos."})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-white/10",children:[(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-400 sticky left-0 bg-gray-900/95 z-10",style:{minWidth:"80px"},children:"Fila Excel"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-400",style:{minWidth:"150px"},children:"Raz√≥n"}),u.headers.map((e,r)=>(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-400",style:{minWidth:"120px"},children:e},r))]})}),(0,t.jsx)("tbody",{children:F.filasExcluidas.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300 sticky left-0 bg-gray-900/95 z-10",children:e.numeroFila}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-red-400",children:"sin_fecha"===e.razon?"‚ùå Sin fecha v√°lida":"‚ö†Ô∏è Fecha fuera de rango"}),u.headers.map((r,a)=>(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300",children:e.datos[r]||"-"},a))]},r))})]})})]})})]})}e.s(["default",()=>N],74841)}]);
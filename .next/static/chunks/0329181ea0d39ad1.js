(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34754,e=>{"use strict";let t=(0,e.i(71434).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],34754)},80828,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},23164,e=>{"use strict";let t=(0,e.i(71434).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],23164)},17462,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(7735),s=e.i(74786),l=e.i(97451);async function o(e,t){let{data:r}=await s.supabase.from("liquidaciones_guardia").select("id").eq("especialidad","Ginecolog칤a").eq("mes",e).eq("anio",t).single();if(!r||!r.id)return[];let a=r.id,{data:o}=await s.supabase.from("detalle_guardia").select("*").eq("liquidacion_id",a);if(!o||0===o.length)return[];let{data:i}=await s.supabase.from("valores_consultas_obra_social").select("*").eq("tipo_consulta","CONSULTA GINECOLOGICA").eq("mes",e).eq("anio",t);if(!i||0===i.length)return[];let n=new Map;i.forEach(e=>{n.set(e.obra_social,e.valor)});let c=new Map;return o.forEach(e=>{let t=!0===e.medico_es_residente;if((0,l.esResidenteHorarioFormativo)(e.fecha,e.hora,t))return;let r=e.obra_social||"PARTICULARES",a=e.medico_nombre||"Desconocido",s=e.medico_id||"sin-id",o=`${s}|${r}`,i=n.get(r)||0;if(c.has(o)){let e=c.get(o);e.cantidad+=1,e.total=e.cantidad*e.valor_unitario}else c.set(o,{medico_id:e.medico_id,medico_nombre:a,obra_social:r,cantidad:1,valor_unitario:i,total:i})}),Array.from(c.values()).sort((e,t)=>e.medico_nombre!==t.medico_nombre?e.medico_nombre.localeCompare(t.medico_nombre):e.obra_social.localeCompare(t.obra_social))}async function i(e,t){let r=await o(e,t),a=new Map;return r.forEach(e=>{let t=e.medico_id||"sin-id",r=e.medico_nombre;if(a.has(t)){let r=a.get(t);r.cantidad+=e.cantidad,r.total_bruto+=e.total,r.retencion_20=.2*r.total_bruto,r.total_neto=r.total_bruto-r.retencion_20}else{let s=e.total,l=.2*s;a.set(t,{medico_id:e.medico_id,medico_nombre:r,cantidad:e.cantidad,total_bruto:s,retencion_20:l,total_neto:s-l})}}),Array.from(a.values()).sort((e,t)=>e.medico_nombre.localeCompare(t.medico_nombre))}var n=e.i(99093),c=e.i(89174);let d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],x=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];var m=e.i(83643),h=e.i(34754),g=e.i(81981),u=e.i(23164),b=e.i(71434);let y=(0,b.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),p=(0,b.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),f=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];function N(){let e=(0,a.useRouter)(),[b,N]=(0,r.useState)(new Date().getMonth()+1),[v,F]=(0,r.useState)(new Date().getFullYear()),[_,w]=(0,r.useState)(new Map),[S,C]=(0,r.useState)([]),[A,D]=(0,r.useState)([]),[k,R]=(0,r.useState)(!1),[P,T]=(0,r.useState)(!1),[M,q]=(0,r.useState)("medicos"),[z,L]=(0,r.useState)(null);async function E(){R(!0);try{let e=await i(b,v);C(e);let t=await o(b,v),r=new Map;t.forEach(e=>{let t=e.medico_id||"sin-id";r.has(t)||r.set(t,[]),r.get(t).push(e)}),w(r)}catch(e){console.error("Error cargando res칰menes:",e)}finally{R(!1)}}async function I(){T(!0);try{let{data:e,error:t}=await s.supabase.from("liquidaciones_guardia").select("*").eq("especialidad","Ginecolog칤a").order("anio",{ascending:!1}).order("mes",{ascending:!1});if(t)throw t;D(e||[])}catch(e){console.error("Error cargando historial:",e)}finally{T(!1)}}function $(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}(0,r.useEffect)(()=>{"historial"===M?I():E()},[b,v,M]);let G=Array.from(_.keys()).map(e=>{let t=_.get(e)||[];return t[0]?.medico_nombre||"Desconocido"}).sort();return(0,t.jsx)("div",{className:"min-h-screen p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(m.Button,{onClick:()=>e.push("/ginecologia"),variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(h.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Volver"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-green-400",children:"Res칰menes de Liquidaci칩n - Ginecolog칤a"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-300",children:"Mes:"}),(0,t.jsx)("select",{value:b,onChange:e=>N(Number(e.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white focus:border-green-400 focus:outline-none",children:f.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-300",children:"A침o:"}),(0,t.jsx)("input",{type:"number",value:v,onChange:e=>F(Number(e.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white w-24 focus:border-green-400 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 border-b border-gray-700",children:[(0,t.jsx)("button",{onClick:()=>q("medicos"),className:`px-4 py-2 font-semibold transition-colors ${"medicos"===M?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:"Resumen por M칠dico"}),(0,t.jsx)("button",{onClick:()=>q("prestadores"),className:`px-4 py-2 font-semibold transition-colors ${"prestadores"===M?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:"Resumen por Prestador"}),(0,t.jsxs)("button",{onClick:()=>q("historial"),className:`px-4 py-2 font-semibold transition-colors flex items-center gap-2 ${"historial"===M?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:[(0,t.jsx)(y,{className:"h-4 w-4"}),"Historial"]})]}),"historial"===M?(0,t.jsx)("div",{className:"space-y-6",children:P?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Cargando historial..."}):0===A.length?(0,t.jsxs)("div",{className:"rounded-xl p-8 text-center",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 193, 7, 0.3)"},children:[(0,t.jsx)("div",{className:"text-yellow-400 text-xl font-bold mb-4",children:"No hay liquidaciones procesadas"}),(0,t.jsx)("div",{className:"text-gray-400 mb-6",children:"A칰n no se ha procesado ning칰n archivo Excel de Ginecolog칤a."}),(0,t.jsx)(m.Button,{onClick:()=>e.push("/ginecologia"),className:"bg-green-600 hover:bg-green-500 text-white",children:"Ir a Ginecolog칤a"})]}):(0,t.jsxs)("div",{className:"rounded-xl p-6",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"Historial de Liquidaciones"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Per칤odo"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"N춿 Liquidaci칩n"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Archivo"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-green-400",children:"Estado"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Consultas"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total Bruto"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total Neto"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Fecha Procesamiento"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-green-400",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:A.map(e=>{let r=e.created_at?new Date(e.created_at).toLocaleDateString("es-AR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",a=f.find(t=>t.value===e.mes)?.label||`Mes ${e.mes}`,s=z===e.id;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-300 font-medium",children:[a," ",e.anio]}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.numero_liquidacion||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:(0,t.jsx)("div",{className:"max-w-xs truncate",title:e.archivo_nombre||"",children:e.archivo_nombre||"Sin archivo"})}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"finalizada"===e.estado?"bg-green-500/20 text-green-400":"procesando"===e.estado?"bg-yellow-500/20 text-yellow-400":"error"===e.estado?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:e.estado})}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:e.total_consultas||0}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:$(e.total_bruto||0)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right font-semibold",children:$(e.total_neto||0)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:r}),(0,t.jsx)("td",{className:"px-4 py-3 text-center",children:(0,t.jsxs)(m.Button,{onClick:()=>{L(s?null:e.id)},variant:"outline",size:"sm",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-1"}),s?"Ocultar":"Ver"]})})]},e.id),s&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:9,className:"px-4 py-4 bg-gray-900/50",children:(0,t.jsx)(j,{liquidacionId:e.id})})})]})})})]})})]})}):k?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Cargando res칰menes..."}):0===_.size&&0===S.length?(0,t.jsxs)("div",{className:"rounded-xl p-8 text-center",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 193, 7, 0.3)"},children:[(0,t.jsx)("div",{className:"text-yellow-400 text-xl font-bold mb-4",children:"No hay datos para el per칤odo seleccionado"}),(0,t.jsx)("div",{className:"text-gray-400 mb-6",children:"Para generar res칰menes, primero debes:"}),(0,t.jsxs)("ol",{className:"text-left text-gray-300 space-y-2 max-w-md mx-auto mb-6",children:[(0,t.jsxs)("li",{children:["1. Ir a la p치gina de ",(0,t.jsx)("strong",{className:"text-green-400",children:"Ginecolog칤a"})]}),(0,t.jsx)("li",{children:"2. Subir un archivo Excel con las consultas"}),(0,t.jsx)("li",{children:"3. Confirmar el mes y a침o del per칤odo"}),(0,t.jsx)("li",{children:"4. El sistema guardar치 autom치ticamente los datos"})]}),(0,t.jsx)(m.Button,{onClick:()=>e.push("/ginecologia"),className:"bg-green-600 hover:bg-green-500 text-white",children:"Ir a Ginecolog칤a"})]}):"medicos"===M?(0,t.jsx)("div",{className:"space-y-6",children:0===G.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No hay datos para el per칤odo seleccionado"}):G.map(e=>{let r=Array.from(_.keys()).find(t=>{let r=_.get(t)||[];return r[0]?.medico_nombre===e}),a=r&&_.get(r)||[],s=a.reduce((e,t)=>e+t.total,0),o=a.reduce((e,t)=>e+t.cantidad,0);return(0,t.jsxs)("div",{className:"rounded-xl p-6",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:e}),(0,t.jsxs)(m.Button,{onClick:()=>{!function({resumenes:e,mes:t,anio:r,medicoNombre:a}){let s=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),o=20,i=(0,l.calcularNumeroLiquidacion)(t,r);s.setFontSize(11),s.setTextColor(34,197,94),s.setFont("helvetica","bold"),s.text("Grow Labs",15,o),s.setFontSize(7.5),s.setTextColor(100,100,100),s.setFont("helvetica","normal"),s.text("Sistema de Liquidaciones de Guardias",15,o+5),o+=15,s.setFontSize(16),s.setTextColor(0,0,0),s.setFont("helvetica","bold"),s.text(a.toUpperCase(),15,o);let x=o+=10;s.setFillColor(240,240,240),s.setDrawColor(200,200,200),s.roundedRect(105,x,90,30,2,2,"FD");let m=x+3.75;s.setFontSize(8.5),s.setTextColor(0,0,0),s.setFont("helvetica","bold"),s.text("Mes:",109.5,m),s.setFont("helvetica","normal"),s.text(d[t-1],151.5,m),m+=7.5,s.setFont("helvetica","bold"),s.text("A침o:",109.5,m),s.setFont("helvetica","normal"),s.text(String(r),151.5,m),m+=7.5,s.setFont("helvetica","bold"),s.text("Liq:",109.5,m),s.setFont("helvetica","normal"),s.text(String(i),151.5,m),m+=7.5,s.setFont("helvetica","bold"),s.text("Generado:",109.5,m),s.setFont("helvetica","normal");let h=new Date().toLocaleDateString("es-AR");s.text(h,151.5,m),o=x+30+10;let g=e.map(e=>[e.obra_social,String(e.cantidad),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.valor_unitario),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.total)]),u=e.reduce((e,t)=>e+t.cantidad,0),b=e.reduce((e,t)=>e+t.total,0);g.push(["TOTAL",String(u),"",new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(b)]);(0,c.default)(s,{startY:o,head:[["Obra social","Cantidad","Valor unitario","Total"]],body:g,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:[255,255,255],fontStyle:"bold",fontSize:9,halign:"left"},bodyStyles:{fontSize:8,textColor:[0,0,0],cellPadding:2,halign:"left"},columnStyles:{0:{cellWidth:70,fontStyle:"bold"},1:{cellWidth:30,halign:"right"},2:{cellWidth:40,halign:"right"},3:{cellWidth:40,halign:"right",fontStyle:"bold"}},styles:{lineColor:[220,220,220],lineWidth:.1,valign:"middle"},margin:{left:15,right:15},tableWidth:180,showHead:"everyPage",pageBreak:"auto",rowPageBreak:"avoid",didParseCell:e=>{e.row.index===g.length-1&&(e.cell.styles.fillColor=[240,240,240],e.cell.styles.fontStyle="bold")}});let y=s.getNumberOfPages();for(let e=1;e<=y;e++)s.setPage(e),s.setFontSize(7),s.setTextColor(150,150,150),s.setFont("helvetica","italic"),s.text(`P\xe1gina ${e} de ${y} - Powered by Grow Labs 游꺔`,105,287,{align:"center"});let p=`Resumen_${a.replace(/[^a-zA-Z0-9]/g,"_")}_${d[t-1]}_${r}.pdf`;s.save(p)}({resumenes:a,mes:b,anio:v,medicoNombre:e})},variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(g.FileDown,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Obra social"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Cantidad"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Valor unitario"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total"})]})}),(0,t.jsxs)("tbody",{children:[a.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.obra_social}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:e.cantidad}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:$(e.valor_unitario)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right font-semibold",children:$(e.total)})]},r)),(0,t.jsxs)("tr",{className:"bg-gray-800/50 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400",children:"TOTAL"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:o}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:$(s)})]})]})]})})]},e)})}):(0,t.jsx)("div",{className:"space-y-6",children:0===S.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No hay datos para el per칤odo seleccionado"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-end mb-4",children:(0,t.jsxs)(m.Button,{onClick:function(){!function({resumenes:e,mes:t,anio:r}){let a=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),s=20,o=(0,l.calcularNumeroLiquidacion)(t,r);a.setFontSize(11),a.setTextColor(34,197,94),a.setFont("helvetica","bold"),a.text("Grow Labs",15,s),a.setFontSize(7.5),a.setTextColor(100,100,100),a.setFont("helvetica","normal"),a.text("Sistema de Liquidaciones de Guardias",15,s+5),s+=15,a.setFontSize(16),a.setTextColor(0,0,0),a.setFont("helvetica","bold"),a.text("Guardia Ginecol칩gica",15,s),a.setFontSize(12),a.setTextColor(100,100,100),a.setFont("helvetica","normal"),a.text(`${x[t-1]} ${r}`,15,s+7);let i=s+=15;a.setFillColor(240,240,240),a.setDrawColor(200,200,200),a.roundedRect(105,i,90,22.5,2,2,"FD");let d=i+3.75;a.setFontSize(8.5),a.setTextColor(0,0,0),a.setFont("helvetica","bold"),a.text("Mes:",109.5,d),a.setFont("helvetica","normal"),a.text(x[t-1],151.5,d),d+=7.5,a.setFont("helvetica","bold"),a.text("A침o:",109.5,d),a.setFont("helvetica","normal"),a.text(String(r),151.5,d),d+=7.5,a.setFont("helvetica","bold"),a.text("Liq:",109.5,d),a.setFont("helvetica","normal"),a.text(String(o),151.5,d),s=i+22.5+10;let m=e.map(e=>[e.medico_nombre,String(e.cantidad),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.total_bruto),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.retencion_20),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.total_neto)]),h=e.reduce((e,t)=>e+t.cantidad,0),g=e.reduce((e,t)=>e+t.total_bruto,0),u=e.reduce((e,t)=>e+t.retencion_20,0),b=e.reduce((e,t)=>e+t.total_neto,0);m.push(["Total general",String(h),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(g),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(u),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(b)]);(0,c.default)(a,{startY:s,head:[["Prestador","Cantidad","Total bruto","Retenci칩n 20%","Total Neto"]],body:m,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:[255,255,255],fontStyle:"bold",fontSize:9,halign:"left"},bodyStyles:{fontSize:8,textColor:[0,0,0],cellPadding:2,halign:"left"},columnStyles:{0:{cellWidth:60,fontStyle:"bold"},1:{cellWidth:25,halign:"right"},2:{cellWidth:35,halign:"right"},3:{cellWidth:30,halign:"right"},4:{cellWidth:30,halign:"right",fontStyle:"bold"}},styles:{lineColor:[220,220,220],lineWidth:.1,valign:"middle"},margin:{left:15,right:15},tableWidth:180,showHead:"everyPage",pageBreak:"auto",rowPageBreak:"avoid",didParseCell:e=>{e.row.index===m.length-1&&(e.cell.styles.fillColor=[240,240,240],e.cell.styles.fontStyle="bold")}});let y=a.getNumberOfPages();for(let e=1;e<=y;e++)a.setPage(e),a.setFontSize(7),a.setTextColor(150,150,150),a.setFont("helvetica","italic"),a.text(`P\xe1gina ${e} de ${y} - Powered by Grow Labs 游꺔`,105,287,{align:"center"});let p=`Resumen_Prestadores_${x[t-1]}_${r}.pdf`;a.save(p)}({resumenes:S,mes:b,anio:v})},variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Exportar PDF Completo"]})}),(0,t.jsxs)("div",{className:"rounded-xl p-6",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"Resumen por Prestador"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Prestador"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Cantidad"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total bruto"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Retenci칩n 20%"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total Neto"})]})}),(0,t.jsxs)("tbody",{children:[S.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 font-medium",children:e.medico_nombre}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:e.cantidad}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:$(e.total_bruto)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:$(e.retencion_20)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right font-semibold",children:$(e.total_neto)})]},r)),(0,t.jsxs)("tr",{className:"bg-gray-800/50 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400",children:"Total general"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:S.reduce((e,t)=>e+t.cantidad,0)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:$(S.reduce((e,t)=>e+t.total_bruto,0))}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:$(S.reduce((e,t)=>e+t.retencion_20,0))}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:$(S.reduce((e,t)=>e+t.total_neto,0))})]})]})]})})]})]})})]})})}function j({liquidacionId:e}){let[a,l]=(0,r.useState)([]),[o,i]=(0,r.useState)(!1);async function n(){i(!0);try{let{data:t,error:r}=await s.supabase.from("detalle_guardia").select("*").eq("liquidacion_id",e).order("fecha",{ascending:!0}).order("hora",{ascending:!0}).limit(100);if(r)throw r;l(t||[])}catch(e){console.error("Error cargando detalles:",e)}finally{i(!1)}}function c(e){return e?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e):"$0.00"}return((0,r.useEffect)(()=>{n()},[e]),o)?(0,t.jsx)("div",{className:"text-center py-4 text-gray-400",children:"Cargando detalles..."}):0===a.length?(0,t.jsx)("div",{className:"text-center py-4 text-gray-400",children:"No hay detalles disponibles"}):(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-green-400 mb-3",children:["Detalle de Consultas (",a.length," registros)"]}),(0,t.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 bg-gray-900",children:(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-green-400",children:"Fecha"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-green-400",children:"Hora"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-green-400",children:"M칠dico"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-green-400",children:"Paciente"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-green-400",children:"Obra Social"}),(0,t.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-green-400",children:"Monto Facturado"}),(0,t.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-green-400",children:"Importe Calculado"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-green-400",children:"Horario Formativo"})]})}),(0,t.jsx)("tbody",{children:a.map(e=>{var r;return(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/30",children:[(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300",children:(r=e.fecha)?new Date(r).toLocaleDateString("es-AR"):"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300",children:e.hora||"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300",children:e.medico_nombre||"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300",children:e.paciente||"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300",children:e.obra_social||"-"}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300 text-right",children:c(e.monto_facturado)}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-gray-300 text-right font-semibold",children:c(e.importe_calculado)}),(0,t.jsx)("td",{className:"px-3 py-2 text-xs text-center",children:e.es_horario_formativo?(0,t.jsx)("span",{className:"text-yellow-400",children:"S칤"}):(0,t.jsx)("span",{className:"text-gray-500",children:"No"})})]},e.id)})})]})}),a.length>=100&&(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-400 text-center",children:"Mostrando los primeros 100 registros"})]})}e.s(["default",()=>N],17462)},44557,e=>{e.v(t=>Promise.all(["static/chunks/50947de1fb5100bc.js"].map(t=>e.l(t))).then(()=>t(25772)))},18454,e=>{e.v(t=>Promise.all(["static/chunks/46ea109e3f7ee3dc.js"].map(t=>e.l(t))).then(()=>t(32694)))},26753,e=>{e.v(t=>Promise.all(["static/chunks/7bd0dee9ec340940.js"].map(t=>e.l(t))).then(()=>t(90015)))}]);
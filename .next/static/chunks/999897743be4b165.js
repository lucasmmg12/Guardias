(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32600,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},81377,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return o},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return n}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});function s(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function n(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,i(e));else t.set(r,i(a));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},58393,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return n},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=e.r(5691)._(e.r(81377)),i=/https?|ftp|gopher|file/;function n(e){let{auth:t,hostname:r}=e,a=e.protocol||"",l=e.pathname||"",n=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(s.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||i.test(a))&&!1!==c?(c="//"+(c||""),l&&"/"!==l[0]&&(l="/"+l)):c||(c=""),n&&"#"!==n[0]&&(n="#"+n),d&&"?"!==d[0]&&(d="?"+d),l=l.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${l}${d}${n}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return n(e)}},17055,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return l}});let a=e.r(87312);function l(e,t){let r=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=s(e,a)),t&&(l.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},41519,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return y},NormalizeError:function(){return b},PageNotFoundError:function(){return v},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return s},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return p},loadGetInitialProps:function(){return x},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return N}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let n=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>n.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function x(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await x(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&p(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},63090,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return s}});let a=e.r(41519),l=e.r(32323);function s(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,l.hasBasePath)(r.pathname)}catch(e){return!1}}},60239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},44176,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return g},useLinkStatus:function(){return v}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=e.r(5691),i=e.r(9964),n=s._(e.r(87312)),o=e.r(58393),c=e.r(9175),d=e.r(17055),u=e.r(41519),p=e.r(66534);e.r(32600);let m=e.r(69234),x=e.r(63090),h=e.r(46573);function f(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var r;let a,l,s,[o,g]=(0,n.useOptimistic)(m.IDLE_LINK_STATUS),v=(0,n.useRef)(null),{href:y,as:j,children:N,prefetch:w=null,passHref:E,replace:C,shallow:k,scroll:_,onClick:S,onMouseEnter:P,onTouchStart:T,legacyBehavior:O=!1,onNavigate:M,ref:I,unstable_dynamicOnHover:A,...L}=t;a=N,O&&("string"==typeof a||"number"==typeof a)&&(a=(0,i.jsx)("a",{children:a}));let U=n.default.useContext(c.AppRouterContext),R=!1!==w,$=!1!==w?null===(r=w)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:F,as:B}=n.default.useMemo(()=>{let e=f(y);return{href:e,as:j?f(j):e}},[y,j]);if(O){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});l=n.default.Children.only(a)}let D=O?l&&"object"==typeof l&&l.ref:I,G=n.default.useCallback(e=>(null!==U&&(v.current=(0,m.mountLinkInstance)(e,F,U,$,R,g)),()=>{v.current&&((0,m.unmountLinkForCurrentNavigation)(v.current),v.current=null),(0,m.unmountPrefetchableInstance)(e)}),[R,F,U,$,g]),q={ref:(0,d.useMergedRef)(G,D),onClick(t){O||"function"!=typeof S||S(t),O&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(t),!U||t.defaultPrevented||function(t,r,a,l,s,i,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,x.isLocalURL)(r)){s&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(19506);n.default.startTransition(()=>{u(a||r,s?"replace":"push",i??!0,l.current)})}}(t,F,B,v,C,_,M)},onMouseEnter(e){O||"function"!=typeof P||P(e),O&&l.props&&"function"==typeof l.props.onMouseEnter&&l.props.onMouseEnter(e),U&&R&&(0,m.onNavigationIntent)(e.currentTarget,!0===A)},onTouchStart:function(e){O||"function"!=typeof T||T(e),O&&l.props&&"function"==typeof l.props.onTouchStart&&l.props.onTouchStart(e),U&&R&&(0,m.onNavigationIntent)(e.currentTarget,!0===A)}};return(0,u.isAbsoluteUrl)(B)?q.href=B:O&&!E&&("a"!==l.type||"href"in l.props)||(q.href=(0,p.addBasePath)(B)),s=O?n.default.cloneElement(l,q):(0,i.jsx)("a",{...L,...q,children:a}),(0,i.jsx)(b.Provider,{value:o,children:s})}e.r(60239);let b=(0,n.createContext)(m.IDLE_LINK_STATUS),v=()=>(0,n.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},59784,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(74786),l=e.i(38431);async function s(e){let t={medicos:[],errores:[],duplicados:0};try{let r=await e.arrayBuffer(),a=l.read(r,{type:"array"}),s=a.SheetNames[0];if(!s)throw Error("El archivo Excel no contiene hojas");let i=a.Sheets[s],n=l.utils.sheet_to_json(i,{defval:null,raw:!1});if(0===n.length)throw Error("El archivo Excel no contiene datos");for(let e=0;e<n.length;e++){let r=n[e],a=e+2;try{if(!r.Nombre||""===String(r.Nombre).trim()){t.errores.push(`Fila ${a}: El campo "Nombre" es requerido`);continue}if(!r["Mat. provinc"]&&!r.CUIT){t.errores.push(`Fila ${a}: Debe tener al menos "Mat. provinc" o "CUIT"`);continue}if(!r.Especialidad||""===String(r.Especialidad).trim()){t.errores.push(`Fila ${a}: El campo "Especialidad" es requerido`);continue}let l=r["Mat. provinc"]?String(r["Mat. provinc"]).trim():null,s=r.CUIT?String(r.CUIT).trim():null,i=l||s||`TEMP-${Date.now()}-${e}`,n={nombre:String(r.Nombre).trim(),matricula:i,matricula_provincial:l,cuit:s,grupo_persona:r["Grupo persona"]?String(r["Grupo persona"]).trim():null,perfil:r.Perfil?String(r.Perfil).trim():null,es_residente:function(e){if(!e)return!1;let t=String(e).toLowerCase();return t.includes("residente")||t.includes("resident")}(r.Perfil),especialidad:String(r.Especialidad).trim(),activo:function(e){if("boolean"==typeof e)return e;if("string"==typeof e){let t=e.toLowerCase().trim();return"si"===t||"sí"===t||"yes"===t||"true"===t||"1"===t}return"number"==typeof e&&1===e}(r.Activo)};t.medicos.push(n)}catch(e){t.errores.push(`Fila ${a}: ${e.message||"Error desconocido"}`)}}return t}catch(e){if(e instanceof Error)throw e;throw Error("Error al leer el archivo Excel: "+String(e))}}var i=e.i(8674),n=e.i(83643),o=e.i(7987),c=e.i(68499);function d({medico:e,onClose:l,onSave:s}){let[i,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)({nombre:"",matricula:"",matricula_provincial:"",cuit:"",grupo_persona:"",perfil:"",es_residente:!1,especialidad:"Pediatría",activo:!0});(0,r.useEffect)(()=>{e?p({nombre:e.nombre,matricula:e.matricula,matricula_provincial:e.matricula_provincial||"",cuit:e.cuit||"",grupo_persona:e.grupo_persona||"",perfil:e.perfil||"",es_residente:e.es_residente,especialidad:e.especialidad,activo:e.activo}):p({nombre:"",matricula:"",matricula_provincial:"",cuit:"",grupo_persona:"",perfil:"",es_residente:!1,especialidad:"Pediatría",activo:!0})},[e]);let m=async t=>{t.preventDefault(),d(!0);try{if(!u.nombre.trim())return void alert("El nombre es requerido");if(!u.matricula.trim()&&!u.matricula_provincial?.trim()&&!u.cuit?.trim())return void alert("Debe proporcionar al menos una matrícula o CUIT");if(u.matricula.trim()||(u.matricula=u.matricula_provincial?.trim()||u.cuit?.trim()||`TEMP-${Date.now()}`),u.perfil){let e=u.perfil.toLowerCase();u.es_residente=e.includes("residente")||e.includes("resident")}if(e){let t={nombre:u.nombre.trim(),matricula:u.matricula.trim(),matricula_provincial:u.matricula_provincial?.trim()||null,cuit:u.cuit?.trim()||null,grupo_persona:u.grupo_persona?.trim()||null,perfil:u.perfil?.trim()||null,es_residente:u.es_residente,especialidad:u.especialidad,activo:u.activo},{error:r}=await a.supabase.from("medicos").update(t).eq("id",e.id);if(r)throw r}else{let{error:e}=await a.supabase.from("medicos").insert([u]);if(e)throw e}s()}catch(e){console.error("Error saving médico:",e),alert(e.message||"Error al guardar el médico")}finally{d(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:l,children:(0,t.jsxs)("div",{className:"relative rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:e?"Editar Médico":"Agregar Médico"}),(0,t.jsx)("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t.jsx)(c.X,{className:"h-5 w-5"})})]}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Nombre Completo *"}),(0,t.jsx)(o.Input,{type:"text",value:u.nombre,onChange:e=>p({...u,nombre:e.target.value}),required:!0,className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: GONZALEZ, JUAN CARLOS"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Matrícula Provincial"}),(0,t.jsx)(o.Input,{type:"text",value:u.matricula_provincial||"",onChange:e=>p({...u,matricula_provincial:e.target.value}),className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: 3540"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"CUIT"}),(0,t.jsx)(o.Input,{type:"text",value:u.cuit||"",onChange:e=>p({...u,cuit:e.target.value}),className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: 20259398909"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Matrícula (si no tiene provincial, usar CUIT) *"}),(0,t.jsx)(o.Input,{type:"text",value:u.matricula,onChange:e=>p({...u,matricula:e.target.value}),required:!0,className:"bg-black/30 border-gray-600 text-white",placeholder:"Se usará matrícula provincial o CUIT si está vacío"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Especialidad *"}),(0,t.jsxs)("select",{value:u.especialidad,onChange:e=>p({...u,especialidad:e.target.value}),required:!0,className:"w-full px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white",children:[(0,t.jsx)("option",{value:"Pediatría",children:"Pediatría"}),(0,t.jsx)("option",{value:"Ginecología",children:"Ginecología"}),(0,t.jsx)("option",{value:"Obstetricia",children:"Obstetricia"}),(0,t.jsx)("option",{value:"Cirugía",children:"Cirugía"}),(0,t.jsx)("option",{value:"Clínica",children:"Clínica"}),(0,t.jsx)("option",{value:"ECOGRAFISTA",children:"ECOGRAFISTA"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Grupo Persona"}),(0,t.jsx)(o.Input,{type:"text",value:u.grupo_persona||"",onChange:e=>p({...u,grupo_persona:e.target.value}),className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: Médico"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Perfil"}),(0,t.jsx)(o.Input,{type:"text",value:u.perfil||"",onChange:e=>{let t=e.target.value;p({...u,perfil:t,es_residente:t.toLowerCase().includes("residente")||t.toLowerCase().includes("resident")})},className:"bg-black/30 border-gray-600 text-white",placeholder:"Ej: DOCTOR, RESIDENTE"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-green-300 mb-2",children:"Estado"}),(0,t.jsxs)("select",{value:u.activo?"activo":"inactivo",onChange:e=>p({...u,activo:"activo"===e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white",children:[(0,t.jsx)("option",{value:"activo",children:"Activo"}),(0,t.jsx)("option",{value:"inactivo",children:"Inactivo"})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:u.es_residente,onChange:e=>p({...u,es_residente:e.target.checked}),className:"w-4 h-4 rounded bg-black/30 border-gray-600 text-green-500"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-green-300",children:"Es Residente (aplica horario formativo)"})]})}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(n.Button,{type:"button",onClick:l,variant:"outline",className:"border-gray-600 text-gray-300",children:"Cancelar"}),(0,t.jsx)(n.Button,{type:"submit",disabled:i,className:"bg-green-600 hover:bg-green-500 text-white",children:i?"Guardando...":e?"Actualizar":"Guardar"})]})]})]})})}var u=e.i(71434);let p=(0,u.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=(0,u.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var x=e.i(60661);let h=(0,u.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),f=(0,u.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),g=(0,u.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var b=e.i(19029),v=e.i(58427),y=e.i(27214),j=e.i(44176);function N(){let[e,c]=(0,r.useState)([]),[u,N]=(0,r.useState)(!0),[w,E]=(0,r.useState)(""),[C,k]=(0,r.useState)("all"),[_,S]=(0,r.useState)("all"),[P,T]=(0,r.useState)(!1),[O,M]=(0,r.useState)(null),[I,A]=(0,r.useState)(!1),[L,U]=(0,r.useState)(null),[R,$]=(0,r.useState)(!1);async function F(){try{N(!0);let e=a.supabase.from("medicos").select("*").order("nombre",{ascending:!0});"all"!==C&&(e=e.eq("especialidad",C)),"all"!==_&&(e=e.eq("activo","activo"===_));let{data:t,error:r}=await e;if(r)throw r;c(t||[])}catch(e){console.error("Error loading médicos:",e)}finally{N(!1)}}(0,r.useEffect)(()=>{F()},[]),(0,r.useEffect)(()=>{F()},[C,_]);let B=async e=>{if(confirm("¿Está seguro de que desea eliminar este médico?"))try{let{error:t}=await a.supabase.from("medicos").delete().eq("id",e);if(t)throw t;F()}catch(e){console.error("Error deleting médico:",e),alert("Error al eliminar el médico")}},D=async e=>{try{let{error:t}=await a.supabase.from("medicos").update({activo:!e.activo}).eq("id",e.id);if(t)throw t;F()}catch(e){console.error("Error updating médico:",e),alert("Error al actualizar el médico")}},G=async e=>{$(!0),U(null);try{let t=await s(e),{data:r}=await a.supabase.from("medicos").select("matricula, cuit"),l=new Set(r?.map(e=>e.matricula)||[]),i=new Set(r?.map(e=>e.cuit).filter(Boolean)||[]),n=[],o=0;for(let e of t.medicos)l.has(e.matricula)||e.cuit&&i.has(e.cuit)?o++:(n.push(e),e.matricula&&l.add(e.matricula),e.cuit&&i.add(e.cuit));if(n.length>0){let{error:e}=await a.supabase.from("medicos").insert(n);if(e)throw e}U({total:t.medicos.length,insertados:n.length,duplicados:o+t.duplicados,errores:t.errores}),F()}catch(e){U({error:e.message||"Error al importar médicos"})}finally{$(!1)}},q=e.filter(e=>{if(!w)return!0;let t=w.toLowerCase();return e.nombre.toLowerCase().includes(t)||e.matricula?.toLowerCase().includes(t)||e.matricula_provincial?.toLowerCase().includes(t)||e.cuit?.toLowerCase().includes(t)||e.especialidad.toLowerCase().includes(t)}),z=Array.from(new Set(e.map(e=>e.especialidad))).sort();return(0,t.jsxs)("div",{className:"min-h-screen relative p-8 pb-20 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-20 left-20 w-96 h-96 bg-green-500/20 rounded-full blur-3xl animate-pulse"}),(0,t.jsx)("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-green-400/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8 relative z-10",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(j.default,{href:"/",className:"hover:opacity-80 transition-opacity",children:(0,t.jsx)("img",{src:"/logogrow.png",alt:"Grow Labs",className:"h-16 w-auto drop-shadow-2xl",style:{filter:"drop-shadow(0 0 20px rgba(34, 197, 94, 0.5))"}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2 tracking-tight",children:(0,t.jsx)("span",{className:"bg-gradient-to-r from-green-400 to-emerald-300 bg-clip-text text-transparent",children:"Administración de Médicos"})}),(0,t.jsxs)("p",{className:"text-gray-400 flex items-center gap-2",children:[(0,t.jsx)(y.Sparkles,{className:"h-4 w-4 text-green-400"}),"Gestión de prestadores para Pediatría y Ginecología"]})]})]})})}),(0,t.jsx)("div",{className:"p-6 rounded-xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.2)"},children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-1 gap-4 items-center w-full md:w-auto",children:[(0,t.jsxs)("div",{className:"relative flex-1 md:flex-initial",children:[(0,t.jsx)(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(o.Input,{type:"text",placeholder:"Buscar por nombre, matrícula, CUIT...",value:w,onChange:e=>E(e.target.value),className:"pl-10 bg-black/30 border-gray-600 text-white placeholder-gray-400"})]}),(0,t.jsxs)("select",{value:C,onChange:e=>k(e.target.value),className:"px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white text-sm",children:[(0,t.jsx)("option",{value:"all",children:"Todas las especialidades"}),z.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"px-4 py-2 rounded-lg bg-black/30 border border-gray-600 text-white text-sm",children:[(0,t.jsx)("option",{value:"all",children:"Todos"}),(0,t.jsx)("option",{value:"activo",children:"Activos"}),(0,t.jsx)("option",{value:"inactivo",children:"Inactivos"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(n.Button,{onClick:()=>T(!0),className:"bg-green-600 hover:bg-green-500 text-white",children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-2"}),"Agregar Médico"]}),(0,t.jsxs)(n.Button,{onClick:()=>A(!0),variant:"outline",className:"border-green-500 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(x.Upload,{className:"h-4 w-4 mr-2"}),"Importar Excel"]}),(0,t.jsxs)(n.Button,{onClick:()=>{let t,r,a,s=(t=e.map(e=>({Nombre:e.nombre||"","Mat. provinc":e.matricula_provincial||e.matricula||"",CUIT:e.cuit||"",Especialidad:e.especialidad||"","Grupo persona":e.grupo_persona||"",Perfil:e.perfil||"",Activo:e.activo?"Si":"No"})),r=l.utils.json_to_sheet(t),a=l.utils.book_new(),l.utils.book_append_sheet(a,r,"Médicos"),new Blob([l.write(a,{type:"array",bookType:"xlsx",cellStyles:!0})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),i=window.URL.createObjectURL(s),n=document.createElement("a");n.href=i,n.download=`medicos_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)},variant:"outline",className:"border-green-500 text-green-400 hover:bg-green-500/20",disabled:0===e.length,children:[(0,t.jsx)(m,{className:"h-4 w-4 mr-2"}),"Exportar Excel"]})]})]})}),(0,t.jsx)("div",{className:"rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:u?(0,t.jsx)("div",{className:"p-12 text-center text-gray-400",children:"Cargando médicos..."}):0===q.length?(0,t.jsx)("div",{className:"p-12 text-center text-gray-400",children:"No se encontraron médicos"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-white/10 bg-white/5",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Nombre"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Mat. Provinc"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"CUIT"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Especialidad"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Grupo Persona"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Perfil"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Residente"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Estado"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-300",children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:q.map(e=>(0,t.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.nombre}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400 font-mono text-xs",children:e.matricula_provincial||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400 font-mono text-xs",children:e.cuit||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.especialidad}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400",children:e.grupo_persona||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-400",children:e.perfil||"-"}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.es_residente?(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded",children:"Sí"}):(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs rounded",children:"No"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("button",{onClick:()=>D(e),className:`px-2 py-1 text-xs rounded transition-colors ${e.activo?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:e.activo?"Activo":"Inactivo"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{M(e),T(!0)},className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Editar",children:(0,t.jsx)(f,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>B(e.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded transition-colors",title:"Eliminar",children:(0,t.jsx)(g,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["Total de médicos: ",(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:q.length})," • ","Activos: ",(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:q.filter(e=>e.activo).length})]})]}),P&&(0,t.jsx)(d,{medico:O,onClose:()=>{T(!1),M(null)},onSave:()=>{F(),T(!1),M(null)}}),I&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)"},onClick:()=>!R&&A(!1),children:(0,t.jsxs)("div",{className:"relative rounded-2xl p-8 max-w-2xl w-full",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)",boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-6",children:"Importar Médicos desde Excel"}),(0,t.jsx)(i.UploadExcel,{onUpload:G,isProcessing:R}),L&&(0,t.jsx)("div",{className:"mt-6",children:L.error?(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-start gap-3 text-red-400",children:[(0,t.jsx)(v.AlertCircle,{className:"w-5 h-5 mt-0.5 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Error de Importación"}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:L.error})]})]}):(0,t.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)(b.CheckCircle2,{className:"w-6 h-6 text-green-400"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-400",children:"Importación Completada"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Total"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:L.total})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Insertados"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-400",children:L.insertados})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Duplicados"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:L.duplicados})]})]}),L.errores&&L.errores.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-red-400 mb-2",children:"Errores:"}),(0,t.jsx)("ul",{className:"text-sm text-red-300/80 space-y-1 max-h-32 overflow-y-auto bg-black/20 p-2 rounded",children:L.errores.map((e,r)=>(0,t.jsxs)("li",{children:["• ",e]},r))})]})]})}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)(n.Button,{onClick:()=>{A(!1),U(null)},variant:"outline",className:"border-gray-600 text-gray-300",children:"Cerrar"})})]})})]})}e.s(["default",()=>N],59784)}]);
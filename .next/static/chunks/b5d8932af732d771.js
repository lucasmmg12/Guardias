(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34754,e=>{"use strict";let t=(0,e.i(71434).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],34754)},80828,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},23164,e=>{"use strict";let t=(0,e.i(71434).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],23164)},17462,e=>{"use strict";var t=e.i(9964),r=e.i(87312),a=e.i(7735),l=e.i(74786),o=e.i(97451);async function i(e,t){let{data:r}=await l.supabase.from("liquidaciones_guardia").select("id").eq("especialidad","Ginecolog칤a").eq("mes",e).eq("anio",t).single();if(!r||!r.id)return[];let a=r.id,{data:i}=await l.supabase.from("detalle_guardia").select("*").eq("liquidacion_id",a);if(!i||0===i.length)return[];let{data:s}=await l.supabase.from("valores_consultas_obra_social").select("*").eq("tipo_consulta","CONSULTA GINECOLOGICA").eq("mes",e).eq("anio",t);if(!s||0===s.length)return[];let n=new Map;s.forEach(e=>{n.set(e.obra_social,e.valor)});let c=new Map;return i.forEach(e=>{let t=!0===e.medico_es_residente;if((0,o.esResidenteHorarioFormativo)(e.fecha,e.hora,t))return;let r=e.obra_social||"PARTICULARES",a=e.medico_nombre||"Desconocido",l=e.medico_id||"sin-id",i=`${l}|${r}`,s=n.get(r)||0;if(c.has(i)){let e=c.get(i);e.cantidad+=1,e.total=e.cantidad*e.valor_unitario}else c.set(i,{medico_id:e.medico_id,medico_nombre:a,obra_social:r,cantidad:1,valor_unitario:s,total:s})}),Array.from(c.values()).sort((e,t)=>e.medico_nombre!==t.medico_nombre?e.medico_nombre.localeCompare(t.medico_nombre):e.obra_social.localeCompare(t.obra_social))}async function s(e,t){let r=await i(e,t),a=new Map;return r.forEach(e=>{let t=e.medico_id||"sin-id",r=e.medico_nombre;if(a.has(t)){let r=a.get(t);r.cantidad+=e.cantidad,r.total_bruto+=e.total,r.retencion_20=.2*r.total_bruto,r.total_neto=r.total_bruto-r.retencion_20}else{let l=e.total,o=.2*l;a.set(t,{medico_id:e.medico_id,medico_nombre:r,cantidad:e.cantidad,total_bruto:l,retencion_20:o,total_neto:l-o})}}),Array.from(a.values()).sort((e,t)=>e.medico_nombre.localeCompare(t.medico_nombre))}var n=e.i(99093),c=e.i(89174);let d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],m=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];var x=e.i(83643),u=e.i(34754),g=e.i(81981),h=e.i(23164);let b=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];function y(){let e=(0,a.useRouter)(),[l,y]=(0,r.useState)(new Date().getMonth()+1),[p,f]=(0,r.useState)(new Date().getFullYear()),[v,N]=(0,r.useState)(new Map),[j,F]=(0,r.useState)([]),[_,S]=(0,r.useState)(!1),[w,C]=(0,r.useState)("medicos");async function A(){S(!0);try{let e=await s(l,p);F(e);let t=await i(l,p),r=new Map;t.forEach(e=>{let t=e.medico_id||"sin-id";r.has(t)||r.set(t,[]),r.get(t).push(e)}),N(r)}catch(e){console.error("Error cargando res칰menes:",e)}finally{S(!1)}}function D(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}(0,r.useEffect)(()=>{A()},[l,p]);let R=Array.from(v.keys()).map(e=>{let t=v.get(e)||[];return t[0]?.medico_nombre||"Desconocido"}).sort();return(0,t.jsx)("div",{className:"min-h-screen p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(x.Button,{onClick:()=>e.push("/ginecologia"),variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(u.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Volver"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-green-400",children:"Res칰menes de Liquidaci칩n - Ginecolog칤a"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-300",children:"Mes:"}),(0,t.jsx)("select",{value:l,onChange:e=>y(Number(e.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white focus:border-green-400 focus:outline-none",children:b.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-300",children:"A침o:"}),(0,t.jsx)("input",{type:"number",value:p,onChange:e=>f(Number(e.target.value)),className:"px-3 py-2 bg-gray-800 border border-green-500/50 rounded-lg text-white w-24 focus:border-green-400 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 border-b border-gray-700",children:[(0,t.jsx)("button",{onClick:()=>C("medicos"),className:`px-4 py-2 font-semibold transition-colors ${"medicos"===w?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:"Resumen por M칠dico"}),(0,t.jsx)("button",{onClick:()=>C("prestadores"),className:`px-4 py-2 font-semibold transition-colors ${"prestadores"===w?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-gray-300"}`,children:"Resumen por Prestador"})]}),_?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"Cargando res칰menes..."}):"medicos"===w?(0,t.jsx)("div",{className:"space-y-6",children:0===R.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No hay datos para el per칤odo seleccionado"}):R.map(e=>{let r=Array.from(v.keys()).find(t=>{let r=v.get(t)||[];return r[0]?.medico_nombre===e}),a=r&&v.get(r)||[],i=a.reduce((e,t)=>e+t.total,0),s=a.reduce((e,t)=>e+t.cantidad,0);return(0,t.jsxs)("div",{className:"rounded-xl p-6",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400",children:e}),(0,t.jsxs)(x.Button,{onClick:()=>{!function({resumenes:e,mes:t,anio:r,medicoNombre:a}){let l=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),i=20,s=(0,o.calcularNumeroLiquidacion)(t,r);l.setFontSize(11),l.setTextColor(34,197,94),l.setFont("helvetica","bold"),l.text("Grow Labs",15,i),l.setFontSize(7.5),l.setTextColor(100,100,100),l.setFont("helvetica","normal"),l.text("Sistema de Liquidaciones de Guardias",15,i+5),i+=15,l.setFontSize(16),l.setTextColor(0,0,0),l.setFont("helvetica","bold"),l.text(a.toUpperCase(),15,i);let m=i+=10;l.setFillColor(240,240,240),l.setDrawColor(200,200,200),l.roundedRect(105,m,90,30,2,2,"FD");let x=m+3.75;l.setFontSize(8.5),l.setTextColor(0,0,0),l.setFont("helvetica","bold"),l.text("Mes:",109.5,x),l.setFont("helvetica","normal"),l.text(d[t-1],151.5,x),x+=7.5,l.setFont("helvetica","bold"),l.text("A침o:",109.5,x),l.setFont("helvetica","normal"),l.text(String(r),151.5,x),x+=7.5,l.setFont("helvetica","bold"),l.text("Liq:",109.5,x),l.setFont("helvetica","normal"),l.text(String(s),151.5,x),x+=7.5,l.setFont("helvetica","bold"),l.text("Generado:",109.5,x),l.setFont("helvetica","normal");let u=new Date().toLocaleDateString("es-AR");l.text(u,151.5,x),i=m+30+10;let g=e.map(e=>[e.obra_social,String(e.cantidad),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.valor_unitario),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.total)]),h=e.reduce((e,t)=>e+t.cantidad,0),b=e.reduce((e,t)=>e+t.total,0);g.push(["TOTAL",String(h),"",new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(b)]);(0,c.default)(l,{startY:i,head:[["Obra social","Cantidad","Valor unitario","Total"]],body:g,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:[255,255,255],fontStyle:"bold",fontSize:9,halign:"left"},bodyStyles:{fontSize:8,textColor:[0,0,0],cellPadding:2,halign:"left"},columnStyles:{0:{cellWidth:70,fontStyle:"bold"},1:{cellWidth:30,halign:"right"},2:{cellWidth:40,halign:"right"},3:{cellWidth:40,halign:"right",fontStyle:"bold"}},styles:{lineColor:[220,220,220],lineWidth:.1,valign:"middle"},margin:{left:15,right:15},tableWidth:180,showHead:"everyPage",pageBreak:"auto",rowPageBreak:"avoid",didParseCell:e=>{e.row.index===g.length-1&&(e.cell.styles.fillColor=[240,240,240],e.cell.styles.fontStyle="bold")}});let y=l.getNumberOfPages();for(let e=1;e<=y;e++)l.setPage(e),l.setFontSize(7),l.setTextColor(150,150,150),l.setFont("helvetica","italic"),l.text(`P\xe1gina ${e} de ${y} - Powered by Grow Labs 游꺔`,105,287,{align:"center"});let p=`Resumen_${a.replace(/[^a-zA-Z0-9]/g,"_")}_${d[t-1]}_${r}.pdf`;l.save(p)}({resumenes:a,mes:l,anio:p,medicoNombre:e})},variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(g.FileDown,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Obra social"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Cantidad"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Valor unitario"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total"})]})}),(0,t.jsxs)("tbody",{children:[a.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.obra_social}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:e.cantidad}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:D(e.valor_unitario)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right font-semibold",children:D(e.total)})]},r)),(0,t.jsxs)("tr",{className:"bg-gray-800/50 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400",children:"TOTAL"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:s}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:D(i)})]})]})]})})]},e)})}):(0,t.jsx)("div",{className:"space-y-6",children:0===j.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No hay datos para el per칤odo seleccionado"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-end mb-4",children:(0,t.jsxs)(x.Button,{onClick:function(){!function({resumenes:e,mes:t,anio:r}){let a=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),l=20,i=(0,o.calcularNumeroLiquidacion)(t,r);a.setFontSize(11),a.setTextColor(34,197,94),a.setFont("helvetica","bold"),a.text("Grow Labs",15,l),a.setFontSize(7.5),a.setTextColor(100,100,100),a.setFont("helvetica","normal"),a.text("Sistema de Liquidaciones de Guardias",15,l+5),l+=15,a.setFontSize(16),a.setTextColor(0,0,0),a.setFont("helvetica","bold"),a.text("Guardia Ginecol칩gica",15,l),a.setFontSize(12),a.setTextColor(100,100,100),a.setFont("helvetica","normal"),a.text(`${m[t-1]} ${r}`,15,l+7);let s=l+=15;a.setFillColor(240,240,240),a.setDrawColor(200,200,200),a.roundedRect(105,s,90,22.5,2,2,"FD");let d=s+3.75;a.setFontSize(8.5),a.setTextColor(0,0,0),a.setFont("helvetica","bold"),a.text("Mes:",109.5,d),a.setFont("helvetica","normal"),a.text(m[t-1],151.5,d),d+=7.5,a.setFont("helvetica","bold"),a.text("A침o:",109.5,d),a.setFont("helvetica","normal"),a.text(String(r),151.5,d),d+=7.5,a.setFont("helvetica","bold"),a.text("Liq:",109.5,d),a.setFont("helvetica","normal"),a.text(String(i),151.5,d),l=s+22.5+10;let x=e.map(e=>[e.medico_nombre,String(e.cantidad),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.total_bruto),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.retencion_20),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e.total_neto)]),u=e.reduce((e,t)=>e+t.cantidad,0),g=e.reduce((e,t)=>e+t.total_bruto,0),h=e.reduce((e,t)=>e+t.retencion_20,0),b=e.reduce((e,t)=>e+t.total_neto,0);x.push(["Total general",String(u),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(g),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(h),new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2}).format(b)]);(0,c.default)(a,{startY:l,head:[["Prestador","Cantidad","Total bruto","Retenci칩n 20%","Total Neto"]],body:x,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:[255,255,255],fontStyle:"bold",fontSize:9,halign:"left"},bodyStyles:{fontSize:8,textColor:[0,0,0],cellPadding:2,halign:"left"},columnStyles:{0:{cellWidth:60,fontStyle:"bold"},1:{cellWidth:25,halign:"right"},2:{cellWidth:35,halign:"right"},3:{cellWidth:30,halign:"right"},4:{cellWidth:30,halign:"right",fontStyle:"bold"}},styles:{lineColor:[220,220,220],lineWidth:.1,valign:"middle"},margin:{left:15,right:15},tableWidth:180,showHead:"everyPage",pageBreak:"auto",rowPageBreak:"avoid",didParseCell:e=>{e.row.index===x.length-1&&(e.cell.styles.fillColor=[240,240,240],e.cell.styles.fontStyle="bold")}});let y=a.getNumberOfPages();for(let e=1;e<=y;e++)a.setPage(e),a.setFontSize(7),a.setTextColor(150,150,150),a.setFont("helvetica","italic"),a.text(`P\xe1gina ${e} de ${y} - Powered by Grow Labs 游꺔`,105,287,{align:"center"});let p=`Resumen_Prestadores_${m[t-1]}_${r}.pdf`;a.save(p)}({resumenes:j,mes:l,anio:p})},variant:"outline",className:"border-green-500/50 text-green-400 hover:bg-green-500/20",children:[(0,t.jsx)(h.Download,{className:"h-4 w-4 mr-2"}),"Exportar PDF Completo"]})}),(0,t.jsxs)("div",{className:"rounded-xl p-6",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"Resumen por Prestador"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-green-400",children:"Prestador"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Cantidad"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total bruto"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Retenci칩n 20%"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-green-400",children:"Total Neto"})]})}),(0,t.jsxs)("tbody",{children:[j.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 font-medium",children:e.medico_nombre}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:e.cantidad}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:D(e.total_bruto)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right",children:D(e.retencion_20)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300 text-right font-semibold",children:D(e.total_neto)})]},r)),(0,t.jsxs)("tr",{className:"bg-gray-800/50 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400",children:"Total general"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:j.reduce((e,t)=>e+t.cantidad,0)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:D(j.reduce((e,t)=>e+t.total_bruto,0))}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:D(j.reduce((e,t)=>e+t.retencion_20,0))}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-green-400 text-right",children:D(j.reduce((e,t)=>e+t.total_neto,0))})]})]})]})})]})]})})]})})}e.s(["default",()=>y],17462)},44557,e=>{e.v(t=>Promise.all(["static/chunks/50947de1fb5100bc.js"].map(t=>e.l(t))).then(()=>t(25772)))},18454,e=>{e.v(t=>Promise.all(["static/chunks/46ea109e3f7ee3dc.js"].map(t=>e.l(t))).then(()=>t(32694)))},26753,e=>{e.v(t=>Promise.all(["static/chunks/7bd0dee9ec340940.js"].map(t=>e.l(t))).then(()=>t(90015)))}]);
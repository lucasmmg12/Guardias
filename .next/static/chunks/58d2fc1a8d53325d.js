(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80828,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},41253,e=>{"use strict";var t=e.i(9964),r=e.i(87312),s=e.i(7987),a=e.i(83643),l=e.i(71434);let o=(0,l.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var i=e.i(68499);let n=(0,l.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var c=e.i(97451);function d({value:e,type:l="text",onSave:d,className:u,isEditable:h=!0,columnName:m}){let[x,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(e??""),[f,y]=(0,r.useState)(!1),w=(0,r.useRef)(null),j=(0,r.useMemo)(()=>m?.toLowerCase().trim()==="cliente",[m]),v=(0,r.useMemo)(()=>j?(0,c.obtenerSugerenciasObraSocial)(String(e)):[],[j,e]);(0,r.useEffect)(()=>{b(e??"")},[e]),(0,r.useEffect)(()=>{x&&w.current&&w.current.focus()},[x]);let k=(0,r.useCallback)(async()=>{if(g===e)return void p(!1);y(!0);try{await d(g),p(!1)}catch(e){console.error("Error saving:",e)}finally{y(!1)}},[g,e,d]),N=(0,r.useCallback)(()=>{b(e??""),p(!1)},[e]),C=(0,r.useCallback)(e=>{"Enter"===e.key?k():"Escape"===e.key&&N()},[k,N]);if(!h)return(0,t.jsx)("div",{className:(0,c.cn)("px-2 py-1",u),children:e});if(x)return(0,t.jsxs)("div",{className:"flex flex-col gap-1 animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(s.Input,{ref:w,type:l,value:g,onChange:e=>b("number"===l?Number(e.target.value):e.target.value),onKeyDown:C,disabled:f,className:"h-8 min-w-[100px] bg-gray-800 border-green-500/50 focus:border-green-400 text-white",placeholder:j?"Ingrese obra social o cÃ³digo":void 0}),(0,t.jsx)(a.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-green-400 hover:text-green-300 hover:bg-green-500/20",onClick:k,disabled:f,children:(0,t.jsx)(o,{className:"h-4 w-4"})}),(0,t.jsx)(a.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",onClick:N,disabled:f,children:(0,t.jsx)(i.X,{className:"h-4 w-4"})})]}),j&&v.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:v.map((e,r)=>(0,t.jsx)("button",{type:"button",onClick:()=>{b(e),w.current?.focus()},className:"text-[10px] px-2 py-0.5 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded hover:bg-blue-500/30 transition-colors",children:e},r))})]});let S=(0,r.useCallback)(()=>{p(!0)},[]),E=(0,r.useMemo)(()=>null===e||""===e?(0,t.jsx)("span",{className:"text-gray-500 italic text-xs",children:"VacÃ­o"}):"number"===l&&"number"==typeof e?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e):e,[e,l]);return(0,t.jsxs)("div",{className:(0,c.cn)("group flex items-center justify-between px-2 py-1 rounded hover:bg-white/5 cursor-pointer transition-colors min-h-[32px]",u),onClick:S,children:[(0,t.jsx)("span",{className:"truncate",children:E}),(0,t.jsx)(n,{className:"h-3 w-3 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})}e.s(["InlineEditCell",()=>d],41253)},5097,e=>{"use strict";let t=(0,e.i(71434).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],5097)},7987,e=>{"use strict";var t=e.i(9964),r=e.i(87312),s=e.i(97451);let a=r.forwardRef(({className:e,type:r,...a},l)=>(0,t.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));a.displayName="Input",e.s(["Input",()=>a])},23164,e=>{"use strict";let t=(0,e.i(71434).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],23164)},40010,e=>{"use strict";let t=(0,e.i(71434).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],40010)},19029,e=>{"use strict";let t=(0,e.i(71434).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],19029)},34754,e=>{"use strict";let t=(0,e.i(71434).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],34754)},60554,e=>{"use strict";let t=(0,e.i(71434).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],60554)},87914,e=>{"use strict";var t=e.i(9964),r=e.i(87312),s=e.i(71434);let a=(0,s.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),l=(0,s.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var o=e.i(5097),i=e.i(40010),n=e.i(68499),c=e.i(23164),d=e.i(83643),u=e.i(41253),h=e.i(60922),m=e.i(60554);function x({isOpen:e,onClose:s,onConfirm:a,title:l,message:o,confirmText:i="Aceptar",cancelText:c="Cancelar",type:u="danger"}){let[x,p]=(0,r.useState)(!1);if((0,r.useEffect)(()=>(p(!0),()=>p(!1)),[]),!e||!x)return null;let g=()=>{switch(u){case"danger":return"text-red-400";case"warning":return"text-yellow-400";default:return"text-blue-400"}},b=(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",zIndex:9999,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:s,children:(0,t.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl p-6 shadow-2xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:`1px solid ${(()=>{switch(u){case"danger":return"border-red-500/50";case"warning":return"border-yellow-500/50";default:return"border-blue-500/50"}})().replace("/50","/30")}`,boxShadow:"0 8px 32px 0 rgba(34, 197, 94, 0.3)",animation:"fadeIn 0.2s ease-in-out"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-white/10 transition-colors text-gray-400 hover:text-white",children:(0,t.jsx)(n.X,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,t.jsx)(m.AlertTriangle,{className:`h-6 w-6 ${g()}`})}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("h3",{className:`text-lg font-semibold ${g()}`,children:l}),(0,t.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:o})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)(d.Button,{onClick:s,variant:"outline",className:"border-gray-500/50 text-gray-300 hover:bg-gray-500/20",children:c}),(0,t.jsx)(d.Button,{onClick:()=>{a(),s()},className:(()=>{switch(u){case"danger":return"bg-red-600 hover:bg-red-500 text-white";case"warning":return"bg-yellow-600 hover:bg-yellow-500 text-white";default:return"bg-blue-600 hover:bg-blue-500 text-white"}})(),children:i})]})]})});return(0,h.createPortal)(b,document.body)}var p=e.i(38431);function g({title:e,count:s,description:h,icon:m,bgColor:g,borderColor:b,textColor:f,rows:y,data:w,onCellUpdate:j,onDeleteRow:v,onDeleteAll:k,allowEdit:N=!1,allowDelete:C=!1,mes:S,anio:E,sectionKey:z,esParticularRow:M,esSinHorarioRow:$,esDuplicadoRow:I,esResidenteFormativoRow:D}){let[_,R]=(0,r.useState)(!1),[T,L]=(0,r.useState)(new Set),[A,F]=(0,r.useState)(!1),[P,B]=(0,r.useState)(null),[q,O]=(0,r.useState)(new Map),[U,K]=(0,r.useState)(new Map),W=(0,r.useRef)(new Map);(0,r.useEffect)(()=>{S&&E&&"true"===localStorage.getItem(`expandable_${z}_${S}_${E}`)&&R(!0)},[S,E,z]);let H=e=>{let t=e.toLowerCase().trim();return t.includes("cliente")||t.includes("obra")},V=(0,r.useMemo)(()=>0===U.size?y:y.filter(e=>w.headers.every(t=>{let r=U.get(t);if(!r||""===r.trim())return!0;let s=e[t];if(null==s)return!1;let a=String(s).toLowerCase(),l=r.toLowerCase().trim();return a.includes(l)})),[y,U,w.headers]),X=V.length,G=(0,r.useCallback)((e,t)=>{O(r=>{let s=new Map(r);return""===t.trim()?s.delete(e):s.set(e,t),s});let r=W.current.get(e);r&&clearTimeout(r);let s=setTimeout(()=>{K(r=>{let s=new Map(r);return""===t.trim()?s.delete(e):s.set(e,t),s}),W.current.delete(e)},300);W.current.set(e,s)},[]);if((0,r.useEffect)(()=>()=>{W.current.forEach(e=>clearTimeout(e)),W.current.clear()},[]),0===s)return null;let J=40*(U.size>0),Q=`${J+40}px`,Y="60px";return(0,t.jsxs)("div",{className:"w-full space-y-2",children:[(0,t.jsx)("div",{className:"p-4 rounded-xl border-2 cursor-pointer transition-all hover:opacity-90",style:{background:g,backdropFilter:"blur(20px)",borderColor:b},onClick:()=>{let e=!_;R(e),S&&E&&localStorage.setItem(`expandable_${z}_${S}_${E}`,String(e)),e||L(new Set)},children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",style:{color:f},children:[m,(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"font-bold text-lg mb-1",children:[e," ",X!==s&&`(${X} de ${s})`]}),(0,t.jsx)("div",{className:"text-sm",style:{color:f,opacity:.8},children:h})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[_&&V.length>0&&(0,t.jsxs)(d.Button,{onClick:t=>{t.stopPropagation();try{let t=`${e.toLowerCase().replace(/\s+/g,"_")}_filtrado`;!function({rows:e,headers:t,filename:r="datos_filtrados",sheetName:s="Datos"}){if(0===e.length)throw Error("No hay datos para exportar");let a=s.length>31?s.substring(0,31):s,l=e.map(e=>{let r={};return t.forEach(t=>{r[t]=e[t]??""}),r}),o=p.utils.json_to_sheet(l),i=t.map(e=>({wch:Math.min(Math.max(e.length,...l.map(t=>String(t[e]||"").length))+2,50)}));o["!cols"]=i;let n=p.utils.book_new();p.utils.book_append_sheet(n,o,a);let c=new Blob([p.write(n,{type:"array",bookType:"xlsx",cellStyles:!0})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=`${r}_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(d)}({rows:V,headers:w.headers,filename:t,sheetName:e})}catch(e){console.error("Error exportando Excel:",e),alert(`Error al exportar: ${e.message}`)}},size:"sm",variant:"outline",className:"mr-2",style:{borderColor:b,color:f},children:[(0,t.jsx)(c.Download,{className:"h-4 w-4 mr-1"}),"Descargar Excel (",V.length,")"]}),C&&_&&(0,t.jsxs)(t.Fragment,{children:[T.size>0&&(0,t.jsxs)(d.Button,{onClick:e=>{e.stopPropagation(),B({type:"multiple",count:T.size}),F(!0)},size:"sm",variant:"destructive",className:"mr-2",children:[(0,t.jsx)(o.Trash2,{className:"h-4 w-4 mr-1"}),"Eliminar seleccionados (",T.size,")"]}),k&&(0,t.jsxs)(d.Button,{onClick:e=>{e.stopPropagation(),B({type:"all",count:s}),F(!0)},size:"sm",variant:"destructive",className:"mr-2",children:[(0,t.jsx)(o.Trash2,{className:"h-4 w-4 mr-1"}),"Eliminar todos"]})]}),_?(0,t.jsx)(l,{className:"h-6 w-6",style:{color:f}}):(0,t.jsx)(a,{className:"h-6 w-6",style:{color:f}})]})]})}),_&&(0,t.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[U.size>0&&(0,t.jsxs)("div",{className:"px-4 py-2 bg-blue-500/20 border-b border-blue-500/30 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-400",children:[(0,t.jsx)(i.Search,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[U.size," filtro(s) activo(s) - Mostrando ",X," de ",y.length," registros"]})]}),(0,t.jsxs)(d.Button,{onClick:()=>{W.current.forEach(e=>clearTimeout(e)),W.current.clear(),K(new Map),O(new Map)},size:"sm",variant:"ghost",className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 h-7 px-2",children:[(0,t.jsx)(n.X,{className:"h-3 w-3 mr-1"}),"Limpiar filtros"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse text-xs",children:[(0,t.jsxs)("thead",{children:[(0,t.jsxs)("tr",{className:"border-b border-white/10",children:[C&&(0,t.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-300 bg-white/5 whitespace-nowrap sticky left-0",style:{position:"sticky",top:0,zIndex:12,minWidth:"50px",maxWidth:"50px",background:"rgba(0, 0, 0, 0.8)"},children:(0,t.jsx)("input",{type:"checkbox",checked:T.size===V.length&&V.length>0,onChange:e=>{e.target.checked?L(new Set(V.map((e,t)=>w.rows.findIndex(e=>e===V[t])).filter(e=>-1!==e))):L(new Set)},className:"w-4 h-4 rounded border-gray-500 bg-gray-800 text-green-500 focus:ring-green-500 focus:ring-2",onClick:e=>e.stopPropagation()})}),w.headers.map((e,r)=>(0,t.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-300 bg-white/5 whitespace-nowrap",style:{position:"sticky",top:0,zIndex:10,minWidth:"120px",maxWidth:"200px"},children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"truncate",children:e}),H(e)&&N&&(0,t.jsx)("span",{className:"text-[10px] text-green-400 bg-green-400/20 px-1.5 py-0.5 rounded flex-shrink-0",children:"Editable"})]})},r))]}),(0,t.jsxs)("tr",{className:"border-b border-white/5 bg-white/2",children:[C&&(0,t.jsx)("td",{className:"px-2 py-2 sticky left-0",style:{background:"rgba(0, 0, 0, 0.9)",zIndex:11,position:"sticky",top:Q}}),w.headers.map((e,r)=>(0,t.jsx)("td",{className:"px-1 py-2",style:{position:"sticky",top:Q,zIndex:9,background:"rgba(0, 0, 0, 0.9)"},children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:q.get(e)||"",onChange:t=>G(e,t.target.value),placeholder:"Filtrar...",className:"w-full px-2 py-1.5 text-xs bg-gray-800/70 border border-gray-600 rounded text-white placeholder-gray-500 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500",onClick:e=>e.stopPropagation()}),q.get(e)&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),G(e,"")},className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white z-10",children:(0,t.jsx)(n.X,{className:"h-3 w-3"})})]})},r))]})]}),(0,t.jsx)("tbody",{style:{paddingTop:Y},children:V.map((e,r)=>{let s=w.rows.findIndex(t=>t===e),a=T.has(s),l="detalle_completo"===z,o=!!l&&!!M&&M(s),i=!!l&&!!$&&$(s),n=!!l&&!!I&&I(s),c=!!l&&!!D&&D(s),d="transparent";return i?d="rgba(239, 68, 68, 0.15)":n?d="rgba(168, 85, 247, 0.15)":o?d="rgba(251, 191, 36, 0.15)":c&&(d="rgba(59, 130, 246, 0.15)"),a&&(d="transparent"===d?"rgba(34, 197, 94, 0.2)":d.replace("0.15","0.25")),(0,t.jsxs)("tr",{className:"border-b transition-colors border-white/5 hover:bg-white/5",style:{backgroundColor:d,borderLeft:a?"3px solid rgba(34, 197, 94, 0.8)":void 0},children:[C&&(0,t.jsx)("td",{className:"px-2 py-1.5 text-center sticky left-0",style:{minWidth:"50px",maxWidth:"50px",background:"transparent"!==d?d:"rgba(0, 0, 0, 0.5)",zIndex:8},onClick:e=>e.stopPropagation(),children:(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:e=>{let t=new Set(T);e.target.checked?t.add(s):t.delete(s),L(t)},className:"w-4 h-4 rounded border-gray-500 bg-gray-800 text-green-500 focus:ring-green-500 focus:ring-2"})}),w.headers.map((r,a)=>{let l=e[r]??null,o=H(r)&&N;return(0,t.jsx)("td",{className:"px-2 py-1.5 text-xs text-gray-300",style:{minWidth:"120px",maxWidth:"200px",position:"relative",zIndex:1},children:o&&j?(0,t.jsx)(u.InlineEditCell,{value:l||"",onSave:async e=>{await j(s,r,e)},columnName:r}):(0,t.jsx)("span",{className:"truncate block",children:l||"-"})},a)})]},s)})})]})})]}),(0,t.jsx)(x,{isOpen:A,onClose:()=>{F(!1),B(null)},onConfirm:async()=>{if(P)try{if("all"===P.type&&k)await k(),L(new Set);else if("multiple"===P.type&&v){let e=Array.from(T).sort((e,t)=>t-e);for(let t of(e.map(e=>{let t=w.rows[e];return t?t.__fila_excel:null}).filter(e=>null!=e),e))t<w.rows.length&&await v(t);L(new Set)}else if("single"===P.type&&void 0!==P.rowIndex&&v){await v(P.rowIndex);let e=new Set(T);e.delete(P.rowIndex),L(e)}}catch(e){console.error("Error eliminando filas:",e)}},title:"Confirmar eliminaciÃ³n",message:P?.type==="all"?`\xbfEst\xe1 seguro de que desea eliminar todos los ${P.count} registros? Esta acci\xf3n no se puede deshacer.`:P?.type==="multiple"?`\xbfEst\xe1 seguro de que desea eliminar los ${P.count} registros seleccionados? Esta acci\xf3n no se puede deshacer.`:"Â¿EstÃ¡ seguro de que desea eliminar esta fila? Esta acciÃ³n no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"})]})}var b=e.i(19029),f=e.i(58427);let y=(0,s.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),w=(0,s.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),j=(0,s.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var v=e.i(97451),k=e.i(74786);function N({data:e,especialidad:s,onCellUpdate:a,onDeleteRow:l,liquidacionId:o,mes:i,anio:n}){let[c,d]=(0,r.useState)(e.rows),[u,h]=(0,r.useState)({}),[m,x]=(0,r.useState)([]),[p,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(e.rows)},[e.rows]),(0,r.useEffect)(()=>{if(!s){x([]),N(!1);return}!async function(){try{if(N(!0),!s)return;let{data:e,error:t}=await k.supabase.from("medicos").select("*").eq("especialidad",s).eq("activo",!0);if(t)throw t;x(e||[])}catch(e){console.error("Error loading mÃ©dicos:",e)}finally{N(!1)}}()},[s]);let C=(0,r.useMemo)(()=>{let e=new Map;return m.forEach(t=>{let r=t.nombre.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();e.set(r,t);let s=t.nombre.split(",").map(e=>e.trim());if(s.length>0){let r=s[0].toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();r&&!e.has(r)&&e.set(r,t)}}),e},[m]),S=(0,r.useCallback)(e=>{if(!e||"string"!=typeof e)return null;let t=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();if(C.has(t))return C.get(t)||null;for(let[e,r]of C.entries())if(t.includes(e)||e.includes(t))return r;return null},[C]),E=(0,r.useMemo)(()=>{let t=new Set,r=e.headers.findIndex(e=>{let t=e.toLowerCase().trim();return"cliente"===t||t.includes("obra social")||"obra social"===t||"obra"===t||t.includes("obra")&&t.includes("social")});if(-1===r)return console.warn("[ExcelDataTable] No se encontrÃ³ columna de Cliente/Obra Social"),t;let s=e.headers[r];return c.forEach((e,r)=>{let a=e[s];(0,v.esParticular)(a)&&t.add(r)}),console.log(`[ExcelDataTable] Filas sin obra social detectadas: ${t.size}`),t},[c,e.headers]),z=(0,r.useMemo)(()=>{let t=new Set;return c.forEach((r,s)=>{(0,v.tieneHorario)(r,e.headers)||t.add(s)}),t},[c,e.headers]),M=(0,r.useMemo)(()=>(0,v.obtenerIndicesDuplicados)(c,e.headers),[c,e.headers]),$=(0,r.useMemo)(()=>{let t=new Set;if(!s||0===m.length||p)return t;let r=e.headers.findIndex(e=>{let t=e.toLowerCase().trim();return"responsable"===t||t.includes("responsable")||t.includes("medico")}),a=e.headers.findIndex(e=>{let t=e.toLowerCase().trim();return"fecha"===t||t.includes("fecha")||t.includes("fecha visita")}),l=e.headers.findIndex(e=>{let t=e.toLowerCase().trim();return t.includes("hora")||t.includes("horario")||t.includes("inicio")});return -1===r||-1===a||-1===l||c.forEach((s,o)=>{let i=s[e.headers[r]],n=s[e.headers[a]],c=s[e.headers[l]],d=S(i);d&&d.es_residente&&(0,v.esResidenteHorarioFormativo)(n,c,d.es_residente)&&t.add(o)}),t},[c,e.headers,s,m,p,S]),I=E.size,D=z.size,_=M.size,R=$.size,T=(0,r.useCallback)(async t=>{if(l){await l(t);let r=c.filter((e,r)=>r!==t);d(r),e.rows=r}else{let r=c.filter((e,r)=>r!==t);d(r),e.rows=r}},[c,e,l]),L=(0,r.useCallback)(async t=>{if(l)for(let e of Array.from(t).sort((e,t)=>t-e))await l(e);else{let r=c.filter((e,r)=>!t.has(r));d(r),e.rows=r}},[c,e,l]),A=(0,r.useMemo)(()=>c.filter((e,t)=>E.has(t)),[c,E]),F=(0,r.useMemo)(()=>c.filter((e,t)=>z.has(t)),[c,z]),P=(0,r.useMemo)(()=>c.filter((e,t)=>M.has(t)),[c,M]),B=(0,r.useMemo)(()=>c.filter((e,t)=>$.has(t)),[c,$]),q=(0,r.useCallback)(async()=>{await L(z)},[z,L]),O=(0,r.useCallback)(async()=>{await L(M)},[M,L]),U=(0,r.useCallback)(async()=>{await L($)},[$,L]);return(0,t.jsxs)("div",{className:"w-full space-y-4",children:[e.periodo&&(0,t.jsx)("div",{className:"p-4 rounded-xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(34, 197, 94, 0.3)"},children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-400",children:[(0,t.jsx)(b.CheckCircle2,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-semibold",children:"PerÃ­odo analizado:"}),(0,t.jsxs)("span",{className:"text-white",children:[e.periodo.desde," - ",e.periodo.hasta]})]})}),(0,t.jsx)(g,{title:`âš ï¸ ${I} registro${I>1?"s":""} sin obra social detectado${I>1?"s":""}`,count:I,description:'Estos registros deben ser revisados. Si son pacientes particulares, edite la columna "Cliente" y agregue: "042 - PARTICULARES"',icon:(0,t.jsx)(f.AlertCircle,{className:"h-6 w-6 flex-shrink-0"}),bgColor:"rgba(251, 191, 36, 0.15)",borderColor:"rgba(251, 191, 36, 0.5)",textColor:"#fbbf24",rows:A,data:e,onCellUpdate:a,allowEdit:!0,mes:i,anio:n,sectionKey:"sin_obra_social"}),(0,t.jsx)(g,{title:`âš ï¸ ${D} registro${D>1?"s":""} sin horario de inicio detectado${D>1?"s":""}`,count:D,description:"Estos registros indican que el paciente no se atendiÃ³. Deben ser eliminados.",icon:(0,t.jsx)(y,{className:"h-6 w-6 flex-shrink-0"}),bgColor:"rgba(239, 68, 68, 0.15)",borderColor:"rgba(239, 68, 68, 0.5)",textColor:"#ef4444",rows:F,data:e,onDeleteRow:T,onDeleteAll:q,allowDelete:!0,mes:i,anio:n,sectionKey:"sin_horario"}),(0,t.jsx)(g,{title:`âš ï¸ ${_} registro${_>1?"s":""} duplicado${_>1?"s":""} detectado${_>1?"s":""}`,count:_,description:"Se detectaron filas completamente iguales (misma fecha, misma hora, mismo todo). Revise y elimine los duplicados si es necesario.",icon:(0,t.jsx)(f.AlertCircle,{className:"h-6 w-6 flex-shrink-0"}),bgColor:"rgba(168, 85, 247, 0.15)",borderColor:"rgba(168, 85, 247, 0.5)",textColor:"#a855f7",rows:P,data:e,onDeleteRow:T,onDeleteAll:O,allowDelete:!0,mes:i,anio:n,sectionKey:"duplicados"}),(0,t.jsx)(g,{title:`â„¹ï¸ ${R} consulta${R>1?"s":""} de residente${R>1?"s":""} en horario formativo detectada${R>1?"s":""}`,count:R,description:"Estas consultas son de residentes realizadas entre lunes a sÃ¡bado de 07:00 a 15:00. NO se deben pagar segÃºn las reglas del sistema.",icon:(0,t.jsx)(w,{className:"h-6 w-6 flex-shrink-0"}),bgColor:"rgba(59, 130, 246, 0.15)",borderColor:"rgba(59, 130, 246, 0.5)",textColor:"#3b82f6",rows:B,data:e,onDeleteRow:T,onDeleteAll:U,allowDelete:!0,mes:i,anio:n,sectionKey:"residente_formativo"}),(0,t.jsx)(g,{title:`ðŸ“Š Ver detalle completo (${c.length} registros)`,count:c.length,description:"Muestra todos los registros del Excel para revisiÃ³n completa con colores segÃºn reglas.",icon:(0,t.jsx)(j,{className:"h-6 w-6 flex-shrink-0"}),bgColor:"rgba(34, 197, 94, 0.15)",borderColor:"rgba(34, 197, 94, 0.5)",textColor:"#22c55e",rows:c,data:e,onCellUpdate:a,onDeleteRow:T,allowEdit:!0,allowDelete:!0,mes:i,anio:n,sectionKey:"detalle_completo",esParticularRow:e=>E.has(e),esSinHorarioRow:e=>z.has(e),esDuplicadoRow:e=>M.has(e),esResidenteFormativoRow:e=>$.has(e)}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["Total de filas: ",(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:c.length})," â€¢ ","Columnas: ",(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:e.headers.length}),I>0&&(0,t.jsxs)(t.Fragment,{children:[" â€¢ ","Sin obra social: ",(0,t.jsx)("span",{className:"text-yellow-400 font-semibold",children:I})]}),D>0&&(0,t.jsxs)(t.Fragment,{children:[" â€¢ ","Sin horario: ",(0,t.jsx)("span",{className:"text-red-400 font-semibold",children:D})]}),_>0&&(0,t.jsxs)(t.Fragment,{children:[" â€¢ ","Duplicados: ",(0,t.jsx)("span",{className:"text-purple-400 font-semibold",children:_})]}),R>0&&(0,t.jsxs)(t.Fragment,{children:[" â€¢ ","Residente formativo: ",(0,t.jsx)("span",{className:"text-blue-400 font-semibold",children:R})]})]})]})}e.s(["ExcelDataTable",()=>N],87914)},44557,e=>{e.v(t=>Promise.all(["static/chunks/50947de1fb5100bc.js"].map(t=>e.l(t))).then(()=>t(25772)))},18454,e=>{e.v(t=>Promise.all(["static/chunks/46ea109e3f7ee3dc.js"].map(t=>e.l(t))).then(()=>t(32694)))},26753,e=>{e.v(t=>Promise.all(["static/chunks/7bd0dee9ec340940.js"].map(t=>e.l(t))).then(()=>t(90015)))}]);